<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lecture 3: Lists & Arrays</title>

  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root{
      /* --- THEME CONFIGURATION --- */
      --stage-0: #0b1220;      /* Dark background outer */
      --stage-1: #0f1a2e;      /* Dark background inner */

      --slide-bg: #ffffff;     /* Slide background */
      --ink: #0f172a;          /* Text color */
      --muted: #475569;        /* Subtext color */

      --soft: #e2e8f0;         /* Borders */
      --soft2: #f1f5f9;        /* Light backgrounds */

      --accent: #16a34a;       /* Primary Accent (Green) */
      --accent-2: #22c55e;     /* Brighter Accent */
      
      --radius: 20px;
      --shadow: 0 25px 60px rgba(0,0,0,.45);

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      --sans: "Segoe UI", system-ui, -apple-system, Roboto, Helvetica, Arial, sans-serif;

      --baseW: 1600;
      --baseH: 900;
      --scale: 1;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: var(--sans);
      background:
        radial-gradient(1400px 800px at 20% 10%, rgba(34,197,94,.15), transparent 60%),
        radial-gradient(1200px 800px at 85% 20%, rgba(22,163,74,.10), transparent 55%),
        linear-gradient(180deg, var(--stage-0), var(--stage-1));
      color:#e5e7eb;
      overflow:hidden;
    }

    /* Progress Bar */
    #progress-container{
      position:fixed; top:0; left:0; width:100%; height:8px;
      background: rgba(255,255,255,.10); z-index:9999; backdrop-filter: blur(6px);
    }
    #progress-bar{
      height:100%; width:0%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transition: width .25s ease;
    }

    /* Stage & Deck */
    .stage{
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center; padding: 18px;
    }
    .deck-wrap{
      width: calc(var(--baseW) * 1px);
      height: calc(var(--baseH) * 1px);
      transform: scale(var(--scale));
      transform-origin:center center;
      position:relative;
    }
    .deck{ width:100%; height:100%; position:relative; }

    /* Slide Logic */
    .slide{
      width:100%; height:100%;
      background: var(--slide-bg);
      color: var(--ink);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position:absolute; inset:0;
      display:none;
      overflow:hidden;
      padding: 50px 60px;
      animation: slideIn .28s ease;
    }
    .slide.active{ display:block; }
    
    @keyframes slideIn{
      from{ opacity:0; transform: translateY(14px) scale(.99); }
      to{ opacity:1; transform: translateY(0) scale(1); }
    }

    /* Decorative Triangles */
    .slide::before, .slide::after{
      content:""; position:absolute; width: 240px; height: 240px; pointer-events:none; opacity:.95; z-index: 0;
    }
    .slide::before{
      top:-1px; left:-1px;
      background: radial-gradient(circle at 0% 0%, rgba(34,197,94,.22), transparent 55%),
                  linear-gradient(135deg, rgba(22,163,74,.95), rgba(34,197,94,.55));
      clip-path: polygon(0 0, 100% 0, 0 100%);
    }
    .slide::after{
      bottom:-1px; right:-1px;
      background: radial-gradient(circle at 100% 100%, rgba(34,197,94,.22), transparent 55%),
                  linear-gradient(315deg, rgba(22,163,74,.95), rgba(34,197,94,.55));
      clip-path: polygon(100% 100%, 100% 0, 0 100%);
    }

    /* Typography & Header */
    .slide-top{
      position:relative; z-index:2; display:flex; align-items:center; justify-content:space-between; gap:20px; margin-bottom: 22px;
    }
    .meta{ display:flex; flex-direction:column; gap:4px; line-height:1.15; }
    .meta .course{ font-weight:800; letter-spacing:.06em; text-transform:uppercase; color: var(--ink); font-size: 16px; }
    .meta .sub{ font-size: 15px; color: var(--muted); }
    
    h1{ font-size: 56px; margin: 8px 0 10px; letter-spacing:-1.1px; line-height:1.06; position:relative; z-index:2; }
    h2{ font-size: 40px; margin: 6px 0 18px; letter-spacing:-0.8px; position:relative; z-index:2; border-bottom: 3px solid var(--accent); padding-bottom:10px; display:inline-block; }
    h3{ font-size: 26px; margin: 14px 0 10px; color: #0b2a14; position:relative; z-index:2; }
    p, li{ font-size: 20px; line-height:1.6; color: var(--ink); position:relative; z-index:2; }
    
    .muted{ color: var(--muted); }
    code{ font-family: var(--mono); font-size: .92em; background: #f3f4f6; padding: 2px 6px; border-radius: 8px; border: 1px solid #e5e7eb; }
    pre { background: #1e293b; color: #e2e8f0; padding: 20px; border-radius: 12px; overflow-x: auto; font-family: var(--mono); font-size: 18px; position:relative; z-index:2; }

    /* Layout Utilities */
    .grid-2{ display:grid; grid-template-columns: 1.25fr 1fr; gap: 26px; align-items:start; position:relative; z-index:2; }
    .grid-3{ display:grid; grid-template-columns: repeat(3, 1fr); gap: 14px; align-items:start; position:relative; z-index:2; }
    
    /* Components */
    .card{ background: var(--soft2); border: 1px solid var(--soft); border-radius: 18px; padding: 18px; position:relative; z-index:2; }
    .card-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 18px; margin-top: 14px; position:relative; z-index:2; }

    .info-card{ background: #ffffff; border: 1px solid var(--soft); border-left: 6px solid var(--accent); border-radius: 16px; padding: 16px; transition: transform .15s ease, box-shadow .15s ease; cursor: default; }
    .info-card:hover{ transform: translateY(-2px); box-shadow: 0 10px 24px rgba(0,0,0,.10); }

    .pill{ display:inline-block; border:1px solid var(--soft); background: var(--soft2); border-radius: 999px; padding: 6px 14px; font-size: 14px; color: var(--muted); font-family: var(--mono); white-space:nowrap; }
    .callout{ border-left: 6px solid var(--accent); padding: 18px 22px; background: #f6fffa; border-radius: 16px; margin-top: 14px; position:relative; z-index:2; }
    
    /* Tables */
    table{ width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; border-radius: 18px; border: 1px solid var(--soft); margin-top: 14px; position:relative; z-index:2; background:#fff; }
    th, td{ padding: 14px 18px; text-align:left; border-bottom: 1px solid var(--soft); font-size: 18px; vertical-align:top; }
    th{ background:#0b2a14; color:#fff; font-weight:800; letter-spacing:.2px; }
    tr:last-child td{ border-bottom:none; }
    tr:nth-child(even) td{ background:#fbfdff; }

    /* Footer */
    .slide-footer{ position:absolute; left: 60px; right: 60px; bottom: 26px; display:flex; align-items:center; justify-content:space-between; color: var(--muted); font-size: 14px; z-index:2; }
    .slide-no{ font-family: var(--mono); background: var(--soft2); border: 1px solid var(--soft); padding: 6px 12px; border-radius: 999px; color: var(--muted); }

    /* Controls (Floating Buttons) */
    .controls{ position:fixed; right: 18px; bottom: 18px; z-index:10000; display:flex; gap: 10px; align-items:center; }
    .iconbtn{ width: 44px; height: 44px; border-radius: 999px; border: 1px solid rgba(255,255,255,.22); background: rgba(15,23,42,.45); color:#e5e7eb; display:grid; place-items:center; cursor:pointer; backdrop-filter: blur(10px); transition: transform .12s ease, background .12s ease; user-select:none; }
    .iconbtn:hover{ transform: translateY(-2px); background: rgba(15,23,42,.65); }
    .iconbtn:disabled{ opacity:.45; cursor:not-allowed; transform:none; }
    .iconbtn svg{ width: 20px; height: 20px; fill: none; stroke: currentColor; stroke-width: 2.4; stroke-linecap: round; stroke-linejoin: round; }

  </style>
</head>

<body>
  <div id="progress-container"><div id="progress-bar"></div></div>

  <div class="stage">
    <div class="deck-wrap" id="deckWrap">
      <div class="deck" id="deck">

        <section class="slide active">
          <div class="slide-top">
            <div class="meta">
              <div class="course">COIS 2020H</div>
              <div class="sub">Data Structures</div>
            </div>
            <span class="pill">Lecture 3</span>
          </div>
          
          <h1>Lists using Arrays</h1>
          <h2 style="margin-top:0; border:none; color:var(--muted);">Implementation, Operations, and Encapsulation</h2>
          
          <div class="card" style="margin-top: 22px;">
            <p style="margin:0;"><strong>Instructor:</strong> Ahmad Mousa<br /><span class="muted">Trent University - GTA</span></p>
            <div class="grid-3" style="margin-top:16px;">
                <div class="info-card"><div style="font-size:12px; font-weight:800; color:var(--muted);">FOCUS</div><div style="font-weight:900;">Array Logic</div></div>
                <div class="info-card"><div style="font-size:12px; font-weight:800; color:var(--muted);">TYPE</div><div style="font-weight:900;">Generics</div></div>
                <div class="info-card"><div style="font-size:12px; font-weight:800; color:var(--muted);">TECH</div><div style="font-weight:900;">C#</div></div>
            </div>
          </div>
          
          <div class="slide-footer"><div class="muted">Based on lecture notes by Brian Srivastava & Alaa Alslaity</div><div class="slide-no" data-slide-no></div></div>
        </section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">OOP Fundamentals</div>
      <div class="sub">Object Factory & Memory Storage</div>
    </div>
  </div>

  <div class="factory-layout">
    
    <div class="panel config-panel">
      <div class="panel-title">1. CONFIGURE OBJECT</div>
      
      <div class="control-group" id="step1">
        <label>1. Variable Name</label>
        <div class="input-wrapper">
          <span class="keyword">let</span>
          <input type="text" id="inp-name" placeholder="myCar1" autocomplete="off" oninput="updatePreview()">
          <span class="keyword">= new</span>
        </div>
      </div>

      <div class="control-group disabled" id="step2">
        <label>2. Base Class</label>
        <select id="sel-base" onchange="updatePreview()" disabled>
          <option value="" selected>-- Select Base --</option>
          <option value="Car">Car (Standard)</option>
        </select>
      </div>

      <div class="control-group disabled" id="step3">
        <label>3. Sub Class (Optional)</label>
        <select id="sel-sub" onchange="updatePreview()" disabled>
          <option value="" selected>-- None --</option>
          <option value="Sport">Sport (Turbo)</option>
          <option value="EV">EV (Electric)</option>
        </select>
      </div>

      <div class="btn-row">
        <button class="btn ghost" onclick="resetBuilder()">Reset</button>
        <button class="btn primary" id="btn-save" onclick="saveToMemory()" disabled>üíæ Save to Memory</button>
      </div>
    </div>

    <div class="panel preview-panel">
      <div class="panel-title">2. PREVIEW</div>
      
      <div id="preview-placeholder">
        <div style="font-size:30px; opacity:0.3; margin-bottom:10px;">üëÅÔ∏è</div>
        <span>Start typing to see preview...</span>
      </div>

      <div id="live-card" class="obj-card hidden">
        <div class="card-header">
          <span id="card-name">unnamed</span>
          <span class="badge" id="card-type">Pending</span>
        </div>
        <div class="card-methods" id="card-methods">
          </div>
      </div>
    </div>

    <div class="panel memory-panel">
      <div class="panel-title">3. MEMORY HEAP</div>
      
      <div id="memory-grid" class="grid-container">
        <div id="empty-mem" style="grid-column:1/-1; text-align:center; color:#94a3b8; font-size:11px; padding-top:40px;">
          Memory Empty
        </div>
      </div>

      <div class="mem-footer">
        <span id="mem-count">0</span> Objects Stored
      </div>
    </div>

  </div>

  <style>
    /* CSS VARIABLES */
    :root {
      --blue: #3b82f6; --slate: #64748b; --green: #22c55e;
      --border: #e2e8f0; --bg: #f8fafc;
    }

    .factory-layout {
      display: grid; grid-template-columns: 240px 220px 1fr; gap: 15px;
      height: 85%; margin-top: 15px;
    }

    .panel {
      background: white; border: 1px solid var(--border); border-radius: 10px;
      display: flex; flex-direction: column; overflow: hidden;
    }
    .panel-title {
      background: #f1f5f9; padding: 8px 12px; font-size: 10px; font-weight: 800;
      color: var(--slate); letter-spacing: 1px; border-bottom: 1px solid var(--border);
    }

    /* --- LEFT PANEL (Inputs) --- */
    .control-group { padding: 12px; border-bottom: 1px solid #f1f5f9; transition: 0.2s; }
    .control-group.disabled { opacity: 0.5; pointer-events: none; background: #fafafa; }
    
    label { display: block; font-size: 10px; font-weight: bold; color: var(--slate); margin-bottom: 5px; text-transform: uppercase; }
    
    .input-wrapper { display: flex; align-items: center; gap: 5px; background: var(--bg); padding: 5px; border-radius: 6px; border: 1px solid var(--border); }
    .keyword { font-family: monospace; font-size: 11px; color: var(--slate); }
    input { border: none; background: transparent; width: 100%; font-family: monospace; font-weight: bold; outline: none; font-size: 12px; }
    
    select { width: 100%; padding: 6px; border-radius: 4px; border: 1px solid var(--border); font-size: 11px; cursor: pointer; }

    .btn-row { margin-top: auto; padding: 12px; display: flex; gap: 8px; }
    .btn { flex: 1; padding: 8px; border-radius: 6px; font-size: 11px; font-weight: bold; cursor: pointer; border: none; transition: 0.1s; }
    .btn.ghost { background: transparent; border: 1px solid var(--border); color: var(--slate); }
    .btn.ghost:hover { background: #f1f5f9; }
    .btn.primary { background: var(--blue); color: white; }
    .btn.primary:hover { background: #2563eb; }
    .btn.primary:disabled { background: #cbd5e1; cursor: not-allowed; }

    /* --- CENTER PANEL (Preview) --- */
    .preview-panel { background: #f8fafc; align-items: center; justify-content: center; padding: 15px; }
    
    #preview-placeholder { text-align: center; color: var(--slate); font-size: 11px; }
    
    .obj-card {
      width: 100%; background: white; border: 1px solid var(--border); border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05); overflow: hidden;
      animation: popIn 0.3s ease-out;
    }
    .obj-card.hidden { display: none; }
    
    .card-header { padding: 10px; border-bottom: 1px solid #f1f5f9; display: flex; justify-content: space-between; align-items: center; }
    #card-name { font-weight: 800; font-size: 13px; color: #1e293b; font-family: monospace; }
    .badge { font-size: 9px; background: #e2e8f0; padding: 2px 6px; border-radius: 4px; color: var(--slate); }

    .card-methods { padding: 10px; display: flex; flex-direction: column; gap: 5px; }
    .pill { font-size: 10px; font-family: monospace; padding: 4px 8px; border-radius: 4px; border: 1px solid #e2e8f0; background: #f8fafc; color: var(--slate); }
    .pill.new { background: #f0fdf4; border-color: #bbf7d0; color: #15803d; }

    /* --- RIGHT PANEL (Memory) --- */
    .memory-panel { background: #1e293b; border: none; } /* Dark theme for memory */
    .memory-panel .panel-title { background: #0f172a; color: #94a3b8; border-bottom: 1px solid #334155; }
    
    .grid-container { padding: 15px; display: grid; grid-template-columns: repeat(auto-fill, minmax(70px, 1fr)); grid-auto-rows: 70px; gap: 10px; overflow-y: auto; height: 100%; }
    
    /* THE SAVED SQUARE */
    .mem-square {
      background: #334155; border-radius: 8px; border: 1px solid #475569;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      cursor: pointer; transition: 0.2s; position: relative;
    }
    .mem-square:hover { transform: translateY(-3px); background: #475569; border-color: var(--blue); }
    
    .sq-icon { font-size: 20px; margin-bottom: 4px; }
    .sq-name { font-size: 9px; color: white; font-family: monospace; max-width: 90%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .sq-type { font-size: 7px; color: #94a3b8; text-transform: uppercase; margin-top: 2px; }

    .mem-footer { background: #0f172a; color: #64748b; padding: 5px 10px; font-size: 9px; text-align: right; }

    @keyframes popIn { from { opacity: 0; transform: scale(0.9); } }
    @keyframes shrinkJump { 0%{ transform: scale(1); } 50%{ transform: scale(0.1) translate(200px, -100px); opacity: 0; } 100%{ opacity: 0; } }
  </style>

  <script>
    let state = { name: "", base: "", sub: "" };
    let memoryCount = 0;

    function updatePreview() {
      // 1. Get Values
      state.name = document.getElementById('inp-name').value.trim();
      state.base = document.getElementById('sel-base').value;
      state.sub = document.getElementById('sel-sub').value;

      // 2. Manage Logic/Steps
      const step2 = document.getElementById('step2');
      const step3 = document.getElementById('step3');
      const selBase = document.getElementById('sel-base');
      const selSub = document.getElementById('sel-sub');
      const btnSave = document.getElementById('btn-save');

      // Enable Step 2 if Name exists
      if (state.name) {
        step2.classList.remove('disabled');
        selBase.disabled = false;
      } else {
        step2.classList.add('disabled');
        selBase.disabled = true;
        selBase.value = "";
      }

      // Enable Step 3 if Base exists
      if (state.base) {
        step3.classList.remove('disabled');
        selSub.disabled = false;
        btnSave.disabled = false; // Can save now
      } else {
        step3.classList.add('disabled');
        selSub.disabled = true;
        selSub.value = "";
        btnSave.disabled = true;
      }

      // 3. Render Preview Card
      const ph = document.getElementById('preview-placeholder');
      const card = document.getElementById('live-card');

      if (!state.name) {
        ph.style.display = 'block';
        card.classList.add('hidden');
        return;
      }

      ph.style.display = 'none';
      card.classList.remove('hidden');
      
      document.getElementById('card-name').innerText = state.name;
      
      // Determine Type
      let typeText = state.base || "Pending";
      if (state.sub) typeText = state.sub;
      document.getElementById('card-type').innerText = typeText;

      // Render Methods
      let html = "";
      if (state.base === "Car") {
        html += `<div class="pill">drive()</div><div class="pill">stop()</div>`;
      }
      if (state.sub === "Sport") {
        html += `<div class="pill new">turbo()</div><div class="pill new">speed</div>`;
      } else if (state.sub === "EV") {
        html += `<div class="pill new">charge()</div><div class="pill new">selfDrive()</div>`;
      }
      document.getElementById('card-methods').innerHTML = html;
    }

    function saveToMemory() {
      const card = document.getElementById('live-card');
      const grid = document.getElementById('memory-grid');
      
      // Remove empty message
      const empty = document.getElementById('empty-mem');
      if(empty) empty.style.display = 'none';

      // 1. Determine Icon
      let icon = "üöô";
      if (state.sub === "Sport") icon = "üèéÔ∏è";
      if (state.sub === "EV") icon = "‚ö°";

      // 2. Create the Square
      const square = document.createElement('div');
      square.className = 'mem-square';
      square.title = `Instance: ${state.name}\nClass: ${state.sub || state.base}`;
      square.innerHTML = `
        <div class="sq-icon">${icon}</div>
        <div class="sq-name">${state.name}</div>
        <div class="sq-type">${state.sub || state.base}</div>
      `;
      square.onclick = function() { alert(`Fetching object from memory...\n\nVariable: ${this.querySelector('.sq-name').innerText}`); };

      // 3. Animation Effect
      // We clone the card, shrink it, and then append the square
      card.style.animation = "shrinkJump 0.4s forwards";
      
      setTimeout(() => {
        grid.appendChild(square);
        memoryCount++;
        document.getElementById('mem-count').innerText = memoryCount;
        
        // Reset Builder
        resetBuilder();
        card.style.animation = "popIn 0.3s ease-out"; // Reset animation for next time
      }, 300);
    }

    function resetBuilder() {
      document.getElementById('inp-name').value = "";
      document.getElementById('sel-base').value = "";
      document.getElementById('sel-sub').value = "";
      updatePreview();
    }
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">COIS 2020H</div>
      <div class="sub">Data Semantics</div>
    </div>
    <span class="pill">Context Engine</span>
  </div>

  <h2>From Objects to Arrays</h2>
  <p><strong>Context is everything.</strong> The order you place data in memory changes the "story" the computer tells.</p>

  <div class="visual-container">
    
    <div class="mem-column">
        <div class="zone-label">1. THE HEAP (Unordered Objects)</div>
        <div id="heap-zone" class="heap-zone">
          <div class="obj-token" draggable="true" id="user" data-type="User" style="border-color:#10b981;">
            <span class="icon">üë§</span> <span class="label">User</span>
          </div>
          <div class="obj-token" draggable="true" id="box" data-type="Box" style="border-color:#f59e0b;">
            <span class="icon">üì¶</span> <span class="label">Box</span>
          </div>
          <div class="obj-token" draggable="true" id="car" data-type="Car" style="border-color:#3b82f6;">
            <span class="icon">üöó</span> <span class="label">Car</span>
          </div>
          <div class="obj-token" draggable="true" id="apple" data-type="Apple" style="border-color:#ef4444;">
            <span class="icon">üçé</span> <span class="label">Apple</span>
          </div>
        </div>

        <div class="bus-lines">
          <div class="line"></div><div class="line"></div><div class="line"></div>
        </div>

        <div class="zone-label">2. THE ARRAY (Contiguous Memory)</div>
        <div class="memory-strip" id="array-strip">
          <div class="mem-slot" data-index="0" ondrop="drop(event)" ondragover="allowDrop(event)">
            <div class="addr">0x00</div> <div class="slot-content"></div> <div class="idx-label">[0]</div>
          </div>
          <div class="mem-slot" data-index="1" ondrop="event.preventDefault()" ondragover="allowDrop(event)">
            <div class="addr">0x04</div> <div class="slot-content"></div> <div class="idx-label">[1]</div>
          </div>
          <div class="mem-slot" data-index="2" ondrop="event.preventDefault()" ondragover="allowDrop(event)">
            <div class="addr">0x08</div> <div class="slot-content"></div> <div class="idx-label">[2]</div>
          </div>
          <div class="mem-slot" data-index="3" ondrop="event.preventDefault()" ondragover="allowDrop(event)">
            <div class="addr">0x0C</div> <div class="slot-content"></div> <div class="idx-label">[3]</div>
          </div>
        </div>
    </div>

    <div class="decoder-panel">
        <div class="task-header">PROGRAM COMPILER</div>
        <div class="seq-box">
            <div class="seq-dot" id="dot-0"></div><div class="seq-dot" id="dot-1"></div>
            <div class="seq-dot" id="dot-2"></div><div class="seq-dot" id="dot-3"></div>
        </div>
        <div class="story-screen" id="story-display">
            <div class="blink">_Waiting for input stream...</div>
        </div>
        <button class="reset-btn" id="reset-button" onclick="resetSim()">
            ‚Ü∫ RESET MEMORY
        </button>
        <div style="margin-top:auto; font-size:10px; color:#94a3b8; text-align:center;">
            Different permutations = Different Programs
        </div>
    </div>
  </div>

  <style>
    /* ... existing styles ... */
    .visual-container { margin-top: 15px; height: 65%; display: flex; gap: 20px; }
    .mem-column { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; gap: 5px; }
    .zone-label { font-size: 11px; font-weight: 800; color: #64748b; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px; }
    .heap-zone, .memory-strip { height: 120px; background: #f8fafc; border: 2px dashed #cbd5e1; border-radius: 12px; display: flex; align-items: center; justify-content: center; gap: 15px; }
    .memory-strip { background: #1e293b; border-color: #334155; border-style: solid; padding: 10px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
    .obj-token { width: 55px; height: 55px; background: white; border: 2px solid; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: grab; box-shadow: 0 4px 10px rgba(0,0,0,0.1); user-select: none; z-index: 10; transition: transform 0.2s, opacity 0.3s; }
    .obj-token .icon { font-size: 20px; }
    .obj-token .label { font-size: 8px; font-weight: bold; font-family: monospace; color: #475569; }
    .bus-lines { height: 30px; display: flex; justify-content: space-around; padding: 0 20%; opacity: 0.3; }
    .line { width: 2px; height: 100%; background: #cbd5e1; }
    .mem-slot { background: #0f172a; border: 2px dashed #334155; border-radius: 8px; position: relative; overflow: hidden; display: flex; flex-direction: column; height: 100%; transition: all 0.2s; }
    .mem-slot.drag-over { border-color: #3b82f6; background: #172554; }
    .mem-slot.filled { border-color: #22c55e; border-style: solid; background: #064e3b; }
    .addr { font-family: monospace; font-size: 9px; color: #475569; padding: 4px; text-align: right; }
    .idx-label { background: #1e293b; color: #94a3b8; font-family: monospace; font-size: 11px; text-align: center; padding: 4px 0; border-top: 1px solid #334155; margin-top: auto; }
    .slot-content { flex-grow: 1; width: 100%; display: flex; align-items: center; justify-content: center; pointer-events: none; }
    .slot-content .obj-token { width: 45px; height: 45px; border-width: 0; box-shadow: none; animation: dropIn 0.3s; opacity: 1 !important; }
    .decoder-panel { width: 260px; background: #fff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
    .task-header { font-size: 11px; font-weight: 800; color: #94a3b8; letter-spacing: 1px; border-bottom:1px solid #f1f5f9; padding-bottom:5px; }
    .seq-box { display: flex; gap: 8px; justify-content: center; }
    .seq-dot { width: 10px; height: 10px; border-radius: 50%; background: #e2e8f0; transition: background 0.3s; }
    .seq-dot.active { background: #3b82f6; }
    .story-screen { background: #0f172a; color: #cbd5e1; font-family: monospace; font-size: 11px; padding: 15px; border-radius: 8px; flex-grow: 1; border: 1px solid #334155; line-height: 1.5; overflow-y:auto; display:flex; flex-direction:column; justify-content:center; }
    .story-title { font-weight:800; color:#22c55e; margin-bottom:6px; font-size:12px; text-transform:uppercase; border-bottom:1px solid #334155; padding-bottom:4px; }
    .reset-btn { background: white; border: 1px solid #ef4444; color: #ef4444; padding: 10px; border-radius: 6px; font-size: 11px; font-weight: bold; cursor: pointer; visibility:hidden; transition: all 0.2s; }
    .reset-btn:hover { background: #ef4444; color: white; }
    .blink { animation: blinker 1s linear infinite; }
    @keyframes dropIn { from { transform: scale(1.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    @keyframes blinker { 50% { opacity: 0; } }
  </style>

  <script>
    let filledCount = 0;
    const arrayData = [null, null, null, null];

    // Initialize Draggables
    function initDraggables() {
        document.querySelectorAll('.obj-token').forEach(t => {
            t.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('id', e.target.id);
                e.dataTransfer.setData('type', e.target.getAttribute('data-type'));
            });
        });
    }
    initDraggables();

    function allowDrop(e) {
        e.preventDefault();
        const slot = e.target.closest('.mem-slot');
        if(slot && !slot.classList.contains('filled')) slot.classList.add('drag-over');
    }

    document.querySelectorAll('.mem-slot').forEach(slot => {
        slot.addEventListener('dragleave', (e) => {
            const slot = e.target.closest('.mem-slot');
            slot.classList.remove('drag-over');
        });
        // Added drop listener here for cleaner event delegation
        slot.addEventListener('drop', drop);
    });

    function drop(e) {
        e.preventDefault();
        const slot = e.target.closest('.mem-slot');
        slot.classList.remove('drag-over');
        if(slot.classList.contains('filled')) return;

        const id = e.dataTransfer.getData('id');
        const type = e.dataTransfer.getData('type');
        const index = parseInt(slot.getAttribute('data-index'));

        // 1. Move Token
        const originalObj = document.getElementById(id);
        const clone = originalObj.cloneNode(true);
        clone.removeAttribute('id'); 
        clone.draggable = false;
        
        slot.querySelector('.slot-content').appendChild(clone);
        slot.classList.add('filled');
        
        // Hide the original in the heap
        originalObj.style.opacity = '0'; 
        originalObj.style.pointerEvents = 'none';

        // 2. Record Data
        arrayData[index] = type;
        filledCount++;
        document.getElementById(`dot-${filledCount-1}`).classList.add('active');

        // 3. Completion
        if(filledCount === 4) {
            document.getElementById('story-display').innerHTML = '<div class="blink">Compiling Logic...</div>';
            setTimeout(revealUniqueStory, 500);
            document.getElementById('reset-button').style.visibility = 'visible';
        }
    }

    function revealUniqueStory() {
        const screen = document.getElementById('story-display');
        const key = arrayData.join('-'); 
        const stories = {
            "Apple-Box-User-Car": "A human finds an apple in a box and drives away.",
            "Apple-Box-Car-User": "A boxed apple is loaded into a car for a human.",
            "Apple-User-Box-Car": "A human eats an apple, boxes it, and drives off.",
            "Apple-User-Car-Box": "A human takes an apple into a car, leaving the box.",
            "Apple-Car-Box-User": "An apple rolls in a car into a box, finding a human.",
            "Apple-Car-User-Box": "A human finds an apple in a car and boxes it.",
            "Box-Apple-User-Car": "A box reveals an apple, eaten by a human driver.",
            "Box-Apple-Car-User": "An apple from a box is driven to a human.",
            "Box-User-Apple-Car": "A human takes an apple from a box and drives.",
            "Box-User-Car-Apple": "A human puts a box in a car, unaware of the apple.",
            "Box-Car-Apple-User": "A box travels by car, delivering an apple.",
            "Box-Car-User-Apple": "A car brings a box to a human who finds an apple.",
            "User-Apple-Box-Car": "A human boxes an apple and drives away.",
            "User-Apple-Car-Box": "A human eats an apple in a car, discarding the box.",
            "User-Box-Apple-Car": "A human finds an apple in a box and drives off.",
            "User-Box-Car-Apple": "A human puts a box in a car with an apple inside.",
            "User-Car-Apple-Box": "A human buys an apple while driving and boxes it.",
            "User-Car-Box-Apple": "A human drives, unloads a box, and finds an apple.",
            "Car-Apple-Box-User": "A car delivers a boxed apple to a human.",
            "Car-Apple-User-Box": "A car brings an apple to a human who boxes the core.",
            "Car-Box-Apple-User": "A box falls from a car, showing an apple to a human.",
            "Car-Box-User-Apple": "A car drops a box, a human finds the apple.",
            "Car-User-Apple-Box": "A driver buys an apple and puts it in a box.",
            "Car-User-Box-Apple": "A driver takes a human to a box with an apple."
        };

        const desc = stories[key] || "Unknown sequence.";
        let title = key.replace(/-/g, ' &rarr; ');
        let color = "#3b82f6";

        screen.innerHTML = `<div class="story-title" style="color:${color}">${title}</div>${desc}`;
        screen.style.borderColor = color;
    }

    function resetSim() {
        // 1. Reset counters and data
        filledCount = 0;
        for(let i=0; i<4; i++) arrayData[i] = null;
        
        // 2. Clean the Array Slots
        document.querySelectorAll('.mem-slot').forEach(slot => {
            slot.classList.remove('filled');
            slot.classList.remove('drag-over');
            const content = slot.querySelector('.slot-content');
            if (content) content.innerHTML = ''; 
        });

        // 3. Restore the Heap Tokens (Bring back the originals)
        document.querySelectorAll('#heap-zone .obj-token').forEach(token => {
            token.style.opacity = '1'; 
            token.style.pointerEvents = 'all';
        });

        // 4. Reset the Decoder Panel UI
        document.querySelectorAll('.seq-dot').forEach(dot => dot.classList.remove('active'));
        
        const screen = document.getElementById('story-display');
        screen.innerHTML = '<div class="blink">_Waiting for input stream...</div>';
        screen.style.borderColor = "#334155";
        
        // 5. Hide the reset button
        document.getElementById('reset-button').style.visibility = 'hidden';
    }
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Foundations</div>
      <div class="sub">Concept</div>
    </div>
    <span class="pill">Architecture</span>
  </div>
  
  <h2>Implementation Vs. Theory</h2>
  
  <p>It is important to understand the distinction between a logical data structure and its underlying implementation.</p>
  
  <div class="grid-2">
    <div class="card">
      <h3>Implementation</h3>
      <p class="muted" style="font-size:16px; margin-bottom:10px;">HARDWARE / STORAGE</p>
      <p>The physical storage mechanism. For example, an <strong>Array</strong> is an underlying implementation.</p>
    </div>
    
    <div class="card" style="border-left: 6px solid var(--accent);">
      <h3>Logic</h3>
      <p class="muted" style="font-size:16px; margin-bottom:10px;">SOFTWARE / DECISIONS</p>
      <p>The logic you use to decide <em>where</em> things go in the array makes the data structure.</p>
    </div>
  </div>

  <div style="margin-top:24px;">
    <p><strong>Example:</strong> Logic determines the type.</p>
    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
      <div style="background:var(--soft2); padding:16px; border-radius:12px; border:1px solid var(--soft);">
         <span style="font-size:24px; margin-right:10px;">üî¢</span> 
         Put things in order &rarr; <strong>Sorted List</strong>.
      </div>
      <div style="background:var(--soft2); padding:16px; border-radius:12px; border:1px solid var(--soft);">
         <span style="font-size:24px; margin-right:10px;">üé≤</span> 
         Put things in randomly &rarr; <strong>List</strong>.
      </div>
    </div>
  </div>

  <div class="slide-footer">
    <div class="muted">Understand... Decide... Implement</div>
    <div class="slide-no" data-slide-no></div>
  </div>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Definitions</div>
      <div class="sub">Data Types</div>
    </div>
    <span class="pill">Interactive Concept</span>
  </div>
  
  <h2>What is a List?</h2>

  <div class="grid-2" style="grid-template-columns: 1fr 1.1fr; gap:30px; height:65%;">
      
      <div style="display:flex; flex-direction:column; justify-content:center;">
          <p>A list is a <strong>collection of objects</strong>. It is the foundation for all data structures in this course.</p>
          
          <div class="callout" id="status-panel" style="transition:all 0.3s; border-left: 4px solid #10b981; background: #f8fafc; padding: 15px; border-radius: 4px;">
            <strong id="status-title" style="color:#064e3b;">System Status: NOMINAL</strong>
            <p id="status-text" style="font-size:16px; margin:5px 0 0; color:#334155;">
                List defined as <code>List&lt;Grocery&gt;</code>.<br>
                Awaiting objects...
            </p>
          </div>

          <div style="margin-top:20px; font-size:14px; color:#64748b;">
            <strong>Instructions:</strong> Click the buttons on the right to add objects.
          </div>
      </div>
      
      <div class="card" style="background:#1e293b; padding:0; overflow:hidden; display:flex; flex-direction:column; border:1px solid #334155; border-radius: 8px;">
          
          <div style="background:#0f172a; padding:10px 15px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <span style="font-family:'Courier New', monospace; font-size:12px; color:#94a3b8;">myShoppingList.cs</span>
              <button onclick="clearList()" style="background:transparent; border:1px solid #475569; color:#94a3b8; border-radius:4px; font-size:10px; cursor:pointer; padding:2px 6px;">CLEAR</button>
          </div>

          <div id="code-display" style="flex-grow:1; padding:20px; font-family:'Courier New', monospace; color:#e2e8f0; font-size:16px; overflow-y:auto;">
              <span style="color:#c084fc;">List</span>&lt;<span style="color:#22c55e;">Grocery</span>&gt; items = <span style="color:#c084fc;">new</span>();<br><br>
              <div id="list-items"></div>
              <span class="cursor">_</span>
          </div>

          <div style="background:#334155; padding:15px; display:grid; grid-template-columns: repeat(2, 1fr); gap:10px;">
              <button class="add-btn valid" onclick="addGrocery('Milk')">Add "Milk"</button>
              <button class="add-btn valid" onclick="addGrocery('Bread')">Add "Bread"</button>
              <button class="add-btn valid" onclick="addGrocery('Cheese')">Add "Cheese"</button>
              <button class="add-btn invalid" onclick="addError()" style="border-color:#ef4444; color:#fecaca; background:rgba(239, 68, 68, 0.2);">Add "New House"</button>
          </div>

      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Type Safety prevents "Crashes" in runtime</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .cursor { display:inline-block; width:8px; height:18px; background:#22c55e; animation: blink 1s infinite; vertical-align:middle; }
    
    .add-btn {
        background: #475569; border: 1px solid #64748b; color: #fff; padding: 10px;
        border-radius: 6px; cursor: pointer; font-family: 'Courier New', monospace; font-size: 12px;
        transition: all 0.1s;
    }
    .add-btn:hover { background: #64748b; transform:translateY(-2px); }
    .add-btn:active { transform:translateY(0); }

    .code-line { display:block; margin-bottom:5px; animation: slideInRight 0.2s ease; }
    
    .shake-it { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
    
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
    @keyframes slideInRight { from { opacity:0; transform:translateX(-10px); } to { opacity:1; transform:translateX(0); } }
    @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
  </style>

  <script>
    // 1. CLEAR LIST FUNCTION
    function clearList() {
        document.getElementById('list-items').innerHTML = '';
        resetVisuals();
    }

    // 2. ADD GROCERY FUNCTION (Milk, Bread, etc.)
    function addGrocery(name) {
        const container = document.getElementById('list-items');
        
        // Step A: Add the item immediately (Code View)
        const div = document.createElement('div');
        div.className = 'code-line';
        div.innerHTML = `items.Add(<span style="color:#f59e0b;">"${name}"</span>); <span style="color:#64748b;">// OK</span>`;
        container.appendChild(div);

        // Step B: Reset status panel to green (Nominal)
        resetVisuals();

        // Step C: Scroll down
        const box = document.getElementById('code-display');
        box.scrollTop = box.scrollHeight;
    }

    // 3. ADD ERROR FUNCTION (New House)
    function addError() {
        const container = document.getElementById('list-items');
        
        // Step A: Add the error line
        const div = document.createElement('div');
        div.className = 'code-line';
        div.innerHTML = `items.Add(<span style="color:#ef4444; font-weight:bold;">new House()</span>); <span style="color:#ef4444; font-weight:bold;">// ERROR!</span>`;
        container.appendChild(div);

        // Step B: Visual Chaos (Shake)
        const card = document.getElementById('code-display').parentElement;
        card.classList.add('shake-it');
        setTimeout(() => card.classList.remove('shake-it'), 500);

        // Step C: Update Status to Red
        const p = document.getElementById('status-panel');
        document.getElementById('status-title').innerHTML = "COMPILER ERROR";
        document.getElementById('status-title').style.color = "#b91c1c";
        document.getElementById('status-text').innerHTML = "Cannot convert <code>'House'</code> to <code>'Grocery'</code>.";
        document.getElementById('status-text').style.color = "#7f1d1d";
        
        p.style.background = "#fee2e2";
        p.style.borderLeftColor = "#ef4444";

        // Step D: Scroll
        const box = document.getElementById('code-display');
        box.scrollTop = box.scrollHeight;
    }

    // 4. HELPER: Reset Status Panel to Green
    function resetVisuals() {
        const p = document.getElementById('status-panel');
        if (!p) return;

        p.style.background = "#f8fafc";
        p.style.borderLeftColor = "#10b981";

        const t1 = document.getElementById('status-title');
        if (t1) {
            t1.innerText = "System Status: NOMINAL";
            t1.style.color = "#064e3b";
        }

        const t2 = document.getElementById('status-text');
        if (t2) {
            t2.innerHTML = "List defined as <code>List&lt;Grocery&gt;</code>.<br>Awaiting objects...";
            t2.style.color = "#334155";
        }
    }
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Variations</div>
      <div class="sub">Properties</div>
    </div>
    <span class="pill">Interactive Taxonomy</span>
  </div>
  
  <h2>Lists can be...</h2>
  <p>Lists come in various configurations depending on requirements. <strong>Click options to visualize.</strong></p>
  
  <div class="dashboard-grid">
      
      <div class="control-panel">
          <h3>1. Ordering</h3>
          <div class="option-group">
              <div class="option-btn active" onclick="window.updateListMode('order', 'ordered', this)">
                  <div class="radio"></div>
                  <strong>Ordered List</strong>
              </div>
              <div class="option-btn" onclick="window.updateListMode('order', 'unordered', this)">
                  <div class="radio"></div>
                  <strong>Unordered List</strong>
              </div>
          </div>
      </div>

      <div class="control-panel">
          <h3>2. Sizing</h3>
          <div class="option-group">
              <div class="option-btn active" onclick="window.updateListMode('size', 'fixed', this)">
                  <div class="radio"></div>
                  <div><strong>Fixed Size</strong> <span class="sub-text">(Static)</span></div>
              </div>
              <div class="option-btn" onclick="window.updateListMode('size', 'dynamic', this)">
                  <div class="radio"></div>
                  <div><strong>Dynamic Size</strong> <span class="sub-text">(Growable)</span></div>
              </div>
          </div>
      </div>

      <div class="control-panel">
          <h3>3. Complexity</h3>
          <div class="option-group">
              <div class="option-btn active" onclick="window.updateListMode('complex', 'meta', this)">
                  <div class="radio"></div>
                  <div><strong>Metadata</strong> <span class="sub-text block">(Rich Objects)</span></div>
              </div>
              <div class="option-btn" onclick="window.updateListMode('complex', 'nested', this)">
                  <div class="radio"></div>
                  <div><strong>Nested Lists</strong> <span class="sub-text block">(2D Arrays)</span></div>
              </div>
          </div>
      </div>

  </div>

  <div class="vis-container">
      <div class="vis-header">
        <span>LIVE PREVIEW</span>
        <div class="capacity-indicator" id="cap-indicator">Capacity: FIXED (4 slots)</div>
      </div>
      
      <div id="vis-stage" class="vis-stage ordered fixed meta">
          </div>

      <div id="vis-desc" class="vis-desc">
          Visualizing: Ordered Array of Photos with Metadata
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Structure follows function</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    /* LAYOUT */
    .dashboard-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 10px; }

    .control-panel {
        background: #f8fafc; border: 1px solid #cbd5e1; border-radius: 10px; padding: 10px;
        display: flex; flex-direction: column; gap: 8px; transition:all 0.2s;
    }
    .control-panel:hover { border-color:#3b82f6; box-shadow:0 4px 12px rgba(0,0,0,0.05); }
    
    h3 { font-size: 13px; margin: 0 0 5px; color: #64748b; text-transform: uppercase; border-bottom: 2px solid #e2e8f0; padding-bottom: 5px; }
    
    .option-btn {
        display: flex; align-items: flex-start; gap: 8px; padding: 6px; border-radius: 6px;
        cursor: pointer; transition: all 0.2s; border: 1px solid transparent; font-size: 13px;
    }
    .option-btn:hover { background: #e2e8f0; }
    .option-btn.active { background: #fff; border-color: #3b82f6; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .option-btn.active .radio { border-color: #3b82f6; background: #3b82f6; box-shadow: inset 0 0 0 3px white; }

    .radio { width: 14px; height: 14px; border-radius: 50%; border: 2px solid #94a3b8; background: transparent; margin-top: 2px; flex-shrink: 0; transition: all 0.2s; }
    .sub-text { font-size: 11px; color: #94a3b8; font-family: monospace; }
    .sub-text.block { display: block; }

    /* VISUALIZER CONTAINER */
    .vis-container {
        margin-top: 15px; background: #0f172a; border-radius: 12px; border: 1px solid #334155;
        height: 380px; display: flex; flex-direction: column; overflow: hidden; position: relative;
    }
    
    .vis-header {
        background: #1e293b; color: #94a3b8; font-size: 10px; font-weight: bold; letter-spacing: 1px;
        padding: 8px 15px; border-bottom: 1px solid #334155; display:flex; justify-content:space-between;
    }
    .capacity-indicator { font-family: monospace; color: #e2e8f0; }

    /* THE STAGE */
    .vis-stage {
        flex-grow: 1; padding: 20px; display: flex; align-items: center; gap: 15px; 
        transition: all 0.3s;
        scrollbar-width: thin; scrollbar-color: #475569 #1e293b;
    }
    
    /* MODES */
    .vis-stage.ordered { 
        justify-content: flex-start; overflow-x: auto; overflow-y: hidden; white-space: nowrap;
    }
    .vis-stage.unordered { 
        justify-content: center; flex-wrap: wrap; align-content: center; overflow-y: auto;
    }
    
    .vis-stage.fixed { border-right: 5px solid #ef4444; } 
    .vis-stage.dynamic { border-right: 5px dashed #22c55e; } 

    /* ITEMS */
    .v-item {
        background: white; border-radius: 8px; padding: 10px; 
        box-shadow: 0 4px 10px rgba(0,0,0,0.3); animation: popIn 0.3s ease; border: 2px solid #cbd5e1;
        flex-shrink: 0; position: relative; transition: transform 0.3s;
    }
    
    .ordered .v-item { width: 160px; height: 100px; display:flex; flex-direction:column; justify-content:center; }
    .unordered .v-item { width: 100px; height: 100px; transform: rotate(var(--rot)); display:flex; flex-direction:column; justify-content:center; }
    .unordered .v-item:hover { transform: scale(1.1) rotate(0deg); z-index:10; }

    .idx-badge { 
        position: absolute; top: -8px; left: -8px; background: #3b82f6; color: white; 
        font-family: monospace; font-size: 10px; padding: 2px 6px; border-radius: 4px; 
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .meta-content { display:flex; flex-direction:column; gap:6px; }
    .meta-row { display:flex; justify-content:space-between; align-items:center; font-size:11px; font-weight:bold; color:#334155; }
    .tag { background:#fef3c7; color:#d97706; padding:2px 5px; border-radius:3px; font-size:9px; }

    .nested-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 3px; margin-top: 5px; background:#eff6ff; padding:5px; border-radius:4px; border:1px dashed #93c5fd; }
    .n-dot { width: 8px; height: 8px; background: #3b82f6; border-radius: 50%; margin:auto; }

    .vis-desc { background: rgba(15, 23, 42, 0.95); color: #22c55e; padding: 10px; font-family: monospace; font-size: 12px; text-align: center; border-top: 1px solid #334155; }

    @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  </style>

  <script>
    // 1. Setup Global State
    window.visConfig = {
        order: 'ordered',
        size: 'fixed',
        complex: 'meta'
    };

    // 2. Define Function to Update Mode
    window.updateListMode = function(category, value, element) {
        // Update State
        window.visConfig[category] = value;

        // Update Button Visuals
        const group = element.closest('.option-group');
        const buttons = group.querySelectorAll('.option-btn');
        
        // Remove active class from all in this group
        for(let i=0; i<buttons.length; i++) {
            buttons[i].classList.remove('active');
        }
        // Add active class to clicked
        element.classList.add('active');

        // Re-render
        window.drawVisualization();
    };

    // 3. Define Main Render Function
    window.drawVisualization = function() {
        const stage = document.getElementById('vis-stage');
        const desc = document.getElementById('vis-desc');
        const indicator = document.getElementById('cap-indicator');
        
        if(!stage) return; 

        // Apply Classes to Stage
        stage.className = 'vis-stage ' + window.visConfig.order + ' ' + window.visConfig.size + ' ' + window.visConfig.complex;

        // Determine capacity text
        if (window.visConfig.size === 'fixed') {
            indicator.innerText = "Capacity: FIXED (Max 4)";
            indicator.style.color = '#f87171';
        } else {
            indicator.innerText = "Capacity: DYNAMIC (Growable)";
            indicator.style.color = '#4ade80';
        }

        // Generate Items HTML
        let html = '';
        const count = window.visConfig.size === 'fixed' ? 4 : 8; 

        for(let i=0; i<count; i++) {
            let content = '';
            
            // Build Content based on Complexity
            if(window.visConfig.complex === 'meta') {
                content = 
                '<div class="meta-content">' +
                    '<div class="meta-row">' +
                        '<span>User_'+ (i+10) +'</span>' +
                        '<span class="tag">ID:'+i+'</span>' +
                    '</div>' +
                    '<div style="height:4px; background:#e2e8f0; width:100%; border-radius:2px;">' +
                        '<div style="height:100%; background:#3b82f6; width:'+ (Math.random()*100) +'%;"></div>' +
                    '</div>' +
                    '<div style="font-size:9px; color:#64748b;">Active Session</div>' +
                '</div>';
            } else {
                content = 
                '<div class="meta-content">' +
                    '<div style="font-size:10px; font-weight:bold; color:#1e293b;">SubList ['+i+']</div>' +
                    '<div class="nested-grid">' +
                        '<div class="n-dot"></div><div class="n-dot"></div><div class="n-dot"></div>' +
                        '<div class="n-dot"></div><div class="n-dot"></div><div class="n-dot"></div>' +
                    '</div>' +
                '</div>';
            }

            // Build Style based on Order
            let style = '';
            let idxHTML = '';
            
            if (window.visConfig.order === 'unordered') {
                const rot = (Math.random() * 16) - 8;
                style = 'transform: rotate('+ rot +'deg);';
            } else {
                idxHTML = '<div class="idx-badge">Index '+i+'</div>';
            }

            html += '<div class="v-item" style="'+style+'">' + idxHTML + content + '</div>';
        }

        stage.innerHTML = html;
        
        // Update Description text
        desc.innerText = "> Visualizing: " + window.visConfig.order + " " + window.visConfig.size + " list with " + window.visConfig.complex;
    };

    // 4. Run once on load
    setTimeout(function() {
        window.drawVisualization();
    }, 100);
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Software Design</div>
      <div class="sub">Strategy</div>
    </div>
    <span class="pill">Goals</span>
  </div>
  
  <h2>Our Goal</h2>
  
  <div class="grid-2">
      <div>
          <p>When designing software, the first step is to figure out <strong>what the list is supposed to do</strong>.</p>
          <p>Once you know the purpose, you can build the right kind of list to support it.</p>
      </div>
      
      <div class="card">
          <h3>Decision Factors</h3>
          <p>Based on the goal, decide the type:</p>
          <ul>
              <li>Ordered vs. Fixed Size?</li>
              <li>Unordered List of Lists?</li>
              <li>Singly vs. Doubly Linked?</li>
          </ul>
      </div>
  </div>

  <div class="callout" style="text-align:center; margin-top:40px;">
    Purpose &rarr; Design &rarr; Implementation
  </div>
  
  <div class="slide-footer">
    <div class="muted">Design before coding</div>
    <div class="slide-no" data-slide-no></div>
  </div>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Functionality</div>
      <div class="sub">Methods</div>
    </div>
    <span class="pill">Interactive API v2.0</span>
  </div>
  
  <h2>Key List Operations</h2>
  <p>Control the list below. <strong>Merge</strong> and <strong>Traverse</strong> now have enhanced visualization.</p>
  
  <div style="display:flex; flex-direction:column; gap:15px; height:68%; margin-top:10px;">
      
      <div class="api-stage">
          <div class="stage-header">
              <span>MEMORY VISUALIZER</span>
              <span id="cap-indicator">Capacity: 5</span>
          </div>
          
          <div id="api-list-container" class="list-track">
              </div>

          <div id="merge-stage" class="merge-zone">
              <span style="font-size:10px; color:#94a3b8; margin-right:10px;">INCOMING DATA:</span>
              <div class="data-node ghost">99</div>
              <div class="data-node ghost">88</div>
          </div>

          <div id="api-console" class="console-log">
              <span style="opacity:0.5;">> System ready. Waiting for command...</span>
          </div>
      </div>

      <div class="control-deck">
          
          <div class="ctrl-group">
              <div class="grp-label">LIFECYCLE</div>
              <div class="btn-grid">
                  <button class="cmd-btn" onclick="apiAction('create')">Create</button>
                  <button class="cmd-btn" onclick="apiAction('grow')">Grow</button>
                  <button class="cmd-btn danger" onclick="apiAction('deleteAll')">Clear</button>
              </div>
          </div>

          <div class="ctrl-group">
              <div class="grp-label">MODIFICATION</div>
              <div class="btn-grid">
                  <button class="cmd-btn" onclick="apiAction('add')">Add</button>
                  <button class="cmd-btn" onclick="apiAction('insert')">Insert</button>
                  <button class="cmd-btn" onclick="apiAction('delete')">Delete</button>
                  <button class="cmd-btn action-purple" onclick="apiAction('merge')">Merge List</button>
              </div>
          </div>

          <div class="ctrl-group">
              <div class="grp-label">PROCESSING</div>
              <div class="btn-grid">
                  <button class="cmd-btn action" onclick="apiAction('search')">Search</button>
                  <button class="cmd-btn action" onclick="apiAction('sort')">Sort</button>
                  <button class="cmd-btn action-green" onclick="apiAction('traverse')">Traverse</button>
                  <button class="cmd-btn action" onclick="apiAction('random')">Shuffle</button>
              </div>
          </div>

      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Operations dictate the structure's efficiency</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    /* Stage & Track */
    .api-stage {
        flex-grow: 1; background: #1e293b; border-radius: 12px; border: 1px solid #334155;
        display: flex; flex-direction: column; overflow: hidden; position: relative;
    }
    .stage-header {
        background: #0f172a; color: #94a3b8; font-size: 10px; font-weight: bold; letter-spacing: 1px;
        padding: 6px 12px; border-bottom: 1px solid #334155; display:flex; justify-content:space-between;
    }
    
    .list-track {
        flex-grow: 1; padding: 20px; display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap;
        background-image: radial-gradient(#334155 1px, transparent 1px); background-size: 20px 20px; position:relative; z-index:2;
    }

    /* Merge Zone */
    .merge-zone {
        position: absolute; right: -200px; top: 40px; background: #334155; padding: 5px 10px; border-radius: 8px;
        display: flex; align-items: center; gap: 5px; transition: right 0.5s ease; z-index: 10;
        box-shadow: 0 4px 15px rgba(0,0,0,0.3); border: 1px solid #475569; opacity:0;
    }
    .merge-zone.active { right: 20px; opacity:1; }

    .console-log {
        background: #0f172a; color: #22c55e; font-family: var(--mono); font-size: 12px; padding: 8px 15px;
        border-top: 1px solid #334155; min-height: 34px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    }

    /* List Items */
    .data-node {
        width: 60px; height: 60px; background: white; border-radius: 8px; border: 2px solid #cbd5e1;
        display: flex; align-items: center; justify-content: center; font-weight: bold; font-family: var(--mono);
        box-shadow: 0 4px 10px rgba(0,0,0,0.2); animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative; transition: all 0.3s;
    }
    .data-node.highlight { border-color: #f59e0b; background: #fef3c7; transform: scale(1.1); box-shadow: 0 0 15px #f59e0b; }
    .data-node.found { border-color: #22c55e; background: #dcfce7; }
    
    /* Processing State (Traverse) */
    .data-node.processed { border-color: #8b5cf6; background: #ddd6fe; color: #5b21b6; transform: translateY(-5px); box-shadow: 0 10px 15px rgba(139, 92, 246, 0.3); }

    /* Ghost Nodes (Merge) */
    .data-node.ghost { width: 40px; height: 40px; font-size: 12px; background: #e2e8f0; color: #475569; border-style: dashed; }

    .node-idx { position: absolute; top: -8px; left: 50%; transform: translateX(-50%); background: #475569; color: white; font-size: 9px; padding: 1px 4px; border-radius: 4px; }

    /* Control Deck */
    .control-deck { display: grid; grid-template-columns: 1fr 1.3fr 1.3fr; gap: 15px; }
    .ctrl-group { background: #f8fafc; border: 1px solid #cbd5e1; border-radius: 10px; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
    .grp-label { font-size: 10px; font-weight: 800; color: #64748b; letter-spacing: 0.5px; text-transform: uppercase; border-bottom: 2px solid #e2e8f0; padding-bottom: 4px; margin-bottom: 2px; }
    .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }

    .cmd-btn {
        background: white; border: 1px solid #cbd5e1; border-radius: 6px; padding: 8px;
        font-size: 11px; font-weight: 600; cursor: pointer; transition: all 0.1s; color: #334155;
    }
    .cmd-btn:hover { transform: translateY(-1px); border-color: var(--accent); color: var(--accent); }
    .cmd-btn:active { transform: translateY(1px); }
    
    .cmd-btn.danger:hover { border-color: #ef4444; color: #ef4444; background: #fef2f2; }
    .cmd-btn.action { background: #f0f9ff; border-color: #bae6fd; color: #0284c7; }
    .cmd-btn.action:hover { background: #e0f2fe; }

    .cmd-btn.action-green { background: #f0fdf4; border-color: #bbf7d0; color: #15803d; }
    .cmd-btn.action-green:hover { background: #dcfce7; }

    .cmd-btn.action-purple { background: #f5f3ff; border-color: #ddd6fe; color: #7c3aed; }
    .cmd-btn.action-purple:hover { background: #ede9fe; }

    @keyframes popIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  </style>

  <script>
    let listData = [12, 45, 8];
    let capacity = 6; // slightly larger for merge demo

    // Initial Render
    setTimeout(() => renderList(), 100);

    function renderList() {
        const container = document.getElementById('api-list-container');
        container.innerHTML = '';
        
        listData.forEach((val, idx) => {
            const node = document.createElement('div');
            node.className = 'data-node';
            node.id = `node-${idx}`;
            node.innerHTML = `
                <div class="node-idx">${idx}</div>
                ${val}
            `;
            container.appendChild(node);
        });

        // Add Empty Slots
        for(let i = listData.length; i < capacity; i++) {
            const empty = document.createElement('div');
            empty.style.cssText = "width:60px; height:60px; border:2px dashed #475569; border-radius:8px; opacity:0.3; display:flex; align-items:center; justify-content:center; font-size:10px; color:#cbd5e1;";
            empty.innerText = "Empty";
            container.appendChild(empty);
        }

        document.getElementById('cap-indicator').innerText = `Count: ${listData.length} / Capacity: ${capacity}`;
    }

    function log(msg, color="#22c55e") {
        const c = document.getElementById('api-console');
        c.innerHTML = `> ${msg}`;
        c.style.color = color;
    }

    async function apiAction(action) {
        if (action === 'create') {
            listData = []; capacity = 6;
            log("List initialized. Memory allocated.");
        } 
        else if (action === 'grow') {
            capacity += 3;
            log(`Capacity increased to ${capacity}.`);
        }
        else if (action === 'deleteAll') {
            listData = [];
            log("List cleared.", "#ef4444");
        }
        else if (action === 'add') {
            if (listData.length >= capacity) return log("Error: List full. Grow() required.", "#ef4444");
            const num = Math.floor(Math.random() * 99);
            listData.push(num);
            log(`Added ${num} to index [${listData.length-1}]`);
        }
        else if (action === 'insert') {
            if (listData.length >= capacity) return log("Error: List full.", "#ef4444");
            const num = Math.floor(Math.random() * 99);
            const idx = Math.floor(Math.random() * listData.length);
            listData.splice(idx, 0, num);
            log(`Inserted ${num} at [${idx}]. Shifted others.`);
        }
        else if (action === 'delete') {
            if (listData.length === 0) return log("List is empty.");
            const idx = Math.floor(Math.random() * listData.length);
            listData.splice(idx, 1);
            log(`Deleted item at [${idx}].`);
        }
        else if (action === 'merge') {
            if (listData.length + 2 > capacity) return log("Not enough capacity to merge.", "#ef4444");
            
            // 1. Show Merge Zone
            const zone = document.getElementById('merge-stage');
            zone.classList.add('active');
            log("Merging incoming list [99, 88]...", "#a78bfa");
            
            // 2. Wait
            await new Promise(r => setTimeout(r, 800));
            
            // 3. Hide Zone and Add Data
            zone.classList.remove('active');
            listData.push(99, 88);
            renderList();
            log("Merge Complete. 2 items added.", "#a78bfa");
        }
        else if (action === 'random') {
            listData.sort(() => Math.random() - 0.5);
            log("Shuffling elements...");
        }
        else if (action === 'sort') {
            listData.sort((a,b) => a-b);
            log("Sorted list ascending.");
        }
        else if (action === 'search') {
            if(listData.length === 0) return;
            const target = listData[Math.floor(Math.random()*listData.length)];
            log(`Searching for value: ${target}...`, "#38bdf8");
            
            for(let i=0; i<listData.length; i++) {
                const node = document.getElementById(`node-${i}`);
                if(node) {
                    node.classList.add('highlight');
                    await new Promise(r => setTimeout(r, 200));
                    node.classList.remove('highlight');
                    if(listData[i] === target) {
                        node.classList.add('found');
                        log(`Match found at Index [${i}]!`);
                        setTimeout(() => node.classList.remove('found'), 1000);
                        return; 
                    }
                }
            }
        }
        else if (action === 'traverse') {
             if(listData.length === 0) return log("List is empty.");
             log("Starting Traversal...", "#fff");
             let output = "Output: ";
             
             for(let i=0; i<listData.length; i++) {
                const node = document.getElementById(`node-${i}`);
                if(node) {
                    // Visual Effect
                    node.classList.add('processed');
                    // Build String
                    output += `${listData[i]} -> `;
                    log(output, "#fff");
                    
                    await new Promise(r => setTimeout(r, 400));
                    node.classList.remove('processed');
                }
            }
            log(output + "END", "#22c55e");
            return;
        }

        renderList();
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Lists</div>
      <div class="sub">Implementation</div>
    </div>
    <span class="pill">Syntax</span>
  </div>
  
  <h2>Lists... Using a Linear Array</h2>
  <p>Standard array declarations in C#:</p>
  
  <div class="card" style="font-family:var(--mono); background:#1e293b; color:#e2e8f0; padding:20px; font-size:22px; line-height:1.6;">
      <div>
          <span style="color:#569cd6;">int</span>[] array1 = <span style="color:#569cd6;">new</span> <span style="color:#569cd6;">int</span>[] { <span style="color:#b5cea8;">1</span>, <span style="color:#b5cea8;">3</span>, <span style="color:#b5cea8;">5</span>, <span style="color:#b5cea8;">7</span>, <span style="color:#b5cea8;">9</span> };
      </div>
      <div style="margin-top:15px;">
          <span style="color:#569cd6;">int</span>[] array2 = { <span style="color:#b5cea8;">1</span>, <span style="color:#b5cea8;">3</span>, <span style="color:#b5cea8;">5</span>, <span style="color:#b5cea8;">7</span>, <span style="color:#b5cea8;">9</span> };
      </div>
  </div>

  <p style="margin-top:30px;">Or more generally:</p>
  
  <div class="card" style="font-family:var(--mono); background:#1e293b; color:#e2e8f0; padding:20px; font-size:22px;">
      <span style="color:#4ec9b0;">Class</span>[] array = <span style="color:#569cd6;">new</span> <span style="color:#4ec9b0;">Class</span>[];
  </div>

  <div class="slide-footer">
    <div class="muted">Basic Array Instantiation</div>
    <div class="slide-no" data-slide-no></div>
  </div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Generics</div>
      <div class="sub">Concept</div>
    </div>
    <span class="pill">Interactive Definition</span>
  </div>
  
  <h2>Creation: The Generic Blueprint</h2>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.3fr; gap:30px; height:65%;">
      
      <div style="display:flex; flex-direction:column; justify-content:center; gap:20px;">
          <div>
              <p>Creating an array class using generics provides a single <strong>Blueprint</strong> for multiple types.</p>
              <div class="callout" onclick="this.querySelector('.hidden-answer').style.display='block'" style="cursor:pointer; transition:all 0.2s;">
                  <strong>‚ùì Question:</strong> What is a Generic?
                  <div class="hidden-answer" style="display:none; margin-top:10px; color:#166534; font-size:16px; border-top:1px solid #bbf7d0; padding-top:8px;">
                      It is a placeholder (Type Parameter) that allows code to handle any data type safely.
                  </div>
                  <div style="font-size:12px; color:var(--muted); margin-top:5px;">(Click to reveal)</div>
              </div>
          </div>

          <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #cbd5e1;">
              <div style="font-size:12px; font-weight:bold; color:#64748b; margin-bottom:10px; text-transform:uppercase;">Define Type &lt;T&gt; at Runtime:</div>
              <div style="display:grid; grid-template-columns:repeat(3, 1fr); gap:8px;">
                  <button class="type-btn active" onclick="setGenericType('int')">int</button>
                  <button class="type-btn" onclick="setGenericType('string')">string</button>
                  <button class="type-btn" onclick="setGenericType('bool')">bool</button>
              </div>
          </div>
      </div>
      
      <div class="card" style="background:#1e293b; color:#e2e8f0; display:flex; flex-direction:column; padding:0; overflow:hidden; border:1px solid #334155;">
          
          <div style="padding:15px; border-bottom:1px solid #334155; background:#0f172a;">
              <div style="font-size:10px; color:#94a3b8; font-weight:bold; letter-spacing:1px; margin-bottom:5px;">THE CLASS DEFINITION</div>
              <div style="font-family:var(--mono); font-size:14px; line-height:1.4;">
                  <span style="color:#c586c0;">public class</span> GenericArray&lt;<span id="code-t" style="color:#22c55e; font-weight:bold;">T</span>&gt; {<br>
                  &nbsp;&nbsp;<span style="color:#569cd6;">private</span> <span id="code-t-inner" style="color:#22c55e; font-weight:bold;">T</span>[] array;<br>
                  }
              </div>
          </div>

          <div style="flex-grow:1; padding:20px; display:flex; flex-direction:column; justify-content:center; align-items:center; background:radial-gradient(#334155 1px, transparent 1px); background-size:20px 20px;">
              <div style="font-size:11px; color:#cbd5e1; margin-bottom:10px;">RUNTIME INSTANCE:</div>
              <div id="runtime-box" class="runtime-container">
                  </div>
              <div id="runtime-label" style="font-family:var(--mono); font-size:12px; color:#22c55e; margin-top:10px;">
                  new GenericArray&lt;int&gt;()
              </div>
          </div>

      </div>
  </div>

  <div class="slide-footer">
    <div class="muted">One Class Definition &rarr; Infinite Possibilities</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .type-btn {
        background: white; border: 1px solid #cbd5e1; padding: 8px; border-radius: 6px;
        font-family: var(--mono); font-size: 12px; color: #475569; cursor: pointer; transition: all 0.2s;
    }
    .type-btn:hover { border-color: var(--accent); color: var(--accent); transform: translateY(-1px); }
    .type-btn.active { background: var(--accent); color: white; border-color: var(--accent); box-shadow: 0 2px 5px rgba(22,163,74,0.3); }

    .runtime-container {
        display: flex; gap: 8px; padding: 10px; background: rgba(255,255,255,0.05);
        border-radius: 12px; border: 1px dashed #64748b; transition: all 0.3s;
    }

    .array-cell {
        width: 50px; height: 50px; background: #fff; border-radius: 6px; color: #0f172a;
        display: flex; align-items: center; justify-content: center; font-family: var(--mono);
        font-weight: bold; font-size: 14px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        animation: dropIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    /* Specific Styles for Types */
    .array-cell.int { color: #0f172a; border-bottom: 3px solid #3b82f6; }
    .array-cell.string { background: #fefce8; color: #d97706; font-size: 10px; border-bottom: 3px solid #f59e0b; }
    .array-cell.bool { background: #f0fdf4; color: #15803d; font-size: 11px; border-bottom: 3px solid #22c55e; }

    @keyframes dropIn { from { transform: scale(0.5) translateY(-20px); opacity: 0; } to { transform: scale(1) translateY(0); opacity: 1; } }
  </style>

  <script>
    // Init default
    setTimeout(() => setGenericType('int'), 100);

    function setGenericType(type) {
        // Update Buttons
        document.querySelectorAll('.type-btn').forEach(b => {
            b.classList.remove('active');
            if(b.innerText === type) b.classList.add('active');
        });

        // Update Code Visualization
        const colorMap = { 'int': '#569cd6', 'string': '#ce9178', 'bool': '#569cd6' }; // VS Code colors
        const tSpan = document.getElementById('code-t');
        const tSpanInner = document.getElementById('code-t-inner');
        
        tSpan.innerText = type;
        tSpan.style.color = colorMap[type];
        
        tSpanInner.innerText = type;
        tSpanInner.style.color = colorMap[type];

        // Update Runtime Label
        document.getElementById('runtime-label').innerHTML = `new GenericArray&lt;<span style="color:${colorMap[type]}">${type}</span>&gt;()`;

        // Update Array Visuals
        const container = document.getElementById('runtime-box');
        container.innerHTML = '';
        
        const data = {
            'int': [10, 42, 7, 99],
            'string': ['"Hi"', '"Go"', '"C#"', '"Yo"'],
            'bool': ['true', 'false', 'true', 'false']
        };

        const items = data[type];
        
        items.forEach((val, i) => {
            setTimeout(() => {
                const div = document.createElement('div');
                div.className = `array-cell ${type}`;
                div.innerText = val;
                container.appendChild(div);
            }, i * 100); // Stagger animation
        });
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Generics</div>
      <div class="sub">Review</div>
    </div>
    <span class="pill">Reminder</span>
  </div>
  
  <h2>Generic Class Structure</h2>
  
  <div class="grid-2">
      <div style="font-family:var(--mono); font-size:18px;">
        <div class="card" style="background:#1e293b; color:#d4d4d4;">
            <span style="color:#569cd6;">public class</span> <span style="color:#4ec9b0;">GClass</span>&lt;<span style="color:#4ec9b0;">T</span>&gt;<br>
            {<br>
            &nbsp;&nbsp;<span style="color:#569cd6;">public</span> <span style="color:#4ec9b0;">T</span> Field;<br>
            }
        </div>
      </div>
      
      <div style="font-family:var(--mono); font-size:18px;">
        <div class="card" style="background:#1e293b; color:#d4d4d4;">
            <span style="color:#569cd6;">public static void</span> Main() {<br>
            &nbsp;&nbsp;<span style="color:#6a9955;">// Constructed generic type</span><br>
            &nbsp;&nbsp;<span style="color:#4ec9b0;">GClass</span>&lt;<span style="color:#569cd6;">string</span>&gt; g = <span style="color:#569cd6;">new</span> <span style="color:#4ec9b0;">GClass</span>&lt;<span style="color:#569cd6;">string</span>&gt;();<br>
            &nbsp;&nbsp;g.Field = <span style="color:#ce9178;">"A string"</span>;<br>
            &nbsp;&nbsp;<span style="color:#6a9955;">// ...</span><br>
            }
        </div>
      </div>
  </div>

  <div class="slide-footer">
    <div class="muted">T becomes the specific type (e.g. string) at runtime</div>
    <div class="slide-no" data-slide-no></div>
  </div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Implementation</div>
      <div class="sub">Class Definition</div>
    </div>
    <span class="pill">Code</span>
  </div>
  
  <h2>A Generic Array of Type Parameter T</h2>
  
  <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:16px; overflow:hidden;">
      <span style="color:#569cd6;">public class</span> <span style="color:#4ec9b0;">GenericArray</span>&lt;<span style="color:#4ec9b0;">T</span>&gt;<br>
      {<br>
      &nbsp;&nbsp;<span style="color:#6a9955;">// The actual array</span><br>
      &nbsp;&nbsp;<span style="color:#569cd6;">private</span> <span style="color:#4ec9b0;">T</span>[] array;<br><br>

      &nbsp;&nbsp;<span style="color:#6a9955;">// Constructor</span><br>
      &nbsp;&nbsp;<span style="color:#569cd6;">public</span> <span style="color:#4ec9b0;">GenericArray</span>(<span style="color:#569cd6;">int</span> size)<br>
      &nbsp;&nbsp;{<br>
      &nbsp;&nbsp;&nbsp;&nbsp;array = <span style="color:#569cd6;">new</span> <span style="color:#4ec9b0;">T</span>[size];<br>
      &nbsp;&nbsp;}<br><br>

      &nbsp;&nbsp;<span style="color:#569cd6;">public</span> <span style="color:#4ec9b0;">T</span> getItem(<span style="color:#569cd6;">int</span> index)<br>
      &nbsp;&nbsp;{<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span> array[index];<br>
      &nbsp;&nbsp;}<br><br>

      &nbsp;&nbsp;<span style="color:#569cd6;">public void</span> setItem(<span style="color:#569cd6;">int</span> index, <span style="color:#4ec9b0;">T</span> value)<br>
      &nbsp;&nbsp;{<br>
      &nbsp;&nbsp;&nbsp;&nbsp;array[index] = value;<br>
      &nbsp;&nbsp;}<br>
      }
  </div>

  <div class="slide-footer">
    <div class="muted">Encapsulating a raw array with Generic methods</div>
    <div class="slide-no" data-slide-no></div>
  </div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Implementation</div>
      <div class="sub">Usage</div>
    </div>
    <span class="pill">Code</span>
  </div>
  
  <h2>Working with it in Main</h2>
  
  <div class="grid-2">
      <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:15px; height:100%;">
          <span style="color:#6a9955;">// 1. Creation</span><br>
          <span style="color:#4ec9b0;">GenericArray</span>&lt;<span style="color:#569cd6;">int</span>&gt; array2;<br>
          array2 = <span style="color:#569cd6;">new</span> <span style="color:#4ec9b0;">GenericArray</span>&lt;<span style="color:#569cd6;">int</span>&gt;(<span style="color:#b5cea8;">5</span>);<br><br>

          <span style="color:#6a9955;">// 2. Setting Items</span><br>
          array2.setItem(<span style="color:#b5cea8;">0</span>, <span style="color:#b5cea8;">2</span>);<br>
          array2.setItem(<span style="color:#b5cea8;">1</span>, <span style="color:#b5cea8;">4</span>);<br>
          array2.setItem(<span style="color:#b5cea8;">2</span>, <span style="color:#b5cea8;">6</span>);<br>
          array2.setItem(<span style="color:#b5cea8;">3</span>, <span style="color:#b5cea8;">8</span>);<br>
          array2.setItem(<span style="color:#b5cea8;">4</span>, <span style="color:#b5cea8;">10</span>);<br>
          array2.setItem(<span style="color:#b5cea8;">5</span>, <span style="color:#b5cea8;">12</span>); <span style="color:#ef4444;">// Note: Out of bounds?</span>
      </div>

      <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:15px; height:100%;">
          <span style="color:#6a9955;">// 3. Iteration</span><br>
          <span style="color:#569cd6;">for</span>(<span style="color:#569cd6;">int</span> i=<span style="color:#b5cea8;">0</span>; i&lt;=<span style="color:#b5cea8;">5</span>; i++)<br>
          {<br>
          &nbsp;&nbsp;<span style="color:#4ec9b0;">Console</span>.WriteLine(<br>
          &nbsp;&nbsp;&nbsp;&nbsp;array2.getItem(i)<br>
          &nbsp;&nbsp;);<br>
          }
      </div>
  </div>

  <div class="slide-footer">
    <div class="muted">Instantiation and access</div>
    <div class="slide-no" data-slide-no></div>
  </div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Summary</div>
      <div class="sub">Reflection</div>
    </div>
    <span class="pill">Conclusion</span>
  </div>
  
  <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:60%; text-align:center;">
      <h2 style="font-size:60px; margin-bottom:10px;">So that was...</h2>
      <div class="pill" style="font-size:24px; padding:10px 30px; background:#dcfce7; color:#166534; border-color:#bbf7d0;">Easy</div>
      
      <div class="card" style="margin-top:40px; text-align:left; width:100%;">
          <p>We have just created a <strong>Generic Array</strong>.</p>
          <ul>
              <li>Arrays are useful.</li>
              <li>You can stuff quite powerful logical structures into arrays.</li>
              <li style="color:#ef4444; font-weight:bold;">But arrays aren't perfect.</li>
          </ul>
      </div>
  </div>

  <div class="slide-footer">
    <div class="muted">Next: Addressing array limitations</div>
    <div class="slide-no" data-slide-no></div>
  </div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Implementation</div>
      <div class="sub">Methods</div>
    </div>
    <span class="pill">Interactive Execution</span>
  </div>
  
  <h2>Add One (Set Item)</h2>
  <p>Test the <code>setItem</code> method by injecting values into memory below.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.2fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:15px;">
          
          <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:14px; padding:0; border:1px solid #334155; overflow:hidden;">
              <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">GenericArray.cs</div>
              <div style="padding:15px; line-height:1.5;">
                  <span style="color:#569cd6;">public void</span> setItem(<span style="color:#569cd6;">int</span> index, <span style="color:#4ec9b0;">T</span> value)<br>
                  {<br>
                  &nbsp;&nbsp;<span id="code-line" style="transition:all 0.2s; padding:2px 4px; border-radius:4px;">array[index] = value;</span><br>
                  }
              </div>
          </div>

          <div class="card" style="background:#f1f5f9; border:1px solid #cbd5e1; padding:15px;">
              <div style="font-size:11px; font-weight:bold; color:#64748b; margin-bottom:10px; text-transform:uppercase;">Method Call Parameters</div>
              
              <div style="display:flex; align-items:center; gap:10px; font-family:var(--mono); font-size:14px; color:#334155;">
                  <span>array2.setItem(</span>
                  <input type="number" id="in-idx" value="0" min="0" max="9" style="width:40px; padding:4px; border:1px solid #cbd5e1; border-radius:4px; text-align:center;">
                  <span>,</span>
                  <input type="number" id="in-val" value="42" min="0" max="99" style="width:40px; padding:4px; border:1px solid #cbd5e1; border-radius:4px; text-align:center;">
                  <span>);</span>
              </div>

              <button onclick="runSetItem()" style="margin-top:15px; width:100%; background:var(--accent); color:white; border:none; padding:8px; border-radius:6px; font-weight:bold; cursor:pointer; font-size:12px;">
                  ‚ñ∂ EXECUTE LINE
              </button>
          </div>

      </div>

      <div class="card" style="background:#1e293b; display:flex; flex-direction:column; border:1px solid #334155; position:relative; overflow:hidden;">
          
          <div style="position:absolute; top:10px; left:15px; font-size:10px; font-weight:bold; color:#64748b;">RAM VISUALIZER (Size: 5)</div>
          
          <div style="flex-grow:1; display:flex; align-items:center; justify-content:center; gap:8px;" id="mem-strip">
              </div>

          <div id="status-log" style="font-family:var(--mono); font-size:12px; color:#94a3b8; text-align:center; padding-bottom:15px; height:20px;">
              Waiting for execution...
          </div>

      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Direct Assignment is an O(1) Operation</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .mem-slot {
        width: 50px; height: 60px; background: #0f172a; border: 2px solid #334155; border-radius: 6px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        position: relative; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .mem-slot.filled { border-color: var(--accent); background: #064e3b; }
    
    .slot-idx { position: absolute; top: -18px; font-family: var(--mono); font-size: 10px; color: #64748b; }
    .slot-val { font-family: var(--mono); font-size: 18px; font-weight: bold; color: #fff; }

    .highlight-code { background: #fef08a; color: #000 !important; box-shadow: 0 0 10px rgba(253, 224, 71, 0.5); }
    .error-shake { animation: shake 0.4s ease-in-out; border-color: #ef4444 !important; }

    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
    @keyframes pop { 0% { transform: scale(0.8); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
  </style>

  <script>
    const arraySize = 5;
    
    // Init Memory
    setTimeout(() => {
        const strip = document.getElementById('mem-strip');
        strip.innerHTML = '';
        for(let i=0; i<arraySize; i++) {
            strip.innerHTML += `
                <div class="mem-slot" id="m-slot-${i}">
                    <div class="slot-idx">[${i}]</div>
                    <div class="slot-val">0</div>
                </div>`;
        }
    }, 100);

    function runSetItem() {
        const idxInput = document.getElementById('in-idx');
        const valInput = document.getElementById('in-val');
        const codeLine = document.getElementById('code-line');
        const log = document.getElementById('status-log');
        
        const idx = parseInt(idxInput.value);
        const val = valInput.value;

        // 1. Highlight Code
        codeLine.classList.add('highlight-code');
        setTimeout(() => codeLine.classList.remove('highlight-code'), 400);

        // 2. Check Bounds
        if (idx < 0 || idx >= arraySize) {
            log.innerHTML = `<span style="color:#ef4444">‚ùå IndexOutOfRangeException: Index ${idx} is invalid!</span>`;
            
            // Shake Visualizer
            const strip = document.getElementById('mem-strip');
            strip.classList.add('error-shake');
            setTimeout(() => strip.classList.remove('error-shake'), 400);
            return;
        }

        // 3. Update Memory
        const slot = document.getElementById(`m-slot-${idx}`);
        const valDiv = slot.querySelector('.slot-val');
        
        valDiv.innerText = val;
        slot.classList.add('filled');
        
        // Animation pop
        slot.style.animation = 'none';
        slot.offsetHeight; /* trigger reflow */
        slot.style.animation = 'pop 0.3s ease';

        log.innerHTML = `<span style="color:#22c55e">‚úî Success: Wrote value '${val}' to index [${idx}]</span>`;
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Operations</div>
      <div class="sub">Resizing</div>
    </div>
    <span class="pill">Interactive Simulation</span>
  </div>
  
  <h2>The Problem: Fixed Capacity</h2>
  <p>What happens if we try to add an element that doesn't fit?</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.2fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:14px; padding:0; border:1px solid #334155; overflow:hidden;">
              <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">Program.cs</div>
              <div style="padding:15px; line-height:1.6;">
                  <span style="color:#6a9955;">// Array Capacity is 5</span><br>
                  <span style="color:#4ec9b0;">GenericArray</span>&lt;<span style="color:#569cd6;">int</span>&gt; array2 = <span style="color:#569cd6;">new</span>(5);<br>
                  <br>
                  <span style="color:#6a9955;">// Try to add at Index 6</span><br>
                  array2.setItem(<span style="color:#b5cea8;">6</span>, <span style="color:#b5cea8;">14</span>);
              </div>
          </div>

          <div style="font-size:15px; color:#cbd5e1;">
              <strong>Logic:</strong> Either we accept that we can't add more items, or we need a way to <strong style="color:var(--accent);">Grow</strong> the array.
          </div>

      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; position:relative; overflow:hidden; padding:0;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <span id="cap-display" style="font-family:var(--mono); font-size:11px; color:#94a3b8;">CAPACITY: 5</span>
              <div style="display:flex; gap:10px; align-items:center;">
                  <div style="font-family:var(--mono); font-size:12px; color:#cbd5e1;">idx:6, val:14</div>
                  <button id="btn-exec" onclick="tryInsert()" style="background:#3b82f6; border:none; color:white; border-radius:4px; padding:4px 10px; font-size:10px; font-weight:bold; cursor:pointer;">RUN</button>
              </div>
          </div>

          <div style="flex-grow:1; display:flex; align-items:center; justify-content:center; gap:6px; flex-wrap:wrap; padding:20px; align-content:center;" id="grow-mem-strip">
              </div>

          <div id="grow-controls" style="background:#fef2f2; border-top:1px solid #ef4444; padding:15px; text-align:center; transform:translateY(100%); transition:transform 0.3s;">
              <div style="color:#b91c1c; font-size:12px; font-weight:bold; margin-bottom:10px;">üí• CRASH: IndexOutOfRange</div>
              <button onclick="growArray()" style="background:#ef4444; color:white; border:none; padding:8px 20px; border-radius:6px; font-weight:bold; cursor:pointer; font-size:12px; box-shadow:0 4px 10px rgba(239,68,68,0.3);">
                  üîß CALL Grow()
              </button>
          </div>

      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Fixed arrays cannot expand without reallocation</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .g-slot {
        width: 40px; height: 50px; background: #0f172a; border: 2px solid #334155; border-radius: 4px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        position: relative; transition: all 0.3s;
    }
    .g-slot.filled { border-color: var(--accent); background: #064e3b; }
    .g-slot.new { border-color: #3b82f6; background: #1e3a8a; animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

    .g-idx { font-family: var(--mono); font-size: 9px; color: #64748b; margin-bottom:2px; }
    .g-val { font-family: var(--mono); font-size: 14px; font-weight: bold; color: #fff; }

    .shake-box { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; border-color:#ef4444 !important; }
    
    @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }
  </style>

  <script>
    let currentCap = 5;
    const strip = document.getElementById('grow-mem-strip');
    const controls = document.getElementById('grow-controls');
    const capDisp = document.getElementById('cap-display');

    // Init
    renderSlots();

    function renderSlots() {
        strip.innerHTML = '';
        for(let i=0; i<currentCap; i++) {
            strip.innerHTML += `
                <div class="g-slot" id="g-slot-${i}">
                    <div class="g-idx">${i}</div>
                    <div class="g-val">0</div>
                </div>`;
        }
    }

    function tryInsert() {
        const targetIdx = 6;
        
        if(targetIdx >= currentCap) {
            // CRASH
            strip.parentElement.classList.add('shake-box');
            setTimeout(() => strip.parentElement.classList.remove('shake-box'), 500);
            
            controls.style.transform = "translateY(0)"; // Show Grow Button
            document.getElementById('btn-exec').disabled = true;
            document.getElementById('btn-exec').style.opacity = 0.5;
        } else {
            // SUCCESS
            const slot = document.getElementById(`g-slot-${targetIdx}`);
            slot.querySelector('.g-val').innerText = "14";
            slot.classList.add('filled');
            
            // Success Feedback
            controls.style.transform = "translateY(100%)";
            controls.style.background = "#f0fdf4";
            controls.style.borderTopColor = "#22c55e";
            controls.innerHTML = `<div style="color:#15803d; font-weight:bold; padding:10px;">‚úî Success: Value 14 inserted at [6]</div>`;
            controls.style.transform = "translateY(0)";
        }
    }

    function growArray() {
        // Increase Cap
        const oldCap = currentCap;
        currentCap = 10; // Double it
        
        capDisp.innerText = `CAPACITY: ${currentCap}`;
        
        // Render New Slots
        for(let i=oldCap; i<currentCap; i++) {
            const div = document.createElement('div');
            div.className = 'g-slot new';
            div.id = `g-slot-${i}`;
            div.innerHTML = `<div class="g-idx">${i}</div><div class="g-val">0</div>`;
            strip.appendChild(div);
        }

        // Reset UI for success retry
        controls.style.transform = "translateY(100%)";
        setTimeout(() => {
            document.getElementById('btn-exec').disabled = false;
            document.getElementById('btn-exec').innerText = "RETRY";
            document.getElementById('btn-exec').style.background = "#22c55e";
            document.getElementById('btn-exec').style.opacity = 1;
        }, 300);
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Operations</div>
      <div class="sub">Resizing</div>
    </div>
    <span class="pill">Complexity Visualizer</span>
  </div>
  
  <h2>The "Grow" Operation</h2>
  <p>Resizing an array is expensive because we must <strong>copy</strong> every element to a new block of memory.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.2fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:15px;">
          
          <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:14px; padding:0; border:1px solid #334155; overflow:hidden;">
              <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">GenericArray.cs</div>
              <div style="padding:15px; line-height:1.5;">
                  <span style="color:#569cd6;">public void</span> Grow(<span style="color:#569cd6;">int</span> newsize)<br>
                  {<br>
                  &nbsp;&nbsp;<span style="color:#6a9955;">// Creates new array & copies elements</span><br>
                  &nbsp;&nbsp;<span style="color:#4ec9b0;">Array</span>.Resize(<span style="color:#569cd6;">ref</span> array, newsize); <span style="color:#ef4444; font-weight:bold;">// O(N)</span><br>
                  }
              </div>
          </div>

          <div class="card" style="background:#f1f5f9; border-left:4px solid var(--accent); padding:10px 15px;">
              <div style="font-size:12px; font-weight:bold; color:var(--ink); margin-bottom:5px;">Design Decision: Public vs. Private?</div>
              <div style="font-size:12px; color:#475569; line-height:1.4;">
                  Usually <strong>private</strong> to hide complexity. It should only be called automatically when <code>Insert</code> detects the array is full.
              </div>
          </div>
          
          <div style="font-size:14px; color:#cbd5e1;">
              <strong>Complexity:</strong> Adding is <strong style="color:var(--accent)">O(1)</strong> normally, but <strong style="color:#ef4444">O(N)</strong> when growing.
          </div>

      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; position:relative; overflow:hidden; padding:0;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <span id="grow-status" style="font-family:var(--mono); font-size:11px; color:#94a3b8;">STATUS: FULL (5/5)</span>
              <button id="btn-grow" onclick="runGrowAnim()" style="background:#ef4444; border:none; color:white; border-radius:4px; padding:4px 12px; font-size:10px; font-weight:bold; cursor:pointer;">
                  ‚ñ∂ EXECUTE Grow(10)
              </button>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:20px; padding:20px; background:radial-gradient(#334155 1px, transparent 1px); background-size:20px 20px;">
              
              <div id="arr-stage" style="display:flex; gap:5px; transition:all 0.5s;">
                  </div>

              <div id="cost-meter" style="font-family:var(--mono); font-size:12px; color:#ef4444; opacity:0; transition:opacity 0.3s;">
                  OPERATIONS: <span id="op-count" style="font-weight:bold; font-size:16px;">0</span> (Copying...)
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Grow is the main limitation of arrays compared to Linked Lists</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .cell {
        width: 40px; height: 40px; background: #0f172a; border: 2px solid #334155; border-radius: 4px;
        display: flex; align-items: center; justify-content: center; font-family: var(--mono); color: #fff; font-size: 12px;
        position: relative; transition: all 0.3s;
    }
    .cell.filled { border-color: var(--accent); background: #064e3b; }
    .cell.copying { border-color: #3b82f6; background: #1e3a8a; transform: scale(1.2); z-index: 10; box-shadow: 0 0 15px #3b82f6; }
    .cell.new-empty { border-color: #475569; border-style: dashed; opacity: 0.5; }
  </style>

  <script>
    const stage = document.getElementById('arr-stage');
    let isGrowing = false;

    // Init with 5 items
    resetStage();

    function resetStage() {
        stage.innerHTML = '';
        for(let i=0; i<5; i++) {
            stage.innerHTML += `<div class="cell filled">${(i+1)*10}</div>`;
        }
    }

    async function runGrowAnim() {
        if(isGrowing) return;
        isGrowing = true;
        
        const btn = document.getElementById('btn-grow');
        btn.disabled = true;
        btn.style.opacity = 0.5;

        // 1. Create New Larger Container Visual
        // We simulate the "Old" array fading and "New" array appearing
        const oldData = [10, 20, 30, 40, 50];
        
        // Clear and rebuild structure to show 10 slots (5 empty placeholders, 5 new empty)
        stage.innerHTML = '';
        
        // Create 10 slots
        for(let i=0; i<10; i++) {
            stage.innerHTML += `<div class="cell new-empty" id="cell-${i}"></div>`;
        }
        
        document.getElementById('cost-meter').style.opacity = 1;
        document.getElementById('grow-status').innerText = "STATUS: RESIZING...";
        document.getElementById('grow-status').style.color = "#ef4444";

        // 2. Animate Copying (The O(N) part)
        for(let i=0; i<5; i++) {
            const cell = document.getElementById(`cell-${i}`);
            
            // Highlight as "Writing"
            cell.classList.remove('new-empty');
            cell.classList.add('copying');
            cell.innerText = oldData[i];
            
            // Update Counter
            document.getElementById('op-count').innerText = i + 1;
            
            // Wait to simulate cost
            await new Promise(r => setTimeout(r, 400));
            
            // Settle
            cell.classList.remove('copying');
            cell.classList.add('filled');
        }

        // 3. Finish
        document.getElementById('grow-status').innerText = "STATUS: EXPANDED (5/10)";
        document.getElementById('grow-status').style.color = "#22c55e";
        document.getElementById('cost-meter').innerHTML = "COST: <span style='color:#ef4444'>O(N)</span> COMPLETE";
        
        btn.innerText = "‚Ü∫ RESET";
        btn.style.background = "#334155";
        btn.style.opacity = 1;
        btn.disabled = false;
        btn.onclick = () => {
            resetStage();
            document.getElementById('cost-meter').style.opacity = 0;
            document.getElementById('op-count').innerText = "0";
            document.getElementById('grow-status').innerText = "STATUS: FULL (5/5)";
            document.getElementById('grow-status').style.color = "#94a3b8";
            btn.innerText = "‚ñ∂ EXECUTE Grow(10)";
            btn.style.background = "#ef4444";
            btn.onclick = runGrowAnim;
            isGrowing = false;
        };
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Optimization</div>
      <div class="sub">Memory Management</div>
    </div>
    <span class="pill">Doubling Strategy</span>
  </div>
  
  <h2>Grow: The Hidden Cost</h2>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.2fr; gap:30px; height:65%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          <div>
              <p>To minimize expensive copies, a common strategy is to <strong>double</strong> the capacity when full.</p>
              <div class="callout" style="font-size:14px; margin-top:10px;">
                  <strong>The Algorithm:</strong><br>
                  1. Allocate New Array (2x size)<br>
                  2. Copy items from Old to New<br>
                  3. Delete Old Array
              </div>
          </div>

          <div class="card" style="border-left:4px solid #ef4444; background:#ef6e18; color:#cbd5e1;">
              <h3>‚ö†Ô∏è The Problem</h3>
              <p>This runs into trouble with <strong>Large Arrays</strong>.</p>
              <p><strong>Why?</strong> Run the simulation to see the "Memory Spike".</p>
          </div>
      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:20px; position:relative; overflow:hidden;">
          
          <div style="display:flex; justify-content:space-between; align-items:flex-end; margin-bottom:10px;">
              <div style="font-size:11px; font-weight:bold; color:#94a3b8;">SYSTEM RAM USAGE</div>
              <div id="ram-text" style="font-family:var(--mono); font-size:12px; color:#22c55e;">Used: 20%</div>
          </div>

          <div style="height:30px; background:#0f172a; border-radius:6px; overflow:hidden; display:flex; margin-bottom:20px; border:1px solid #334155; position:relative;">
              <div id="bar-current" style="width:20%; background:#3b82f6; transition:width 0.5s;"></div>
              <div id="bar-new" style="width:0%; background:#ef4444; transition:width 0.5s; opacity:0.7;"></div>
              
              <div style="position:absolute; right:0; top:0; bottom:0; width:2px; background:#ef4444; z-index:10;"></div>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px;">
              <div id="array-graphic" style="width:60px; height:60px; background:#3b82f6; border-radius:8px; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-family:var(--mono); transition:all 0.5s;">
                  20MB
              </div>
              <div id="status-msg" style="font-size:12px; color:#cbd5e1; text-align:center;">Array is Full. Need to Grow.</div>
          </div>

          <button id="btn-grow-ram" onclick="growRamSim()" style="margin-top:auto; width:100%; background:#22c55e; color:white; border:none; padding:12px; border-radius:6px; font-weight:bold; cursor:pointer; font-size:14px; transition:all 0.2s;">
              üöÄ DOUBLE SIZE
          </button>

          <div id="oom-overlay" style="position:absolute; inset:0; background:rgba(15, 23, 42, 0.95); display:none; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:20px;">
              <div style="font-size:40px; margin-bottom:10px;">üíÄ</div>
              <div style="color:#ef4444; font-weight:bold; font-size:20px; margin-bottom:10px;">OutOfMemoryException</div>
              <p style="color:#cbd5e1; font-size:14px; line-height:1.5;">
                  <strong>The Crash Explained:</strong><br>
                  To grow from 40MB to 80MB, you briefly need <strong>120MB</strong> (40 Old + 80 New).<br>
                  System only has 100MB.
              </p>
              <button onclick="resetRamSim()" style="margin-top:15px; background:transparent; border:1px solid #ef4444; color:#ef4444; padding:5px 15px; border-radius:4px; cursor:pointer;">Try Again</button>
          </div>

      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Doubling requires 3x current memory available (1x Old + 2x New)</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <script>
    let currentSize = 20; // Starts at 20%
    let step = 0;

    function growRamSim() {
        const barCurrent = document.getElementById('bar-current');
        const barNew = document.getElementById('bar-new');
        const text = document.getElementById('ram-text');
        const msg = document.getElementById('status-msg');
        const graphic = document.getElementById('array-graphic');
        const btn = document.getElementById('btn-grow-ram');

        if (step === 0) {
            // Grow 20 -> 40
            // Need 20 + 40 = 60% total. Safe.
            msg.innerText = "Allocating new array (40MB)...";
            barNew.style.width = "40%";
            
            // Text Update
            text.innerText = "Peak Usage: 60% (Copying...)";
            text.style.color = "#f59e0b";

            setTimeout(() => {
                // Copy Complete
                barCurrent.style.width = "40%";
                barNew.style.width = "0%";
                text.innerText = "Used: 40%";
                text.style.color = "#22c55e";
                graphic.style.width = "100px";
                graphic.style.height = "100px";
                graphic.innerText = "40MB";
                msg.innerText = "Growth Successful. Array Full.";
                currentSize = 40;
                step++;
            }, 1000);
        } 
        else if (step === 1) {
            // Grow 40 -> 80
            // Need 40 + 80 = 120% total. CRASH.
            msg.innerText = "Allocating new array (80MB)...";
            barNew.style.width = "60%"; // Visual cap at 100 but logically it fails
            
            text.innerText = "Peak Usage: 120% (OVERFLOW)";
            text.style.color = "#ef4444";
            
            setTimeout(() => {
                document.getElementById('oom-overlay').style.display = 'flex';
            }, 600);
        }
    }

    function resetRamSim() {
        currentSize = 20;
        step = 0;
        document.getElementById('oom-overlay').style.display = 'none';
        document.getElementById('bar-current').style.width = "20%";
        document.getElementById('bar-new').style.width = "0%";
        document.getElementById('array-graphic').style.width = "60px";
        document.getElementById('array-graphic').style.height = "60px";
        document.getElementById('array-graphic').innerText = "20MB";
        document.getElementById('ram-text').innerText = "Used: 20%";
        document.getElementById('status-msg').innerText = "Array is Full. Need to Grow.";
        document.getElementById('ram-text').style.color = "#22c55e";
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Concepts</div>
      <div class="sub">Distinction</div>
    </div>
    <span class="pill">Visual Comparison</span>
  </div>
  
  <h2>Insert One vs. Add One</h2>
  <p>Is there a difference? <strong>Yes.</strong> It depends on whether order matters.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.2fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="border-left:4px solid #3b82f6;">
              <h3>1. Add (Append)</h3>
              <p>Simply putting the item at the end.</p>
              <div style="font-size:12px; color:#94a3b8; margin-top:5px;">
                  Result: <span style="font-family:var(--mono); color:#cbd5e1;">{ a, b, c, f, g, h, <strong style="color:#3b82f6">d</strong> }</span>
              </div>
              <div style="font-size:11px; color:#ef4444; margin-top:5px;">‚ö†Ô∏è BREAKS SORTED ORDER</div>
          </div>

          <div class="card" style="border-left:4px solid var(--accent);">
              <h3>2. Insert (Shift)</h3>
              <p>Opening a spot between existing values.</p>
              <div style="font-size:12px; color:#94a3b8; margin-top:5px;">
                  Result: <span style="font-family:var(--mono); color:#cbd5e1;">{ a, b, c, <strong style="color:var(--accent)">d</strong>, f, g, h }</span>
              </div>
              <div style="font-size:11px; color:var(--accent); margin-top:5px;">‚úî MAINTAINS ORDER</div>
          </div>
          
      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; position:relative; overflow:hidden; padding:0;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:center; gap:15px;">
              <button onclick="runAdd()" class="action-btn blue">
                  ADD 'D' (Append)
              </button>
              <button onclick="runInsert()" class="action-btn green">
                  INSERT 'D' (Sorted)
              </button>
              <button onclick="resetInsertSim()" class="action-btn reset" title="Reset">
                  ‚Ü∫
              </button>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px;">
              
              <div id="insert-stage" style="display:flex; gap:8px;">
                  </div>

              <div id="insert-msg" style="font-family:var(--mono); font-size:12px; color:#94a3b8; height:20px;">
                  Array is Sorted: { a, b, c, f, g, h }
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Inserting requires shifting elements to make space</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .letter-box {
        width: 45px; height: 50px; background: #0f172a; border: 2px solid #334155; border-radius: 6px;
        display: flex; align-items: center; justify-content: center; font-family: var(--mono); 
        color: #fff; font-size: 18px; font-weight:bold; position: relative; transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    }
    
    .letter-box.new-blue { background: #1e3a8a; border-color: #3b82f6; color: #60a5fa; animation: dropIn 0.3s; }
    .letter-box.new-green { background: #064e3b; border-color: var(--accent); color: #86efac; animation: dropIn 0.3s; }
    
    .spacer { width: 0px; transition: all 0.4s; }
    .spacer.open { width: 53px; } /* Width of box + gap */

    .action-btn {
        border: none; padding: 6px 15px; border-radius: 4px; font-size: 11px; font-weight: bold; cursor: pointer; color: white; transition: transform 0.1s;
    }
    .action-btn:active { transform: translateY(1px); }
    .action-btn.blue { background: #3b82f6; }
    .action-btn.blue:hover { background: #2563eb; }
    .action-btn.green { background: var(--accent); }
    .action-btn.green:hover { background: #15803d; }
    .action-btn.reset { background: #334155; width:30px; padding:0; display:grid; place-items:center; font-size:14px; }
    .action-btn.reset:hover { background: #475569; }

    @keyframes dropIn { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  </style>

  <script>
    const startArr = ['A', 'B', 'C', 'F', 'G', 'H'];
    const stageDiv = document.getElementById('insert-stage');
    const msgDiv = document.getElementById('insert-msg');
    let isReset = true;

    // Init
    renderStart();

    function renderStart() {
        stageDiv.innerHTML = '';
        startArr.forEach(char => {
            const div = document.createElement('div');
            div.className = 'letter-box';
            div.innerText = char;
            stageDiv.appendChild(div);
        });
        isReset = true;
        msgDiv.innerText = "Array is Sorted: { a, b, c, f, g, h }";
        msgDiv.style.color = "#94a3b8";
    }

    function runAdd() {
        if(!isReset) return;
        isReset = false;

        const div = document.createElement('div');
        div.className = 'letter-box new-blue';
        div.innerText = 'D';
        stageDiv.appendChild(div);

        msgDiv.innerHTML = "Appended 'D' to end. <span style='color:#ef4444'>Order is Broken!</span>";
        msgDiv.style.color = "#cbd5e1";
    }

    async function runInsert() {
        if(!isReset) return;
        isReset = false;

        // 1. Identify insertion point (After C, index 3)
        // We need to visually shift F, G, H
        const boxes = stageDiv.children;
        const targetIdx = 3; 

        msgDiv.innerHTML = "Shifting elements to make space...";
        msgDiv.style.color = "var(--accent)";

        // Create a spacer at index 3
        const spacer = document.createElement('div');
        spacer.className = 'spacer';
        stageDiv.insertBefore(spacer, boxes[targetIdx]);

        // Trigger CSS transition
        requestAnimationFrame(() => {
            spacer.classList.add('open');
        });

        // Wait for shift
        await new Promise(r => setTimeout(r, 450));

        // Insert new element
        const div = document.createElement('div');
        div.className = 'letter-box new-green';
        div.innerText = 'D';
        div.style.position = 'absolute'; // Temp float
        div.style.left = spacer.offsetLeft + 'px';
        
        stageDiv.replaceChild(div, spacer);
        div.style.position = 'static'; // Snap in

        msgDiv.innerHTML = "Inserted 'D'. <span style='color:#22c55e'>Order Preserved!</span>";
    }

    function resetInsertSim() {
        renderStart();
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Logic</div>
      <div class="sub">Shifting</div>
    </div>
    <span class="pill">Interactive Problem</span>
  </div>
  
  <h2>The Mechanics of Insert</h2>
  <p>Is <code>setItem</code> safe? It depends on whether the spot is empty.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.3fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="border-left:4px solid #22c55e;">
              <h3>1. Insert into Empty Spot</h3>
              <p>Straightforward. No data is threatened.</p>
              <code style="font-size:12px; color:#22c55e; background:#f0fdf4; padding:2px 5px; border-radius:4px;">array.setItem(4, 14);</code>
          </div>

          <div class="card" style="border-left:4px solid #f59e0b;">
              <h3>2. Insert into Occupied Spot</h3>
              <p>If we just use <code>setItem(2, 25)</code>, the old value (10) is <strong>overwritten</strong>.</p>
              <p class="muted" style="font-size:14px; margin-top:5px;">To save it, we must <strong>Shift</strong> everything up by 1.</p>
          </div>
      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; position:relative; overflow:hidden; padding:0;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; text-align:center;">
              <span id="ins-status" style="font-family:var(--mono); font-size:12px; color:#94a3b8;">Current State: Waiting...</span>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:25px;">
              
              <div id="ins-stage" style="display:flex; gap:8px;">
                  <div class="i-slot filled"><span class="idx">0</span>A</div>
                  <div class="i-slot filled"><span class="idx">1</span>B</div>
                  <div class="i-slot filled" id="slot-2"><span class="idx">2</span>10</div>
                  <div class="i-slot filled" id="slot-3"><span class="idx">3</span>D</div>
                  <div class="i-slot" id="slot-4"><span class="idx">4</span><span style="opacity:0.3; font-size:10px;">null</span></div>
              </div>

              <div style="display:flex; gap:10px;">
                  <button onclick="doEmptyInsert()" id="btn-empty" class="i-btn green">
                      1. Fill Empty [4]
                  </button>
                  <button onclick="doOverwrite()" id="btn-over" class="i-btn red">
                      2. Overwrite [2]
                  </button>
                  <button onclick="doShiftInsert()" id="btn-shift" class="i-btn blue">
                      3. Shift & Insert [2]
                  </button>
                  <button onclick="resetInsSim()" class="i-btn reset">‚Ü∫</button>
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">True insertion requires O(N) shifting</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .i-slot {
        width: 50px; height: 60px; background: #0f172a; border: 2px solid #334155; border-radius: 6px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        color: white; font-family: var(--mono); font-weight:bold; position: relative; transition: all 0.3s;
    }
    .i-slot.filled { background: #1e293b; border-color: #64748b; }
    .i-slot.highlight { border-color: #f59e0b; background: #451a03; }
    
    .idx { position: absolute; top: -15px; color: #64748b; font-size: 10px; }

    .i-btn { border: none; padding: 8px 12px; border-radius: 4px; font-size: 11px; font-weight: bold; cursor: pointer; color: white; opacity:0.9; transition:transform 0.1s; }
    .i-btn:hover { opacity:1; transform:translateY(-1px); }
    .i-btn:active { transform:translateY(1px); }
    
    .i-btn.green { background: #22c55e; }
    .i-btn.red { background: #ef4444; }
    .i-btn.blue { background: #3b82f6; }
    .i-btn.reset { background: #475569; }

    /* Animations */
    @keyframes flashRed { 0% { background: #ef4444; } 100% { background: #1e293b; } }
    .flash-destructive { animation: flashRed 0.5s; }
  </style>

  <script>
    const status = document.getElementById('ins-status');

    function doEmptyInsert() {
        const s4 = document.getElementById('slot-4');
        if(s4.innerText === '14') return; // already done

        s4.innerHTML = '<span class="idx">4</span>14';
        s4.classList.add('filled');
        s4.style.borderColor = "#22c55e";
        
        status.innerText = "Easy! Index [4] was null. O(1) Operation.";
        status.style.color = "#22c55e";
    }

    function doOverwrite() {
        const s2 = document.getElementById('slot-2');
        
        // Visual Data Loss Effect
        s2.classList.add('flash-destructive');
        setTimeout(() => s2.classList.remove('flash-destructive'), 500);
        
        s2.innerHTML = '<span class="idx">2</span>25';
        
        status.innerHTML = "‚ö†Ô∏è DATA LOSS! The value '10' was overwritten by '25'.";
        status.style.color = "#ef4444";
    }

    async function doShiftInsert() {
        // Reset state slightly for visual clarity if they overwrote
        const s2 = document.getElementById('slot-2');
        const s3 = document.getElementById('slot-3');
        const s4 = document.getElementById('slot-4');

        if(s2.innerText.includes('25')) {
             s2.innerHTML = '<span class="idx">2</span>10'; // Restore for demo
        }

        status.innerText = "Shifting elements to open space...";
        status.style.color = "#3b82f6";

        // Shift Animation: 
        // 1. Move D to [4]
        // 2. Move 10 to [3]
        // 3. Insert 25 at [2]

        // Step 1
        s3.style.transform = "translateX(58px)";
        s2.style.transform = "translateX(58px)";
        
        await new Promise(r => setTimeout(r, 400));
        
        // Logical Update
        s4.innerHTML = '<span class="idx">4</span>' + (s4.innerText === 'null' ? 'D' : s4.innerText); // simple logic fix
        s4.classList.add('filled');
        
        if(s4.innerText.includes('null')) s4.innerHTML = '<span class="idx">4</span>D'; // Ensure D moves if 4 was empty
        else s4.innerHTML = '<span class="idx">4</span>D';

        s3.innerHTML = '<span class="idx">3</span>10';
        s2.innerHTML = '<span class="idx">2</span><span style="opacity:0.3">...</span>'; // Hole
        
        // Reset Transforms
        s3.style.transform = "none";
        s2.style.transform = "none";

        await new Promise(r => setTimeout(r, 200));

        // Step 3: Fill Hole
        s2.innerHTML = '<span class="idx">2</span>25';
        s2.style.borderColor = "#3b82f6";

        status.innerText = "Success! '10' and 'D' moved. '25' inserted.";
        status.style.color = "#22c55e";
    }

    function resetInsSim() {
        const stage = document.getElementById('ins-stage');
        stage.innerHTML = `
            <div class="i-slot filled"><span class="idx">0</span>A</div>
            <div class="i-slot filled"><span class="idx">1</span>B</div>
            <div class="i-slot filled" id="slot-2"><span class="idx">2</span>10</div>
            <div class="i-slot filled" id="slot-3"><span class="idx">3</span>D</div>
            <div class="i-slot" id="slot-4"><span class="idx">4</span><span style="opacity:0.3; font-size:10px;">null</span></div>
        `;
        status.innerText = "Current State: Waiting...";
        status.style.color = "#94a3b8";
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Divide & Conquer</div>
    </div>
    <span class="pill">Interactive Simulation</span>
  </div>

  <h2>Merging Sorted Lists</h2>
  <p>To merge two sorted arrays, we compare the <strong>head</strong> of both lists, take the smaller value, and advance that list's pointer.</p>

  <div class="grid-2" style="grid-template-columns: 1fr 280px; gap:30px; margin-top:20px; height: 65%;">
    
    <div class="card" style="background:#0f172a; border:1px solid #334155; padding:0; display:flex; flex-direction:column; overflow:hidden;">
        
        <div id="status-bar" style="background:#1e293b; padding:15px; border-bottom:1px solid #334155; text-align:center; min-height:55px; display:flex; align-items:center; justify-content:center;">
             <span style="color:#94a3b8; font-family:monospace; font-size:14px;">Press <strong>STEP</strong> to begin merge</span>
        </div>

        <div style="flex-grow:1; display:flex; flex-direction:column; justify-content:center; gap:25px; padding:20px;">
            
            <div style="display:flex; align-items:center; gap:15px;">
                <div style="width:50px; text-align:right; font-weight:bold; color:#60a5fa; font-family:monospace;">A:</div>
                <div id="row-a" style="display:flex; gap:10px;"></div>
            </div>

            <div style="display:flex; align-items:center; gap:15px;">
                <div style="width:50px; text-align:right; font-weight:bold; color:#c084fc; font-family:monospace;">B:</div>
                <div id="row-b" style="display:flex; gap:10px;"></div>
            </div>

            <div style="height:1px; background:#334155; margin:10px 0;"></div>

            <div style="display:flex; align-items:center; gap:15px;">
                <div style="width:50px; text-align:right; font-weight:bold; color:#4ade80; font-family:monospace;">Res:</div>
                <div id="row-res" style="display:flex; gap:10px; flex-wrap:wrap;"></div>
            </div>

        </div>

        <div style="background:#0f172a; border-top:1px solid #334155; padding:15px; display:flex; justify-content:center; gap:15px;">
             <button onclick="window.stepMerge()" id="btn-step" style="background:#3b82f6; color:white; border:none; padding:10px 25px; border-radius:6px; font-weight:bold; cursor:pointer; font-size:14px; box-shadow:0 4px 10px rgba(59, 130, 246, 0.3);">
                ‚ûî STEP
             </button>
             <button onclick="window.resetMerge()" style="background:transparent; border:1px solid #475569; color:#94a3b8; border-radius:6px; padding:10px 20px; font-weight:bold; cursor:pointer; font-size:14px;">
                ‚Ü∫ RESET
             </button>
        </div>
    </div>

    <div style="display:flex; flex-direction:column; gap:15px;">
        <div class="card" style="background:#f8fafc; color:#0f172a; padding:15px; border:1px solid #cbd5e1; flex-grow:1;">
            <div style="font-size:10px; font-weight:bold; color:#64748b; margin-bottom:10px; text-transform:uppercase; letter-spacing:0.5px;">Logic</div>
            <div style="font-family:monospace; font-size:13px; line-height:1.6;">
                <span style="color:#7c3aed;">while</span>(i < A.len && j < B.len) {<br>
                &nbsp;&nbsp;<span style="color:#059669;">if</span> (A[i] < B[j]) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;res.add(A[i]);<br>
                &nbsp;&nbsp;&nbsp;&nbsp;i++;<br>
                &nbsp;&nbsp;} <span style="color:#059669;">else</span> {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;res.add(B[j]);<br>
                &nbsp;&nbsp;&nbsp;&nbsp;j++;<br>
                &nbsp;&nbsp;}<br>
                }<br>
                <span style="color:#64748b;">// Add remaining items...</span>
            </div>
        </div>
        
        <div class="card" style="background:#fff7ed; border:1px solid #fdba74; padding:15px;">
            <strong style="color:#ea580c; font-size:14px;">Key Concept</strong>
            <p style="font-size:13px; margin-top:5px; color:#431407; line-height:1.4;">
                This is a <strong>linear time</strong> operation O(N+M). We touch every element exactly once.
            </p>
        </div>
    </div>

  </div>

  <div class="slide-footer">
    <div class="muted">Basis for Merge Sort</div>
    <div class="slide-no"></div>
  </div>

  <style>
    /* BLOCK STYLING */
    .block {
        width: 45px; height: 45px;
        background: #1e293b;
        border: 2px solid #475569;
        border-radius: 6px;
        color: #94a3b8;
        font-family: monospace; font-size: 16px; font-weight: bold;
        display: flex; align-items: center; justify-content: center;
        position: relative;
        transition: all 0.3s ease;
    }

    /* Active Pointers */
    .block.active-a {
        border-color: #60a5fa; color: #fff; background: rgba(96, 165, 250, 0.2);
        box-shadow: 0 0 15px rgba(96, 165, 250, 0.3);
    }
    .block.active-b {
        border-color: #c084fc; color: #fff; background: rgba(192, 132, 252, 0.2);
        box-shadow: 0 0 15px rgba(192, 132, 252, 0.3);
    }

    /* "Used" state */
    .block.used {
        opacity: 0.2; transform: scale(0.9); border-color: #334155;
    }

    /* Pointer Arrow */
    .block.active-a::after, .block.active-b::after {
        content: '‚ñ≤';
        position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%);
        font-size: 10px;
    }
    .block.active-a::after { color: #60a5fa; }
    .block.active-b::after { color: #c084fc; }

    /* RESULT STYLING */
    .res-slot {
        width: 45px; height: 45px;
        border: 2px dashed #334155;
        border-radius: 6px;
        display:flex; align-items:center; justify-content:center;
    }

    .res-item {
        width: 100%; height: 100%;
        background: #22c55e;
        border: 2px solid #4ade80;
        color: #022c22;
        border-radius: 4px;
        display:flex; align-items:center; justify-content:center;
        font-weight:bold; font-family:monospace; font-size:16px;
        box-shadow: 0 4px 10px rgba(34, 197, 94, 0.4);
    }

    /* Pop Animation */
    .pop-in {
        animation: mergePop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes mergePop {
        0% { transform: scale(0) translateY(-30px); opacity: 0; }
        100% { transform: scale(1) translateY(0); opacity: 1; }
    }
  </style>

  <script>
    window.mergeState = {
        a: [2, 5, 8, 12],
        b: [3, 6, 9, 10],
        res: [],
        ptrA: 0,
        ptrB: 0,
        done: false
    };

    // Initial Render
    setTimeout(() => window.renderMerge(), 100);

    window.renderMerge = function(lastAction = null) {
        const s = window.mergeState;
        
        // Render Row A
        const rowA = document.getElementById('row-a');
        rowA.innerHTML = s.a.map((val, i) => {
            let classes = 'block';
            if (i < s.ptrA) classes += ' used';
            if (i === s.ptrA && !s.done) classes += ' active-a';
            return `<div class="${classes}">${val}</div>`;
        }).join('');

        // Render Row B
        const rowB = document.getElementById('row-b');
        rowB.innerHTML = s.b.map((val, i) => {
            let classes = 'block';
            if (i < s.ptrB) classes += ' used';
            if (i === s.ptrB && !s.done) classes += ' active-b';
            return `<div class="${classes}">${val}</div>`;
        }).join('');

        // Render Result (With Slots)
        const rowRes = document.getElementById('row-res');
        rowRes.innerHTML = '';
        const totalSlots = s.a.length + s.b.length;
        
        for(let i=0; i<totalSlots; i++) {
            let content = '';
            if(i < s.res.length) {
                // If this is the very last added item, animate it
                const isNew = (i === s.res.length - 1 && lastAction === 'add');
                content = `<div class="res-item ${isNew ? 'pop-in' : ''}">${s.res[i]}</div>`;
            }
            rowRes.innerHTML += `<div class="res-slot">${content}</div>`;
        }

        // Update Status Text
        const status = document.getElementById('status-bar');
        if (s.done) {
            status.innerHTML = `<span style="color:#4ade80; font-weight:bold;">‚úî MERGE COMPLETE</span>`;
            document.getElementById('btn-step').disabled = true;
            document.getElementById('btn-step').style.opacity = 0.5;
        } else if (lastAction === 'start') {
             status.innerHTML = `<span style="color:#e2e8f0;">Comparing A[${s.ptrA}] vs B[${s.ptrB}]...</span>`;
        } else if (lastAction === 'add') {
             // Logic to show what happened
             const justAdded = s.res[s.res.length-1];
             status.innerHTML = `<span style="color:#e2e8f0;">Smaller value is <strong style="color:#4ade80">${justAdded}</strong>. Moved to result.</span>`;
        } else {
             // Default start state
             const valA = (s.ptrA < s.a.length) ? s.a[s.ptrA] : Infinity;
             const valB = (s.ptrB < s.b.length) ? s.b[s.ptrB] : Infinity;
             if(valA !== Infinity && valB !== Infinity) {
                status.innerHTML = `<span style="color:#94a3b8;">Next: Compare <strong style="color:#60a5fa">${valA}</strong> vs <strong style="color:#c084fc">${valB}</strong></span>`;
             } else if (valA !== Infinity) {
                status.innerHTML = `<span style="color:#94a3b8;">B is empty. Flushing A...</span>`;
             } else {
                status.innerHTML = `<span style="color:#94a3b8;">A is empty. Flushing B...</span>`;
             }
        }
    };

    window.stepMerge = function() {
        const s = window.mergeState;
        if (s.done) return;

        const valA = (s.ptrA < s.a.length) ? s.a[s.ptrA] : Infinity;
        const valB = (s.ptrB < s.b.length) ? s.b[s.ptrB] : Infinity;

        // Logic
        if (valA <= valB) {
            s.res.push(valA);
            s.ptrA++;
        } else {
            s.res.push(valB);
            s.ptrB++;
        }

        // Check if done
        if (s.ptrA >= s.a.length && s.ptrB >= s.b.length) {
            s.done = true;
        }

        window.renderMerge('add');
    };

    window.resetMerge = function() {
        window.mergeState = {
            a: [2, 5, 8, 12],
            b: [3, 6, 9, 10],
            res: [],
            ptrA: 0,
            ptrB: 0,
            done: false
        };
        document.getElementById('btn-step').disabled = false;
        document.getElementById('btn-step').style.opacity = 1;
        window.renderMerge();
    };
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Operations</div>
      <div class="sub">Deletion</div>
    </div>
    <span class="pill">Visual Problem</span>
  </div>
  
  <h2>Deleting One Element</h2>
  <p>To delete an object, we can simply nullify it. <strong>But at what cost?</strong></p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.3fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:14px; padding:0; border:1px solid #334155; overflow:hidden;">
              <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">GenericArray.cs</div>
              <div style="padding:15px; line-height:1.6;">
                  <span style="color:#6a9955;">// 1. Check if element exists (Search)</span><br>
                  <span style="color:#6a9955;">// 2. Clear the reference</span><br>
                  array[4] = <span style="color:#569cd6;">null</span>;
              </div>
          </div>

          <div class="card" style="border-left:4px solid #ef4444;">
              <h3>The Question</h3>
              <p>Easy, right? But what about the <strong>empty location</strong>?</p>
              <div id="gap-warning" style="display:none; margin-top:10px; font-size:13px; color:#ef4444; font-weight:bold; background:#fef2f2; padding:8px; border-radius:4px; animation: popIn 0.3s;">
                  ‚ö†Ô∏è ISSUE DETECTED: Array is now fragmented!
              </div>
          </div>

      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; position:relative; overflow:hidden; padding:0;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:center; gap:10px; align-items:center;">
              <span style="font-family:var(--mono); font-size:12px; color:#94a3b8;">TARGET INDEX:</span>
              <input type="number" id="del-idx" value="4" min="0" max="8" style="width:40px; padding:4px; border-radius:4px; border:1px solid #334155; background:#1e293b; color:white; text-align:center;">
              <button onclick="runDelete()" id="btn-del" style="background:#ef4444; border:none; color:white; border-radius:4px; padding:5px 15px; font-size:11px; font-weight:bold; cursor:pointer;">
                  EXECUTE DELETE
              </button>
              <button onclick="resetDelSim()" style="background:#334155; border:none; color:white; border-radius:4px; padding:5px 10px; font-size:14px; font-weight:bold; cursor:pointer;">‚Ü∫</button>
          </div>

          <div style="flex-grow:1; display:flex; align-items:center; justify-content:center; gap:6px; flex-wrap:wrap; padding:20px;" id="del-stage">
              </div>

      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Nulling creates holes (fragmentation)</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .d-slot {
        width: 45px; height: 55px; background: #0f172a; border: 2px solid #334155; border-radius: 6px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        position: relative; transition: all 0.3s;
    }
    .d-slot.filled { border-color: var(--accent); background: #064e3b; }
    .d-slot.empty { border-color: #ef4444; border-style: dashed; background: #450a0a; opacity: 0.7; }

    .d-idx { position: absolute; top: -18px; font-family: var(--mono); font-size: 10px; color: #64748b; }
    .d-val { font-family: var(--mono); font-size: 18px; font-weight: bold; color: #fff; }
    
    .d-slot.empty .d-val { color: #fecaca; font-size: 12px; font-style: italic; }

    @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  </style>

  <script>
    const chars = ['a', 's', 'd', 'r', 'g', 'a', 'x', 'e', 'k'];
    const delStage = document.getElementById('del-stage');

    // Init
    initDelSim();

    function initDelSim() {
        delStage.innerHTML = '';
        chars.forEach((c, i) => {
            delStage.innerHTML += `
                <div class="d-slot filled" id="d-slot-${i}">
                    <div class="d-idx">${i}</div>
                    <div class="d-val">'${c}'</div>
                </div>`;
        });
        document.getElementById('gap-warning').style.display = 'none';
        document.getElementById('btn-del').disabled = false;
        document.getElementById('btn-del').style.opacity = 1;
    }

    function runDelete() {
        const idx = document.getElementById('del-idx').value;
        const slot = document.getElementById(`d-slot-${idx}`);
        
        if(!slot) return;

        // Visual Nullify
        slot.classList.remove('filled');
        slot.classList.add('empty');
        slot.querySelector('.d-val').innerText = "null";
        
        // Trigger Warning
        document.getElementById('gap-warning').style.display = 'block';
        
        // Disable button to encourage reset
        const btn = document.getElementById('btn-del');
        btn.disabled = true;
        btn.style.opacity = 0.5;
    }

    function resetDelSim() {
        initDelSim();
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Operations</div>
      <div class="sub">Deletion</div>
    </div>
    <span class="pill">Visual Simulation</span>
  </div>
  
  <h2>Delete: End vs. Front</h2>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.3fr; gap:30px; height:65%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="border-left:4px solid var(--accent);">
              <h3>1. Delete from End</h3>
              <p>We simply nullify the last item.</p>
              <p class="muted" style="font-size:14px; margin-top:5px;">The next <strong>Add</strong> will reuse that spot. Everyone is happy.</p>
          </div>

          <div class="card" style="border-left:4px solid #ef4444;">
              <h3>2. Delete from Front</h3>
              <p>If we delete <code>[0]</code>, <code>[1]</code>... and keep appending at <code>[n]</code>...</p>
              <p class="muted" style="font-size:14px; margin-top:5px;">
                  The array "crawls" forward. It runs out of bounds even though space exists at the start.
              </p>
          </div>
          
          <div style="font-size:12px; color:#cbd5e1; background:#334155; padding:8px; border-radius:4px;">
              <strong>Solution?</strong> Circular Arrays (Coming Later).
          </div>
      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:0; overflow:hidden;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <span id="crawl-status" style="font-family:monospace; font-size:11px; color:#94a3b8;">MEMORY STATE: EMPTY</span>
              <button onclick="window.resetCrawl()" style="background:#334155; border:none; color:white; border-radius:4px; padding:4px 10px; font-size:10px; font-weight:bold; cursor:pointer;">RESET</button>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:20px; padding:20px;">
              
              <div id="crawl-stage" style="display:flex; gap:5px;">
                  </div>

              <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px; width:100%;">
                  <button onclick="window.opAdd()" class="c-btn blue">
                      1. ADD (Append)
                  </button>
                  <button onclick="window.opDelEnd()" class="c-btn green">
                      2. DEL (End)
                  </button>
                  <button onclick="window.opDelFront()" class="c-btn red">
                      3. DEL (Front)
                  </button>
              </div>

              <div id="warning-box" style="display:none; color:#ef4444; font-size:12px; font-weight:bold; animation:popIn 0.3s;">
                  üí• CRASH: Tail hit the wall! (Start is empty but unreachable)
              </div>

          </div>
      </div>
  </div>
  
  <style>
    .c-slot {
        width: 35px; height: 50px; background: #0f172a; border: 2px solid #334155; border-radius: 4px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        position: relative; transition: all 0.2s;
    }
    .c-slot.active { background: #064e3b; border-color: #10b981; }
    
    /* "Dead" space styling (Wasted memory) */
    .c-slot.dead { 
        background: #450a0a; 
        border-color: #ef4444; 
        opacity: 0.6; 
        /* Striped background to indicate "Do Not Enter" / Wasted */
        background-image: repeating-linear-gradient(45deg, #ef4444 0, #ef4444 2px, transparent 0, transparent 50%);
        background-size: 10px 10px; 
    }
    
    .c-idx { position: absolute; top: -15px; font-family: monospace; font-size: 9px; color: #64748b; }
    .c-val { font-family: monospace; font-size: 14px; font-weight: bold; color: white; }

    .c-btn { border: none; padding: 10px; border-radius: 4px; font-size: 10px; font-weight: bold; cursor: pointer; color: white; transition: transform 0.1s; }
    .c-btn:active { transform: translateY(1px); }
    .c-btn:disabled { opacity: 0.3; cursor: not-allowed; }
    
    .c-btn.blue { background: #3b82f6; }
    .c-btn.green { background: #10b981; }
    .c-btn.red { background: #ef4444; }

    @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  </style>

  <script>
    // GLOBAL VARS
    window.crawlState = {
        cap: 8,
        head: 0,
        tail: 0
    };

    // 1. RESET / INIT FUNCTION
    window.resetCrawl = function() {
        const stageC = document.getElementById('crawl-stage');
        const statusC = document.getElementById('crawl-status');
        const warnBox = document.getElementById('warning-box');
        
        // Reset Logic
        stageC.innerHTML = '';
        for(let i=0; i<window.crawlState.cap; i++) {
            stageC.innerHTML += `
                <div class="c-slot" id="cs-${i}">
                    <div class="c-idx">${i}</div>
                    <div class="c-val"></div>
                </div>`;
        }
        window.crawlState.head = 0;
        window.crawlState.tail = 0;
        
        warnBox.style.display = 'none';
        statusC.innerText = "MEMORY STATE: EMPTY";
        statusC.style.color = "#94a3b8";
        
        // Re-enable buttons
        document.querySelectorAll('.c-btn').forEach(b => b.disabled = false);
    };

    // 2. ADD (APPEND)
    window.opAdd = function() {
        const s = window.crawlState;
        const statusC = document.getElementById('crawl-status');

        if(s.tail >= s.cap) {
            window.triggerCrash();
            return;
        }

        const slot = document.getElementById(`cs-${s.tail}`);
        slot.classList.remove('dead');
        slot.classList.add('active');
        slot.querySelector('.c-val').innerText = "D";
        
        s.tail++;
        window.updateCrawlStatus();
    };

    // 3. DELETE END
    window.opDelEnd = function() {
        const s = window.crawlState;
        if(s.tail <= s.head) return; // Empty

        s.tail--;
        const slot = document.getElementById(`cs-${s.tail}`);
        slot.classList.remove('active');
        slot.querySelector('.c-val').innerText = "";
        
        window.updateCrawlStatus();
    };

    // 4. DELETE FRONT
    window.opDelFront = function() {
        const s = window.crawlState;
        if(s.head >= s.tail) return; // Empty

        const slot = document.getElementById(`cs-${s.head}`);
        slot.classList.remove('active');
        slot.classList.add('dead'); // Visualizes wasted space
        slot.querySelector('.c-val').innerText = "";
        
        s.head++;
        window.updateCrawlStatus();
    };

    // HELPERS
    window.updateCrawlStatus = function() {
        const statusC = document.getElementById('crawl-status');
        statusC.innerText = `Head: ${window.crawlState.head} | Tail: ${window.crawlState.tail}`;
        statusC.style.color = "#cbd5e1";
    };

    window.triggerCrash = function() {
        const warnBox = document.getElementById('warning-box');
        const statusC = document.getElementById('crawl-status');
        
        warnBox.style.display = 'block';
        document.querySelectorAll('.c-btn').forEach(b => b.disabled = true);
        
        statusC.innerText = "SYSTEM CRASH: OUT OF BOUNDS";
        statusC.style.color = "#ef4444";
    };

    // Initialize on Load
    setTimeout(window.resetCrawl, 100);
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Optimization</div>
      <div class="sub">Memory Management</div>
    </div>
    <span class="pill">Shrinking Strategy</span>
  </div>
  
  <h2>Shrink the Array?</h2>
  <p>If an array is mostly empty, we <em>can</em> shrink it. But should we?</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.2fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="border-left:4px solid var(--accent);">
              <h3>The Theory</h3>
              <p>If <code>Count &lt; Capacity / 2</code>, we can halve the array size to free up memory.</p>
              <code style="font-size:12px; background:#0f172a; padding:5px; border-radius:4px; display:block; margin-top:5px; color:#d4d4d4;">Array.Resize(ref arr, current / 2);</code>
          </div>

          <div class="card" style="background:#f8fafc; border:1px solid #cbd5e1;">
              <h3>In Practice?</h3>
              <ul style="font-size:14px; margin-top:5px; padding-left:20px;">
                  <li><strong>Usually No:</strong> Memory is cheap; Copying (O(N)) is expensive.</li>
                  <li><strong>Maybe:</strong> Useful for mobile/embedded devices where RAM is scarce.</li>
              </ul>
          </div>
          
      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:0; overflow:hidden;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <span id="shrink-stats" style="font-family:var(--mono); font-size:11px; color:#94a3b8;">CAPACITY: 10 | USED: 3</span>
              <div id="waste-badge" style="font-size:10px; font-weight:bold; background:#7f1d1d; color:#fca5a5; padding:2px 6px; border-radius:4px;">
                  70% WASTED
              </div>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:20px; padding:20px;">
              
              <div style="width:100%; height:40px; background:#334155; border-radius:6px; overflow:hidden; display:flex; position:relative; border:1px solid #475569;">
                  <div id="bar-used" style="width:30%; background:#3b82f6; border-right:2px solid #1e293b; display:grid; place-items:center; color:white; font-size:10px; font-weight:bold;">DATA</div>
                  <div id="bar-waste" style="width:70%; background:repeating-linear-gradient(45deg, #475569, #475569 10px, #334155 10px, #334155 20px); display:grid; place-items:center; color:#94a3b8; font-size:10px;">EMPTY SPACE</div>
              </div>

              <div style="display:flex; flex-direction:column; gap:10px; width:100%; align-items:center;">
                  
                  <div id="shrink-msg" style="height:20px; font-size:12px; color:#ef4444; font-weight:bold;">
                      ‚ö†Ô∏è Array is too large for its content!
                  </div>

                  <div style="display:flex; gap:10px;">
                      <button onclick="removeItem()" class="s-btn red">
                          - Remove Item
                      </button>
                      <button onclick="addItem()" class="s-btn blue">
                          + Add Item
                      </button>
                      <button onclick="runShrink()" id="btn-shrink" class="s-btn green animate-pulse">
                          ‚ôª SHRINK NOW
                      </button>
                  </div>
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Shrinking prevents "Memory Leaks" in long-running applications</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .s-btn { border: none; padding: 8px 15px; border-radius: 4px; font-size: 11px; font-weight: bold; cursor: pointer; color: white; transition: all 0.2s; }
    .s-btn:active { transform: scale(0.95); }
    .s-btn:disabled { opacity: 0.3; cursor: not-allowed; animation: none; }
    
    .s-btn.red { background: #ef4444; }
    .s-btn.blue { background: #3b82f6; }
    .s-btn.green { background: var(--accent); box-shadow: 0 4px 15px rgba(22,163,74,0.4); }

    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .7; } }
  </style>

  <script>
    let cap = 10;
    let count = 3;

    function updateVisuals() {
        const usedPct = (count / cap) * 100;
        const wastePct = 100 - usedPct;
        
        document.getElementById('bar-used').style.width = `${usedPct}%`;
        document.getElementById('bar-waste').style.width = `${wastePct}%`;
        
        document.getElementById('shrink-stats').innerText = `CAPACITY: ${cap} | USED: ${count}`;
        document.getElementById('waste-badge').innerText = `${Math.round(wastePct)}% WASTED`;
        document.getElementById('waste-badge').style.background = wastePct > 50 ? "#7f1d1d" : "#064e3b";
        document.getElementById('waste-badge').style.color = wastePct > 50 ? "#fca5a5" : "#6ee7b7";

        const btnShrink = document.getElementById('btn-shrink');
        const msg = document.getElementById('shrink-msg');

        // Threshold: Less than half
        if(count < cap / 2 && cap > 4) {
            btnShrink.disabled = false;
            msg.style.opacity = 1;
            msg.innerText = "‚ö†Ô∏è Array is too large! Suggest Shrink.";
            msg.style.color = "#ef4444";
        } else {
            btnShrink.disabled = true;
            if(usedPct > 80) {
                 msg.innerText = "Memory utilized efficiently.";
                 msg.style.color = "#22c55e";
            } else {
                 msg.style.opacity = 0;
            }
        }
    }

    function removeItem() {
        if(count > 0) count--;
        updateVisuals();
    }

    function addItem() {
        if(count < cap) count++;
        updateVisuals();
    }

    function runShrink() {
        const oldCap = cap;
        cap = Math.max(4, Math.floor(cap / 2)); // Halve it
        
        const msg = document.getElementById('shrink-msg');
        msg.innerText = `‚ôª Resized: ${oldCap} -> ${cap}. Memory Saved!`;
        msg.style.color = "#22c55e";
        msg.style.opacity = 1;
        
        updateVisuals();
    }
    
    // Init
    updateVisuals();
  </script>
</section>


<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Operations</div>
      <div class="sub">Algorithms</div>
    </div>
    <span class="pill">Linear Search</span>
  </div>
  
  <h2>Find / Search For</h2>
  <p>The basic idea is to iterate through the array until a match is found.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.2fr; gap:30px; height:60%; margin-top:10px;">
      
      <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:13px; padding:0; border:1px solid #334155; overflow:hidden;">
          <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">GenericArray.cs</div>
          <div style="padding:15px; line-height:1.5;">
              <span style="color:#569cd6;">public bool</span> Find(<span style="color:#4ec9b0;">T</span> value)<br>
              {<br>
              &nbsp;&nbsp;<span style="color:#569cd6;">for</span> (<span style="color:#569cd6;">int</span> i = 0; i < array.Length; i++)<br>
              &nbsp;&nbsp;{<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#6a9955;">// Check each element</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span id="code-chk" style="transition:0.2s; padding:2px;"><span style="color:#569cd6;">if</span> (array[i].Equals(value))</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span id="code-ret" style="transition:0.2s; padding:2px;"><span style="color:#c586c0;">return true</span>;</span><br>
              &nbsp;&nbsp;}<br>
              &nbsp;&nbsp;<span style="color:#c586c0;">return false</span>;<br>
              }
          </div>
      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:0; overflow:hidden;">
          
          <div style="background:#0f172a; padding:15px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <div style="font-family:var(--mono); color:white; font-size:14px;">
                  Target Value: <span style="color:#f59e0b; font-weight:bold; font-size:16px;">7</span>
              </div>
              <button onclick="stepSearch()" id="btn-search" style="background:#3b82f6; border:none; color:white; border-radius:4px; padding:6px 15px; font-size:11px; font-weight:bold; cursor:pointer; letter-spacing:0.5px;">
                  ‚ñ∂ CHECK INDEX [0]
              </button>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:20px; padding:20px;">
              
              <div style="display:flex; gap:10px;" id="search-track">
                  <div class="s-slot" id="s-0"><div class="idx">0</div>10</div>
                  <div class="s-slot" id="s-1"><div class="idx">1</div>45</div>
                  <div class="s-slot" id="s-2"><div class="idx">2</div>99</div>
                  <div class="s-slot" id="s-3"><div class="idx">3</div>7</div>
                  <div class="s-slot" id="s-4"><div class="idx">4</div>23</div>
              </div>

              <div id="search-status" style="font-family:var(--mono); font-size:13px; color:#94a3b8; height:20px;">
                  Starting Linear Search...
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Linear Search is O(N) - Worst case checks every item</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .s-slot {
        width: 50px; height: 60px; background: #0f172a; border: 2px solid #334155; border-radius: 6px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        color: #fff; font-family: var(--mono); font-weight:bold; font-size:16px;
        position: relative; transition: all 0.3s;
    }
    .s-slot.active { border-color: #3b82f6; background: #1e3a8a; transform:scale(1.1); z-index:10; }
    .s-slot.checked { opacity: 0.5; filter: grayscale(1); }
    .s-slot.found { border-color: #22c55e; background: #064e3b; box-shadow: 0 0 15px #22c55e; transform:scale(1.2); z-index:20; }
    
    .idx { position: absolute; top: -18px; font-family: var(--mono); font-size: 10px; color: #64748b; }

    .hl-code { background: #3b82f6; color: white !important; }
    .hl-success { background: #22c55e; color: white !important; }
  </style>

  <script>
    let sIndex = 0;
    const sTarget = 7;
    const sData = [10, 45, 99, 7, 23];

    function stepSearch() {
        const btn = document.getElementById('btn-search');
        const status = document.getElementById('search-status');
        const codeChk = document.getElementById('code-chk');
        const codeRet = document.getElementById('code-ret');

        // Reset if done
        if(btn.innerText === "‚Ü∫ RESET") {
            resetSearch();
            return;
        }

        // 1. Highlight current slot
        const slot = document.getElementById(`s-${sIndex}`);
        
        // Remove active from previous
        if(sIndex > 0) {
            document.getElementById(`s-${sIndex-1}`).classList.remove('active');
            document.getElementById(`s-${sIndex-1}`).classList.add('checked');
        }

        slot.classList.add('active');
        codeChk.classList.add('hl-code');
        setTimeout(() => codeChk.classList.remove('hl-code'), 400);

        const val = sData[sIndex];

        // 2. Logic Check
        if(val === sTarget) {
            // FOUND!
            slot.classList.remove('active');
            slot.classList.add('found');
            
            status.innerHTML = `<span style="color:#22c55e">MATCH FOUND at Index [${sIndex}]! Returning true.</span>`;
            codeRet.classList.add('hl-success');
            
            btn.innerText = "‚Ü∫ RESET";
            btn.style.background = "#22c55e";
        } else {
            // NOT FOUND, NEXT
            status.innerHTML = `Comparing: ${val} != ${sTarget}. <span style="color:#ef4444">Next...</span>`;
            sIndex++;
            if(sIndex < sData.length) {
                btn.innerText = `‚ñ∂ CHECK INDEX [${sIndex}]`;
            } else {
                status.innerText = "End of Array. Not Found. Returning false.";
                btn.innerText = "‚Ü∫ RESET";
            }
        }
    }

    function resetSearch() {
        sIndex = 0;
        document.getElementById('btn-search').innerText = "‚ñ∂ CHECK INDEX [0]";
        document.getElementById('btn-search').style.background = "#3b82f6";
        document.getElementById('search-status').innerText = "Starting Linear Search...";
        document.getElementById('code-ret').classList.remove('hl-success');
        
        for(let i=0; i<5; i++) {
            const s = document.getElementById(`s-${i}`);
            s.className = "s-slot";
        }
    }
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Operations</div>
      <div class="sub">Traversal</div>
    </div>
    <span class="pill">Print All</span>
  </div>
  
  <h2>Print All Elements</h2>
  <p>Conceptually easy: Iterate from <code>0</code> to <code>Length-1</code> and output each item.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.2fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:14px; padding:0; border:1px solid #334155; overflow:hidden;">
              <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">GenericArray.cs</div>
              <div style="padding:15px; line-height:1.6;">
                  <span style="color:#569cd6;">public void</span> PrintAll()<br>
                  {<br>
                  &nbsp;&nbsp;<span style="color:#569cd6;">for</span> (<span style="color:#569cd6;">int</span> i = 0; i < length; i++)<br>
                  &nbsp;&nbsp;{<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#6a9955;">// Assumes object has ToString()</span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span id="code-print" style="transition:0.2s; padding:2px;"><span style="color:#4ec9b0;">Console</span>.WriteLine(array[i]);</span><br>
                  &nbsp;&nbsp;}<br>
                  }
              </div>
          </div>

          <div style="font-size:13px; color:#cbd5e1; background:#334155; padding:10px; border-radius:6px; border-left:4px solid #3b82f6;">
              <strong>Note:</strong> This assumes the object type <code>T</code> has a valid implementation of <code>.ToString()</code> so it can be read.
          </div>

      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:0; overflow:hidden;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <div style="display:flex; align-items:center; gap:10px;">
                  <span style="font-family:var(--mono); font-size:12px; color:#94a3b8;">ITERATOR:</span>
                  <div id="iter-badge" style="background:#3b82f6; color:white; font-family:var(--mono); font-size:11px; padding:2px 6px; border-radius:4px; font-weight:bold;">i = -1</div>
              </div>
              
              <div style="display:flex; gap:5px;">
                  <button onclick="stepPrint()" id="btn-step-p" style="background:#3b82f6; border:none; color:white; border-radius:4px; padding:6px 15px; font-size:11px; font-weight:bold; cursor:pointer;">
                      ‚ñ∂ STEP
                  </button>
                  <button onclick="autoPrint()" id="btn-auto-p" style="background:#22c55e; border:none; color:white; border-radius:4px; padding:6px 15px; font-size:11px; font-weight:bold; cursor:pointer;">
                      ‚è© AUTO
                  </button>
                  <button onclick="resetPrint()" style="background:#334155; border:none; color:white; border-radius:4px; padding:6px 10px; font-size:14px; font-weight:bold; cursor:pointer;">‚Ü∫</button>
              </div>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; padding:20px; gap:20px;">
              
              <div style="display:flex; justify-content:center; gap:8px;" id="p-strip">
                  <div class="p-slot" id="p-0"><div class="idx">0</div>"User"</div>
                  <div class="p-slot" id="p-1"><div class="idx">1</div>1024</div>
                  <div class="p-slot" id="p-2"><div class="idx">2</div>True</div>
                  <div class="p-slot" id="p-3"><div class="idx">3</div>3.14</div>
              </div>

              <div style="background:#0f172a; border:1px solid #334155; border-radius:6px; flex-grow:1; padding:10px; font-family:var(--mono); font-size:12px; color:#22c55e; overflow-y:auto; display:flex; flex-direction:column-reverse;">
                  <div id="console-stream">
                      <span style="color:#64748b;">> Ready to print...</span>
                  </div>
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Traversal is O(N) operation</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .p-slot {
        width: 55px; height: 55px; background: #0f172a; border: 2px solid #334155; border-radius: 6px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        color: #fff; font-family: var(--mono); font-weight:bold; font-size:13px;
        position: relative; transition: all 0.2s;
    }
    .p-slot.active { border-color: #3b82f6; background: #1e3a8a; transform: translateY(-5px); box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4); z-index: 10; }
    .p-slot.done { border-color: #22c55e; opacity: 0.6; }
    
    .idx { position: absolute; top: -18px; font-family: var(--mono); font-size: 10px; color: #64748b; }

    .hl-print { background: #1e3a8a; color: #93c5fd !important; }
  </style>

  <script>
    let pIdx = -1;
    const pData = ['"User"', '1024', 'True', '3.14'];
    let pTimer = null;

    function stepPrint() {
        if(pIdx >= 3) {
            // Done
            clearInterval(pTimer);
            return;
        }

        pIdx++;
        document.getElementById('iter-badge').innerText = `i = ${pIdx}`;
        
        // 1. Highlight Slot
        const slot = document.getElementById(`p-${pIdx}`);
        if(pIdx > 0) {
            const prev = document.getElementById(`p-${pIdx-1}`);
            prev.classList.remove('active');
            prev.classList.add('done');
        }
        slot.classList.add('active');

        // 2. Highlight Code
        const code = document.getElementById('code-print');
        code.classList.add('hl-print');
        setTimeout(() => code.classList.remove('hl-print'), 300);

        // 3. Print to Console
        const consoleDiv = document.getElementById('console-stream');
        const newLine = document.createElement('div');
        newLine.innerHTML = `> Printing [${pIdx}]: <span style="color:#fff; font-weight:bold;">${pData[pIdx]}</span>`;
        consoleDiv.prepend(newLine); // Add to top (column-reverse handles visual bottom)
    }

    function autoPrint() {
        if(pIdx >= 3) resetPrint();
        stepPrint();
        pTimer = setInterval(stepPrint, 600);
        document.getElementById('btn-auto-p').disabled = true;
        document.getElementById('btn-step-p').disabled = true;
    }

    function resetPrint() {
        clearInterval(pTimer);
        pIdx = -1;
        document.getElementById('iter-badge').innerText = `i = -1`;
        document.getElementById('console-stream').innerHTML = '<span style="color:#64748b;">> Ready to print...</span>';
        
        for(let i=0; i<4; i++) {
            const s = document.getElementById(`p-${i}`);
            s.className = "p-slot";
        }
        
        document.getElementById('btn-auto-p').disabled = false;
        document.getElementById('btn-step-p').disabled = false;
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Operations</div>
      <div class="sub">Algorithms</div>
    </div>
    <span class="pill">Randomization</span>
  </div>
  
  <h2>Randomize (Shuffle)</h2>
  <p>How do we scramble an array? There are two main approaches with different costs.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.3fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:15px;">
          
          <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:13px; padding:0; border:1px solid #334155; overflow:hidden;">
              <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">C# Random Class</div>
              <div style="padding:15px; line-height:1.5;">
                  <span style="color:#569cd6;">var</span> rand = <span style="color:#569cd6;">new</span> <span style="color:#4ec9b0;">Random</span>();<br>
                  <span style="color:#569cd6;">for</span>(<span style="color:#569cd6;">int</span> i=0; i&lt;5; i++)<br>
                  &nbsp;&nbsp;<span style="color:#4ec9b0;">Console</span>.WriteLine(rand.Next(0, 10));
              </div>
          </div>

          <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
              <div class="card" style="padding:10px; border-left:3px solid #3b82f6;">
                  <strong style="color:#3b82f6; font-size:12px;">1. In-Place</strong>
                  <p style="font-size:11px; color:#94a3b8; margin-top:5px;">Swap random pairs. Low memory usage, but lots of reads/writes.</p>
              </div>
              <div class="card" style="padding:10px; border-left:3px solid #ef4444;">
                  <strong style="color:#ef4444; font-size:12px;">2. New Array</strong>
                  <p style="font-size:11px; color:#94a3b8; margin-top:5px;">Copy items to new list. Easier logic, but <strong>doubles memory</strong>.</p>
              </div>
          </div>

          <div style="font-size:11px; color:#cbd5e1; background:#334155; padding:8px; border-radius:6px; margin-top:auto;">
              <strong>Note:</strong> Computers use "Pseudo-Random" (Mathematical formulas), not true random chaos.
          </div>

      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:0; overflow:hidden;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <div style="font-family:var(--mono); font-size:11px; color:#94a3b8;">
                  RAM USAGE: <span id="mem-use" style="color:#22c55e; font-weight:bold;">1x</span>
              </div>
              <div style="display:flex; gap:10px;">
                  <button onclick="shuffleInPlace()" class="shuf-btn blue">
                      ‚ö° In-Place
                  </button>
                  <button onclick="shuffleNew()" class="shuf-btn red">
                      üíæ New Array
                  </button>
                  <button onclick="resetShuffle()" class="shuf-btn reset">‚Ü∫</button>
              </div>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:30px; padding:20px; position:relative;">
              
              <div id="deck-1" style="display:flex; gap:8px;">
                  </div>

              <div id="deck-2" style="display:flex; gap:8px; opacity:0; transform:translateY(20px); transition:all 0.5s;">
                  </div>

              <div id="mem-alert" style="position:absolute; bottom:10px; background:#ef4444; color:white; font-size:11px; font-weight:bold; padding:4px 10px; border-radius:12px; opacity:0; transition:opacity 0.3s;">
                  ‚ö†Ô∏è MEMORY USAGE DOUBLED!
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">True randomness is impossible for standard computers; we use Pseudo-Random Number Generators (PRNG)</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .card-slot {
        width: 40px; height: 50px; background: #0f172a; border: 2px solid #334155; border-radius: 4px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        color: white; font-family: var(--mono); font-weight:bold; position: relative; transition: all 0.4s;
    }
    .card-slot.highlight { border-color: #3b82f6; background: #1e3a8a; box-shadow: 0 0 15px #3b82f6; z-index: 10; }
    .card-slot.moved { border-color: #334155; color: #475569; background: #1e293b; } /* Empty slot style */

    .shuf-btn { border: none; padding: 6px 12px; border-radius: 4px; font-size: 11px; font-weight: bold; cursor: pointer; color: white; transition: transform 0.1s; }
    .shuf-btn:active { transform: translateY(1px); }
    .shuf-btn.blue { background: #3b82f6; }
    .shuf-btn.red { background: #ef4444; }
    .shuf-btn.reset { background: #334155; }
  </style>

  <script>
    let nums = [1, 2, 3, 4, 5];
    const deck1 = document.getElementById('deck-1');
    const deck2 = document.getElementById('deck-2');
    
    initDeck();

    function initDeck() {
        deck1.innerHTML = '';
        deck2.innerHTML = '';
        nums.forEach(n => {
            deck1.innerHTML += `<div class="card-slot">${n}</div>`;
        });
        
        // Reset Visuals
        deck2.style.opacity = '0';
        document.getElementById('mem-use').innerText = "1x";
        document.getElementById('mem-use').style.color = "#22c55e";
        document.getElementById('mem-alert').style.opacity = "0";
    }

    async function shuffleInPlace() {
        resetShuffle();
        const slots = Array.from(deck1.children);
        
        // Perform 5 random swaps
        for(let k=0; k<5; k++) {
            const i = Math.floor(Math.random() * slots.length);
            let j = Math.floor(Math.random() * slots.length);
            while(i === j) j = Math.floor(Math.random() * slots.length); // Ensure different

            const s1 = slots[i];
            const s2 = slots[j];

            // Highlight
            s1.classList.add('highlight');
            s2.classList.add('highlight');

            await new Promise(r => setTimeout(r, 400));

            // Swap Logic (DOM)
            const t1 = s1.innerText;
            const t2 = s2.innerText;
            s1.innerText = t2;
            s2.innerText = t1;

            await new Promise(r => setTimeout(r, 200));

            s1.classList.remove('highlight');
            s2.classList.remove('highlight');
        }
    }

    async function shuffleNew() {
        resetShuffle();
        
        // 1. Show New Array Container
        deck2.style.opacity = '1';
        deck2.style.transform = 'translateY(0)';
        
        document.getElementById('mem-use').innerText = "2x";
        document.getElementById('mem-use').style.color = "#ef4444";
        document.getElementById('mem-alert').style.opacity = "1";

        const oldSlots = Array.from(deck1.children);
        const available = [...oldSlots]; // Copy
        
        // 2. Move items one by one
        while(available.length > 0) {
            // Pick random
            const rIdx = Math.floor(Math.random() * available.length);
            const slot = available[rIdx];
            
            // Highlight Source
            slot.classList.add('highlight');
            await new Promise(r => setTimeout(r, 200));
            
            // "Move" to Deck 2
            const val = slot.innerText;
            slot.classList.remove('highlight');
            slot.classList.add('moved'); // Gray out old
            slot.innerText = ""; // Clear old
            
            const newSlot = document.createElement('div');
            newSlot.className = 'card-slot highlight';
            newSlot.innerText = val;
            deck2.appendChild(newSlot);
            
            await new Promise(r => setTimeout(r, 200));
            newSlot.classList.remove('highlight');

            // Remove from available list
            available.splice(rIdx, 1);
        }
    }

    function resetShuffle() {
        nums = [1, 2, 3, 4, 5]; // Reset data
        deck2.innerHTML = '';
        deck2.style.opacity = '0';
        deck2.style.transform = 'translateY(20px)';
        document.getElementById('mem-use').innerText = "1x";
        document.getElementById('mem-use').style.color = "#22c55e";
        document.getElementById('mem-alert').style.opacity = "0";
        
        deck1.innerHTML = '';
        nums.forEach(n => {
            deck1.innerHTML += `<div class="card-slot">${n}</div>`;
        });
    }
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Operations</div>
      <div class="sub">Algorithms</div>
    </div>
    <span class="pill">The "Microsoft Way"</span>
  </div>
  
  <h2>Sort</h2>
  <p>We can use the built-in <code>Array.Sort</code>, but it's a "Black Box" operation.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.3fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:14px; padding:0; border:1px solid #334155; overflow:hidden;">
              <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">GenericArray.cs</div>
              <div style="padding:15px; line-height:1.6;">
                  <span style="color:#569cd6;">public void</span> Sort()<br>
                  {<br>
                  &nbsp;&nbsp;<span style="color:#6a9955;">// The Easy Way</span><br>
                  &nbsp;&nbsp;<span style="color:#4ec9b0;">Array</span>.Sort(array);<br>
                  }
              </div>
          </div>

          <div class="card" style="border-left:4px solid #f59e0b;">
              <h3>The Problem?</h3>
              <p>It works, <strong>but you learn nothing.</strong></p>
              <p class="muted" style="font-size:14px; margin-top:5px;">
                  Is it QuickSort? MergeSort? BubbleSort? You have no idea how it's actually doing its thing.
              </p>
          </div>

      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:0; overflow:hidden;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <span id="sort-status" style="font-family:var(--mono); font-size:11px; color:#94a3b8;">STATUS: UNSORTED</span>
              <div style="display:flex; gap:10px;">
                  <button onclick="scrambleSort()" style="background:#334155; border:none; color:white; border-radius:4px; padding:6px 10px; font-size:14px; font-weight:bold; cursor:pointer;">‚Ü∫</button>
                  <button onclick="runBlackBoxSort()" id="btn-sort" style="background:#3b82f6; border:none; color:white; border-radius:4px; padding:6px 15px; font-size:11px; font-weight:bold; cursor:pointer; letter-spacing:0.5px;">
                      ‚ñ∂ Array.Sort()
                  </button>
              </div>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:20px; position:relative;">
              
              <div id="sort-stage" style="display:flex; gap:8px;">
                  </div>

              <div id="black-box" style="position:absolute; inset:20px; background:#0f172a; border:2px dashed #475569; display:flex; flex-direction:column; align-items:center; justify-content:center; opacity:0; pointer-events:none; transition:opacity 0.3s; z-index:10;">
                  <div style="font-size:40px;">üì¶</div>
                  <div style="font-family:var(--mono); color:#cbd5e1; font-weight:bold; margin-top:10px;">INTERNAL LOGIC</div>
                  <div style="color:#64748b; font-size:10px;">(Hidden from Developer)</div>
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">We will implement our own Sorting Algorithms later to understand the "How"</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .k-slot {
        width: 45px; height: 60px; background: #0f172a; border: 2px solid #334155; border-radius: 6px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        color: white; font-family: var(--mono); font-weight:bold; font-size:16px; transition: all 0.3s;
    }
    .k-slot.sorted { border-color: #22c55e; background: #064e3b; }
    
    .shake-box { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
    @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
  </style>

  <script>
    let sortData = [45, 12, 89, 2, 33, 10];
    const sStage = document.getElementById('sort-stage');
    const bBox = document.getElementById('black-box');
    const sStatus = document.getElementById('sort-status');

    renderSort();

    function renderSort() {
        sStage.innerHTML = '';
        sortData.forEach(val => {
            sStage.innerHTML += `<div class="k-slot">${val}</div>`;
        });
    }

    function scrambleSort() {
        sortData = sortData.sort(() => Math.random() - 0.5);
        sStatus.innerText = "STATUS: UNSORTED";
        sStatus.style.color = "#94a3b8";
        renderSort();
    }

    async function runBlackBoxSort() {
        const btn = document.getElementById('btn-sort');
        btn.disabled = true;

        // 1. Lower Curtain
        bBox.style.opacity = '1';
        sStatus.innerText = "STATUS: SORTING (UNKNOWN METHOD)...";
        sStatus.style.color = "#f59e0b";
        
        await new Promise(r => setTimeout(r, 500));

        // 2. Shake (Simulate work)
        bBox.classList.add('shake-box');
        
        // 3. Do logic behind curtain
        sortData.sort((a,b) => a-b);
        renderSort(); // Render but hidden

        await new Promise(r => setTimeout(r, 800));
        bBox.classList.remove('shake-box');

        // 4. Reveal
        bBox.style.opacity = '0';
        sStatus.innerText = "STATUS: SORTED";
        sStatus.style.color = "#22c55e";
        
        // 5. Highlight Result
        document.querySelectorAll('.k-slot').forEach(el => el.classList.add('sorted'));
        
        btn.disabled = false;
    }
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Sorting</div>
    </div>
    <span class="pill">Bubble Sort</span>
  </div>
  
  <h2>Bubble Sort</h2>
  <p>A simple but inefficient algorithm where large values "bubble" to the top.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.3fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="border-left:4px solid var(--accent);">
              <h3>How it works</h3>
              <p>Repeatedly step through the list, compare adjacent elements, and <strong>swap</strong> them if they are in the wrong order.</p>
          </div>

         <div class="card" style="border-left: 4px solid #f59e0b; background: rgba(245, 158, 11, 0.1); padding: 15px; border-radius: 4px;">
    <h3 style="color: #f59e0b; margin: 0;">Performance: O(N¬≤)</h3>
    <ul style="font-size: 14px; margin-top: 10px; padding-left: 20px; color: #cbd5e1; line-height: 1.5;">
        <li><strong>Easy</strong> to implement.</li>
        <li><strong>Fairly Slow:</strong> Not suitable for large arrays.</li>
        <li><strong>Heavy Cost:</strong> Requires a huge number of memory swaps.</li>
    </ul>
</div>
          
      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:0; overflow:hidden;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <span id="b-status" style="font-family:var(--mono); font-size:11px; color:#94a3b8;">READY TO SORT</span>
              
              <div style="display:flex; gap:5px;">
                  <button onclick="stepBubble()" id="btn-step-b" style="background:#3b82f6; border:none; color:white; border-radius:4px; padding:6px 15px; font-size:11px; font-weight:bold; cursor:pointer;">
                      ‚ñ∂ STEP
                  </button>
                  <button onclick="autoBubble()" id="btn-auto-b" style="background:#22c55e; border:none; color:white; border-radius:4px; padding:6px 15px; font-size:11px; font-weight:bold; cursor:pointer;">
                      ‚è© AUTO
                  </button>
                  <button onclick="resetBubble()" style="background:#334155; border:none; color:white; border-radius:4px; padding:6px 10px; font-size:14px; font-weight:bold; cursor:pointer;">‚Ü∫</button>
              </div>
          </div>

          <div style="flex-grow:1; display:flex; align-items:flex-end; justify-content:center; gap:8px; padding:20px 20px 40px 20px; position:relative;">
              
              <div id="bubble-stage" style="display:flex; gap:10px; align-items:flex-end; height:100%;"></div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Notice how the largest unsorted value always moves to the far right</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .b-bar {
        width: 35px; background: #334155; border: 1px solid #475569; border-radius: 4px 4px 0 0;
        display: flex; align-items: flex-end; justify-content: center; padding-bottom: 5px;
        color: white; font-family: var(--mono); font-weight: bold; font-size: 12px;
        transition: all 0.2s; position: relative;
    }
    
    .b-bar.compare { background: #3b82f6; border-color: #60a5fa; box-shadow: 0 0 15px rgba(59, 130, 246, 0.5); z-index: 10; }
    .b-bar.swap { background: #ef4444; border-color: #fca5a5; transform: translateY(-10px); }
    .b-bar.sorted { background: #064e3b; border-color: #22c55e; opacity: 0.8; }

    .bar-val { margin-bottom: 5px; }
  </style>

  <script>
    let bData = [25, 10, 55, 5, 30, 15]; // Heights
    let i = 0;
    let j = 0;
    let isSorting = false;
    let timerB = null;

    // Init
    renderBars();

    function renderBars() {
        const stage = document.getElementById('bubble-stage');
        stage.innerHTML = '';
        bData.forEach((h, idx) => {
            // Visualize height by percentage relative to max (60)
            const height = (h / 60) * 100; 
            stage.innerHTML += `
                <div class="b-bar" id="bar-${idx}" style="height:${height}%">
                    <span class="bar-val">${h}</span>
                </div>`;
        });
    }

    function stepBubble() {
        const status = document.getElementById('b-status');
        const len = bData.length;

        // Reset highlights
        document.querySelectorAll('.b-bar').forEach(b => {
            b.classList.remove('compare', 'swap');
        });

        // Check if done pass
        if(i >= len - 1) {
            status.innerText = "SORT COMPLETE";
            status.style.color = "#22c55e";
            document.querySelectorAll('.b-bar').forEach(b => b.classList.add('sorted'));
            clearInterval(timerB);
            return;
        }

        // Highlight comparison
        const bar1 = document.getElementById(`bar-${j}`);
        const bar2 = document.getElementById(`bar-${j+1}`);
        bar1.classList.add('compare');
        bar2.classList.add('compare');

        // Logic
        if(bData[j] > bData[j+1]) {
            // SWAP NEEDED
            status.innerHTML = `Swap: ${bData[j]} > ${bData[j+1]}`;
            status.style.color = "#ef4444";
            
            // Visual Swap
            bar1.classList.add('swap');
            bar2.classList.add('swap');
            
            // Data Swap
            let temp = bData[j];
            bData[j] = bData[j+1];
            bData[j+1] = temp;
            
            // Re-render next frame (simplified for step logic)
            setTimeout(() => {
                 renderBars();
                 // Re-apply highlights to show result
                 document.getElementById(`bar-${j}`).classList.add('compare');
                 document.getElementById(`bar-${j+1}`).classList.add('compare');
            }, 300);
        } else {
            status.innerHTML = `OK: ${bData[j]} <= ${bData[j+1]}`;
            status.style.color = "#94a3b8";
        }

        // Increment
        j++;
        if(j >= len - 1 - i) {
            j = 0;
            // Mark end as sorted visual
            document.getElementById(`bar-${len - 1 - i}`).classList.add('sorted');
            i++;
        }
    }

    function autoBubble() {
        document.getElementById('btn-auto-b').disabled = true;
        document.getElementById('btn-step-b').disabled = true;
        timerB = setInterval(stepBubble, 600);
    }

    function resetBubble() {
        clearInterval(timerB);
        bData = [25, 10, 55, 5, 30, 15];
        i = 0;
        j = 0;
        renderBars();
        document.getElementById('b-status').innerText = "READY TO SORT";
        document.getElementById('b-status').style.color = "#94a3b8";
        document.getElementById('btn-auto-b').disabled = false;
        document.getElementById('btn-step-b').disabled = false;
    }
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Operations</div>
      <div class="sub">Deletion</div>
    </div>
    <span class="pill">Clear All</span>
  </div>
  
  <h2>Delete All Elements</h2>
  <p>In an array, this is trivial: Loop through and nullify everything.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.3fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:14px; padding:0; border:1px solid #334155; overflow:hidden;">
              <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">GenericArray.cs</div>
              <div style="padding:15px; line-height:1.6;">
                  <span style="color:#569cd6;">public void</span> Clear()<br>
                  {<br>
                  &nbsp;&nbsp;<span style="color:#569cd6;">for</span>(<span style="color:#569cd6;">int</span> i=0; i&lt;length; i++)<br>
                  &nbsp;&nbsp;{<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#6a9955;">// Just delete it. Done.</span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;array[i] = <span style="color:#569cd6;">null</span>;<br>
                  &nbsp;&nbsp;}<br>
                  &nbsp;&nbsp;count = 0;<br>
                  }
              </div>
          </div>

          <div class="card" style="border-left:4px solid #22c55e;">
              <h3>Simple Logic</h3>
              <p>"For every element in the array, delete it. There done. Enough thinking."</p>
          </div>

      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:0; overflow:hidden;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <span id="clr-status" style="font-family:var(--mono); font-size:11px; color:#94a3b8;">STATUS: DATA LOADED</span>
              
              <div style="display:flex; gap:10px;">
                  <button onclick="runClearAll()" id="btn-clr" style="background:#ef4444; border:none; color:white; border-radius:4px; padding:6px 15px; font-size:11px; font-weight:bold; cursor:pointer; letter-spacing:0.5px;">
                      üóë DELETE ALL
                  </button>
                  <button onclick="resetClearSim()" style="background:#334155; border:none; color:white; border-radius:4px; padding:6px 10px; font-size:14px; font-weight:bold; cursor:pointer;">‚Ü∫</button>
              </div>
          </div>

          <div style="flex-grow:1; display:flex; align-items:center; justify-content:center; gap:8px; padding:20px;" id="clr-stage">
              </div>

      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Even "trivial" clearing is an O(N) operation</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .clr-slot {
        width: 50px; height: 60px; background: #0f172a; border: 2px solid #334155; border-radius: 6px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        position: relative; transition: all 0.2s;
    }
    .clr-slot.filled { border-color: #22c55e; background: #064e3b; }
    .clr-slot.wiping { border-color: #ef4444; background: #ef4444; transform: scale(1.1); box-shadow: 0 0 15px #ef4444; }
    .clr-slot.empty { border-color: #475569; border-style: dashed; opacity: 0.4; }

    .clr-val { font-family: var(--mono); font-size: 14px; font-weight: bold; color: #fff; }
    .clr-idx { position: absolute; top: -15px; font-family: var(--mono); font-size: 10px; color: #64748b; }
  </style>

  <script>
    const clrData = ["A", "B", "C", "D", "E"];
    const clrStage = document.getElementById('clr-stage');
    const clrStatus = document.getElementById('clr-status');

    initClearSim();

    function initClearSim() {
        clrStage.innerHTML = '';
        clrData.forEach((val, i) => {
            clrStage.innerHTML += `
                <div class="clr-slot filled" id="c-slot-${i}">
                    <div class="clr-idx">${i}</div>
                    <div class="clr-val">${val}</div>
                </div>`;
        });
        clrStatus.innerText = "STATUS: DATA LOADED";
        clrStatus.style.color = "#94a3b8";
        document.getElementById('btn-clr').disabled = false;
        document.getElementById('btn-clr').style.opacity = 1;
    }

    async function runClearAll() {
        const btn = document.getElementById('btn-clr');
        btn.disabled = true;
        btn.style.opacity = 0.5;
        
        clrStatus.innerText = "STATUS: CLEARING O(N)...";
        clrStatus.style.color = "#ef4444";

        for(let i=0; i<clrData.length; i++) {
            const slot = document.getElementById(`c-slot-${i}`);
            
            // Highlight Wiping
            slot.classList.remove('filled');
            slot.classList.add('wiping');
            
            await new Promise(r => setTimeout(r, 200));
            
            // Set Null
            slot.classList.remove('wiping');
            slot.classList.add('empty');
            slot.querySelector('.clr-val').innerText = "null";
        }

        clrStatus.innerText = "STATUS: EMPTY (Count = 0)";
        clrStatus.style.color = "#cbd5e1";
    }

    function resetClearSim() {
        initClearSim();
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Memory Management</div>
      <div class="sub">Concepts</div>
    </div>
    <span class="pill">References</span>
  </div>
  
  <h2>Delete Structure vs. Delete Objects</h2>
  <p>A list is often just a collection of <strong>References</strong> (Pointers), not the objects themselves.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.3fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
          <div class="card" style="border-left:4px solid #3b82f6;">
              <h3>The Analogy</h3>
              <p>A <strong>Name</strong> is a reference to a person, but it is not the person.</p>
              <div style="margin-top:10px; font-size:13px; color:#cbd5e1; background:#1e293b; padding:10px; border-radius:6px;">
                  "If you delete a list of employee names, the actual employees don't disappear. They are just... unlisted."
              </div>
          </div>

          <div class="card" style="border-left:4px solid var(--accent);">
              <h3>Memory Reality</h3>
              <ul style="font-size:14px; margin-top:5px; padding-left:20px; color:#94a3b8;">
                  <li><strong>Structure:</strong> The Array/List (Holds Addresses).</li>
                  <li><strong>Heap:</strong> The Memory Cloud (Holds Data).</li>
              </ul>
          </div>
          
      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:0; overflow:hidden;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <span id="ref-status" style="font-family:var(--mono); font-size:11px; color:#94a3b8;">STATUS: LINKED</span>
              
              <div style="display:flex; gap:10px;">
                  <button onclick="deleteStructure()" id="btn-del-struct" style="background:#ef4444; border:none; color:white; border-radius:4px; padding:6px 15px; font-size:11px; font-weight:bold; cursor:pointer; letter-spacing:0.5px;">
                      üóë DELETE THE LIST
                  </button>
                  <button onclick="resetRefSim()" style="background:#334155; border:none; color:white; border-radius:4px; padding:6px 10px; font-size:14px; font-weight:bold; cursor:pointer;">‚Ü∫</button>
              </div>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; gap:20px; padding:20px; position:relative;">
              
              <div id="layer-list" style="border:1px dashed #64748b; padding:10px; border-radius:8px; transition:all 0.5s;">
                  <div style="font-size:10px; color:#94a3b8; font-weight:bold; margin-bottom:5px;">THE STRUCTURE (List&lt;Employee&gt;)</div>
                  <div style="display:flex; gap:10px; justify-content:center;">
                      <div class="ref-slot" onmouseenter="hl(1)" onmouseleave="dl(1)">Ref #1</div>
                      <div class="ref-slot" onmouseenter="hl(2)" onmouseleave="dl(2)">Ref #2</div>
                      <div class="ref-slot" onmouseenter="hl(3)" onmouseleave="dl(3)">Ref #3</div>
                  </div>
              </div>

              <div id="layer-arrows" style="text-align:center; color:#475569; font-size:18px; transition:opacity 0.3s;">
                  ‚¨á ‚¨á ‚¨á
              </div>

              <div style="background:#0f172a; padding:15px; border-radius:8px; flex-grow:1; display:flex; flex-direction:column;">
                  <div style="font-size:10px; color:#64748b; font-weight:bold; margin-bottom:10px;">THE HEAP (Actual Objects)</div>
                  <div style="display:flex; gap:15px; justify-content:center; flex-wrap:wrap;">
                      
                      <div class="obj-node" id="obj-1">
                          <div class="avatar">üë®‚Äçüíº</div>
                          <div class="name">Emp #1</div>
                      </div>

                      <div class="obj-node" id="obj-2">
                          <div class="avatar">üë©‚Äçüíª</div>
                          <div class="name">Emp #2</div>
                      </div>

                      <div class="obj-node" id="obj-3">
                          <div class="avatar">üë∑</div>
                          <div class="name">Emp #3</div>
                      </div>

                  </div>
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Deleting the "Map" does not destroy the "Territory"</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .ref-slot {
        width: 60px; height: 30px; background: #3b82f6; border-radius: 4px; 
        display: flex; align-items: center; justify-content: center; 
        color: white; font-size: 10px; font-weight:bold; cursor: pointer; transition: transform 0.2s;
        font-family: var(--mono);
    }
    .ref-slot:hover { transform: translateY(-3px); background: #60a5fa; }

    .obj-node {
        width: 60px; height: 70px; background: #1e293b; border: 2px solid #334155; border-radius: 8px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        transition: all 0.3s;
    }
    .obj-node.active { border-color: #22c55e; background: #064e3b; transform: scale(1.1); }
    .obj-node.alive { animation: bounce 1s infinite; border-color: #22c55e; }

    .avatar { font-size: 24px; margin-bottom: 5px; }
    .name { font-size: 10px; color: #cbd5e1; font-family: var(--mono); }

    .structure-deleted { opacity: 0; transform: translateY(-20px); pointer-events: none; }
    
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
  </style>

  <script>
    function hl(id) {
        document.getElementById(`obj-${id}`).classList.add('active');
    }
    function dl(id) {
        document.getElementById(`obj-${id}`).classList.remove('active');
    }

    function deleteStructure() {
        const list = document.getElementById('layer-list');
        const arrows = document.getElementById('layer-arrows');
        const btn = document.getElementById('btn-del-struct');
        const status = document.getElementById('ref-status');

        // 1. Hide List
        list.classList.add('structure-deleted');
        arrows.style.opacity = '0';
        
        // 2. Update Status
        status.innerText = "STRUCTURE DESTROYED";
        status.style.color = "#ef4444";
        btn.disabled = true;
        btn.style.opacity = 0.5;

        // 3. Animate Survival
        setTimeout(() => {
            document.querySelectorAll('.obj-node').forEach(node => {
                node.classList.add('alive');
            });
            status.innerHTML = "OBJECTS ARE <span style='color:#22c55e'>ALIVE</span> (ORPHANED)";
        }, 500);
    }

    function resetRefSim() {
        const list = document.getElementById('layer-list');
        const arrows = document.getElementById('layer-arrows');
        const btn = document.getElementById('btn-del-struct');
        const status = document.getElementById('ref-status');

        list.classList.remove('structure-deleted');
        arrows.style.opacity = '1';
        
        document.querySelectorAll('.obj-node').forEach(node => {
            node.classList.remove('alive');
        });

        status.innerText = "STATUS: LINKED";
        status.style.color = "#94a3b8";
        btn.disabled = false;
        btn.style.opacity = 1;
    }
  </script>
</section>
<section class="slide">
  <div style="height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center;">
      
      <div style="font-family:var(--mono); color:var(--accent); font-weight:bold; letter-spacing:2px; margin-bottom:20px; text-transform:uppercase;">
          System.Collections
      </div>

      <h1 style="font-size:60px; margin:0; line-height:1.1; color:var(--ink);">
          The .NET Built-in<br>
          <span style="color:#3b82f6;">ArrayList</span>
      </h1>

      <div style="width:100px; height:4px; background:var(--gradient); margin:30px 0;"></div>

      <p style="font-size:24px; color:#64748b; max-width:600px; line-height:1.5;">
          ".NET provides a built-in data structure called the <strong style="color:var(--ink);">ArrayList</strong>, a list that uses an array."
      </p>

  </div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Lists</div>
      <div class="sub">System.Collections</div>
    </div>
    <span class="pill">Code Example</span>
  </div>
  
  <h2>ArrayList Specification</h2>
  <p>How to initialize, add data, and inspect an ArrayList.</p>
  
  <div class="grid-2" style="grid-template-columns: 1.1fr 0.9fr; gap:30px; height:60%; margin-top:10px;">
      
      <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:13px; padding:0; border:1px solid #334155; overflow:hidden; display:flex; flex-direction:column;">
          <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">SamplesArrayList.cs</div>
          <div style="padding:15px; line-height:1.6; flex-grow:1;">
              <span style="color:#c586c0;">using</span> System;<br>
              <span style="color:#c586c0;">using</span> System.Collections;<br><br>
              <span style="color:#6a9955;">// Create new ArrayList</span><br>
              <span style="color:#4ec9b0;">ArrayList</span> myAL = <span style="color:#569cd6;">new</span> <span style="color:#4ec9b0;">ArrayList</span>();<br>
              myAL.Add(<span style="color:#ce9178;">"Hello"</span>);<br>
              myAL.Add(<span style="color:#ce9178;">"World"</span>);<br>
              myAL.Add(<span style="color:#ce9178;">"!"</span>);<br><br>
              <span style="color:#6a9955;">// Inspect Properties</span><br>
              <span style="color:#4ec9b0;">Console</span>.WriteLine(<span style="color:#ce9178;">"Count:    "</span> + myAL.Count);<br>
              <span style="color:#4ec9b0;">Console</span>.WriteLine(<span style="color:#ce9178;">"Capacity: "</span> + myAL.Capacity);
          </div>
          <button onclick="runSpec()" id="btn-spec" style="margin:10px; padding:8px; background:#22c55e; border:none; color:white; border-radius:4px; font-weight:bold; cursor:pointer;">
              ‚ñ∂ RUN CODE
          </button>
      </div>

      <div style="display:flex; flex-direction:column; gap:20px;">
          
          <div class="card" style="background:#0f172a; border:1px solid #334155; padding:15px; font-family:var(--mono); font-size:12px; height:40%;">
              <div style="color:#64748b; font-weight:bold; margin-bottom:10px; border-bottom:1px solid #334155; padding-bottom:5px;">TERMINAL OUTPUT</div>
              <div id="spec-out">
                  <span class="cursor">_</span>
              </div>
          </div>

          <div class="card" style="background:#1e293b; border:1px solid #334155; flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center;">
              <div style="font-size:11px; color:#94a3b8; font-weight:bold; margin-bottom:15px;">INTERNAL MEMORY STATE</div>
              
              <div style="display:flex; gap:5px;" id="spec-mem">
                  <div class="mem-ph">?</div>
                  <div class="mem-ph">?</div>
                  <div class="mem-ph">?</div>
                  <div class="mem-ph">?</div>
              </div>

              <div id="state-lbl" style="margin-top:15px; font-size:12px; color:#cbd5e1; opacity:0;">
                  Count: 3 | Capacity: 4
              </div>
          </div>

      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Note: Capacity (4) is often larger than Count (3) to allow growth</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .cursor { animation: blink 1s infinite; }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    .mem-ph {
        width: 45px; height: 55px; border: 2px dashed #475569; border-radius: 6px;
        display: flex; align-items: center; justify-content: center; color: #475569; font-size: 14px;
    }
    
    .al-slot {
        width: 45px; height: 55px; background: #0f172a; border: 2px solid #334155; border-radius: 6px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        color: white; font-family: var(--mono); font-weight:bold; font-size: 12px; position: relative; animation: popIn 0.3s;
    }
    .al-slot.empty { opacity: 0.5; border-style: dashed; }
    
    .al-idx { position: absolute; top: -15px; font-family: var(--mono); font-size: 9px; color: #64748b; }
  </style>

  <script>
    async function runSpec() {
        const btn = document.getElementById('btn-spec');
        const out = document.getElementById('spec-out');
        const mem = document.getElementById('spec-mem');
        const lbl = document.getElementById('state-lbl');
        
        btn.disabled = true;
        btn.style.opacity = 0.5;
        out.innerHTML = '';
        
        // Step 1: Initialize
        out.innerHTML += `<div style="color:#cbd5e1">> myAL = new ArrayList();</div>`;
        mem.innerHTML = ''; 
        // Default capacity usually starts at 0 then 4 on first add, let's show 4 for demo
        for(let i=0; i<4; i++) {
            mem.innerHTML += `<div class="al-slot empty"><div class="al-idx">${i}</div>null</div>`;
        }
        await new Promise(r => setTimeout(r, 600));

        // Step 2: Add Data
        const data = ["Hello", "World", "!"];
        for(let i=0; i<data.length; i++) {
            out.innerHTML += `<div style="color:#cbd5e1">> myAL.Add("${data[i]}");</div>`;
            
            // Visual Update
            const slots = mem.children;
            slots[i].classList.remove('empty');
            slots[i].innerHTML = `<div class="al-idx">${i}</div>${data[i]}`;
            slots[i].style.borderColor = "#3b82f6";
            slots[i].style.background = "#1e3a8a";
            
            await new Promise(r => setTimeout(r, 500));
        }

        // Step 3: Print Stats
        out.innerHTML += `<div style="margin-top:10px; color:#22c55e;">Count:    3</div>`;
        out.innerHTML += `<div style="color:#22c55e;">Capacity: 4</div>`;
        out.innerHTML += `<div class="cursor">_</div>`;

        lbl.style.opacity = 1;
    }
  </script>
</section>


<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Lists</div>
      <div class="sub">ArrayList</div>
    </div>
    <span class="pill">Code Specification</span>
  </div>
  
  <h2>ArrayList Specification</h2>
  <p>Analyzing the relationship between <strong>Count</strong> and <strong>Capacity</strong>.</p>
  
  <div class="grid-2" style="grid-template-columns: 1.1fr 0.9fr; gap:30px; height:65%; margin-top:10px;">
      
      <div class="card" style="background:#1e293b; color:#d4d4d4; font-family:var(--mono); font-size:12px; padding:0; border:1px solid #334155; display:flex; flex-direction:column; overflow:hidden;">
          <div style="padding:8px 15px; background:#0f172a; border-bottom:1px solid #334155; font-size:10px; font-weight:bold; color:#64748b;">Program.cs</div>
          <div style="padding:15px; line-height:1.6; flex-grow:1;">
              <span style="color:#569cd6;">ArrayList</span> myAL = <span style="color:#569cd6;">new</span> <span style="color:#4ec9b0;">ArrayList</span>();<br>
              myAL.Add(<span style="color:#ce9178;">"Hello"</span>);<br>
              myAL.Add(<span style="color:#ce9178;">"World"</span>);<br>
              myAL.Add(<span style="color:#ce9178;">"!"</span>);<br><br>
              <span style="color:#6a9955;">// The Output?</span><br>
              <span style="color:#4ec9b0;">Console</span>.WriteLine(<span style="color:#ce9178;">"Count: "</span> + myAL.Count);<br>
              <span style="color:#4ec9b0;">Console</span>.WriteLine(<span style="color:#ce9178;">"Capacity: "</span> + myAL.Capacity);
          </div>
      </div>

      <div style="display:flex; flex-direction:column; gap:20px;">
          
          <div class="card" style="background:#0f172a; border:1px solid #334155; padding:15px; font-family:var(--mono); font-size:13px;">
              <div style="color:#64748b; font-size:10px; margin-bottom:5px;">TERMINAL</div>
              <div style="color:#cbd5e1;">myAL</div>
              <div style="color:#22c55e;">&nbsp;&nbsp;Count:&nbsp;&nbsp;&nbsp;&nbsp;3</div>
              <div style="color:#f59e0b;">&nbsp;&nbsp;Capacity:&nbsp;4</div>
              <div style="color:#cbd5e1;">&nbsp;&nbsp;Values:&nbsp;&nbsp;&nbsp;Hello World !</div>
          </div>

          <div class="card" style="background:#1e293b; border:1px solid #334155; flex-grow:1; position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center;">
              
              <div style="font-size:10px; color:#94a3b8; margin-bottom:10px;">MEMORY VISUALIZATION</div>
              
              <div style="display:flex; gap:5px;">
                  <div class="spec-slot filled">Hello</div>
                  <div class="spec-slot filled">World</div>
                  <div class="spec-slot filled">!</div>
                  <div class="spec-slot empty">null</div>
              </div>

              <div style="margin-top:15px; display:flex; gap:20px; font-size:11px; font-family:var(--mono);">
                  <div style="color:#22c55e;">‚óè Count (3)</div>
                  <div style="color:#f59e0b;">‚óè Capacity (4)</div>
              </div>

          </div>

      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">Capacity defaults to 4 in .NET Framework to minimize resizing</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .spec-slot {
        width: 50px; height: 60px; border-radius: 6px; display: flex; align-items: center; justify-content: center;
        font-family: var(--mono); font-size: 11px; font-weight: bold;
    }
    .spec-slot.filled { background: #1e3a8a; border: 2px solid #3b82f6; color: white; }
    .spec-slot.empty { background: #1e293b; border: 2px dashed #f59e0b; color: #64748b; opacity: 0.8; }
  </style>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Concepts</div>
      <div class="sub">Object Oriented Design</div>
    </div>
    <span class="pill">Encapsulation</span>
  </div>
  
  <h2>Classes and Encapsulation</h2>
  <p>Should <code>Main()</code> manage memory? No. Good classes manage themselves.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1.2fr; gap:30px; height:60%; margin-top:10px;">
      
      <div style="display:flex; flex-direction:column; gap:20px; justify-content:center;">
          
      <div class="card" style="border-left: 4px solid #f59e0b; background: rgba(245, 158, 11, 0.05); padding: 15px; border-radius: 4px; margin-bottom: 20px;">
    <h3 style="color: #f59e0b; margin: 0; font-size: 1.1rem;">The Question</h3>
    <p style="margin: 8px 0; color: #f8fafc;">How much should be exposed to the outside world?</p>
    <ul style="font-size: 13px; color: #cbd5e1; margin-top: 5px; padding-left: 20px; line-height: 1.4;">
        <li>Should <code style="color: #fbcfe8;">Main</code> grow the array?</li>
        <li>Should <code style="color: #fbcfe8;">Main</code> handle printing logic?</li>
    </ul>
</div>

<div class="card" style="border-left: 4px solid #22c55e; background: rgba(34, 197, 94, 0.05); padding: 15px; border-radius: 4px;">
    <h3 style="color: #22c55e; margin: 0; font-size: 1.1rem;">The Ideal: Independence</h3>
    <p style="margin: 8px 0; color: #f8fafc;">The collection should function <strong>independently</strong>.</p>
    <div style="font-size: 12px; color: #94a3b8; margin-top: 10px; padding: 8px; border-top: 1px solid rgba(148, 163, 184, 0.2); font-style: italic;">
        "The calling function has no idea about the details. Like driving a car without knowing how ABS works."
    </div>
</div>
      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:0; overflow:hidden;">
          
          <div style="background:#0f172a; padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between; align-items:center;">
              <div style="display:flex; gap:10px;">
                  <button onclick="setMode('bad')" id="btn-bad" style="opacity:0.5; background:#ef4444; border:none; color:white; border-radius:4px; padding:4px 10px; font-size:10px; font-weight:bold; cursor:pointer;">MANUAL (No Encapsulation)</button>
                  <button onclick="setMode('good')" id="btn-good" style="background:#22c55e; border:none; color:white; border-radius:4px; padding:4px 10px; font-size:10px; font-weight:bold; cursor:pointer;">AUTO (Encapsulated)</button>
              </div>
          </div>

          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:20px; padding:20px;">
              
              <div id="encap-engine" style="display:flex; gap:5px; padding:10px; border:2px dashed #475569; border-radius:8px; transition:all 0.3s;">
                  <div class="e-slot">A</div>
                  <div class="e-slot">B</div>
                  <div class="e-slot filled">C</div>
              </div>

              <div id="encap-msg" style="height:20px; font-size:12px; color:#cbd5e1; font-family:var(--mono);">
                  System Ready.
              </div>

              <div style="display:flex; gap:10px;">
                  <button onclick="manualGrow()" id="btn-grow-man" style="display:none; background:#f59e0b; border:none; color:white; padding:8px 15px; border-radius:4px; font-weight:bold; cursor:pointer;">üîß Grow Array</button>
                  <button onclick="tryAdd()" class="action-btn" style="background:#3b82f6;">‚ûï Add Item</button>
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">A "Black Box" implementation allows the internal logic to change without breaking Main</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .e-slot { width: 40px; height: 40px; background: #1e3a8a; border: 1px solid #3b82f6; display:grid; place-items:center; color:white; font-family:var(--mono); }
    .e-slot.filled { background: #ef4444; border-color: #fca5a5; } /* Represents 'full' or 'last' */
  </style>

  <script>
    let mode = 'good';
    let eCap = 3;
    let eCount = 3;

    function setMode(m) {
        mode = m;
        eCap = 3; eCount = 3;
        const eng = document.getElementById('encap-engine');
        eng.innerHTML = `<div class="e-slot">A</div><div class="e-slot">B</div><div class="e-slot filled">C</div>`;
        document.getElementById('encap-msg').innerText = "System Ready.";
        document.getElementById('encap-msg').style.color = "#cbd5e1";
        
        document.getElementById('btn-bad').style.opacity = m === 'bad' ? 1 : 0.5;
        document.getElementById('btn-good').style.opacity = m === 'good' ? 1 : 0.5;
        document.getElementById('btn-grow-man').style.display = m === 'bad' ? 'block' : 'none';
        
        // Visual cues
        if(m==='good') eng.style.borderColor = "#22c55e";
        else eng.style.borderColor = "#ef4444";
    }

    function manualGrow() {
        eCap++;
        const div = document.createElement('div');
        div.className = 'e-slot';
        div.style.opacity = '0.5';
        div.style.borderStyle = 'dashed';
        document.getElementById('encap-engine').appendChild(div);
        document.getElementById('encap-msg').innerText = "Manual Growth: Capacity increased.";
        document.getElementById('encap-msg').style.color = "#f59e0b";
    }

    function tryAdd() {
        const eng = document.getElementById('encap-engine');
        
        if (eCount >= eCap) {
            if (mode === 'bad') {
                document.getElementById('encap-msg').innerText = "CRASH: IndexOutOfRange! You forgot to Grow.";
                document.getElementById('encap-msg').style.color = "#ef4444";
                eng.style.animation = "shake 0.4s";
                setTimeout(()=>eng.style.animation="", 400);
            } else {
                // Auto Grow
                eCap++;
                const div = document.createElement('div');
                div.className = 'e-slot';
                div.innerText = "D";
                div.style.background = "#22c55e"; // Success color
                eng.appendChild(div);
                eCount++;
                document.getElementById('encap-msg').innerText = "Success: System auto-scaled.";
                document.getElementById('encap-msg').style.color = "#22c55e";
            }
        } else {
            // Space exists (Manual mode after growing)
            const slots = eng.children;
            slots[eCount].innerText = "D";
            slots[eCount].style.opacity = "1";
            slots[eCount].style.borderStyle = "solid";
            eCount++;
            document.getElementById('encap-msg').innerText = "Success: Item Added.";
        }
    }
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Concepts</div>
      <div class="sub">Logic</div>
    </div>
    <span class="pill">Comparison</span>
  </div>
  
  <h2>The Comparer Dilemma</h2>
  <p>Primitives are easy. Objects are ambiguous.</p>
  
  <div class="grid-2" style="grid-template-columns: 1fr 1fr; gap:30px; height:60%; margin-top:10px;">
      
      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:20px;">
          <h3 style="color:#22c55e; border-bottom:1px solid #334155; padding-bottom:10px; margin-bottom:20px;">Primitives (Built-in)</h3>
          
          <div class="compare-row">
              <div class="c-box">5</div>
              <div class="c-op">==</div>
              <div class="c-box">10</div>
              <div class="c-res false">False</div>
          </div>

          <div class="compare-row">
              <div class="c-box">"A"</div>
              <div class="c-op">==</div>
              <div class="c-box">"A"</div>
              <div class="c-res true">True</div>
          </div>

          <div style="margin-top:auto; font-size:12px; color:#94a3b8;">
              C# knows how to compare values automatically.
          </div>
      </div>

      <div class="card" style="background:#1e293b; border:1px solid #334155; display:flex; flex-direction:column; padding:20px; position:relative; overflow:hidden;">
          <h3 style="color:#ef4444; border-bottom:1px solid #334155; padding-bottom:10px; margin-bottom:20px;">Objects (Ambiguous)</h3>
          
          <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:15px;">
              
              <div style="display:flex; align-items:center; gap:10px;">
                  <div class="obj-box">üöó<br><span style="font-size:10px;">Car 1</span></div>
                  <div class="c-op">==</div>
                  <div class="obj-box">üöô<br><span style="font-size:10px;">Car 2</span></div>
              </div>

              <button onclick="runObjComp()" id="btn-comp" style="background:#3b82f6; color:white; border:none; padding:8px 20px; border-radius:4px; font-weight:bold; cursor:pointer;">
                  COMPARE
              </button>

              <div id="comp-res" style="height:40px; text-align:center; font-size:12px; color:#cbd5e1; opacity:0; transition:opacity 0.3s;">
                  <span style="font-size:20px;">ü§î</span><br>
                  Compare what? Model? Year? Color?
              </div>

          </div>
      </div>
  </div>
  
  <div class="slide-footer">
    <div class="muted">To compare objects, we must define the rules (using Interfaces like IEquatable)</div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <style>
    .compare-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; background: #0f172a; padding: 10px; border-radius: 6px; }
    .c-box { font-family: var(--mono); color: #d4d4d4; font-weight: bold; }
    .c-op { color: #64748b; font-weight: bold; }
    .c-res { font-size: 11px; font-weight: bold; padding: 2px 6px; border-radius: 4px; }
    .c-res.true { background: #064e3b; color: #6ee7b7; }
    .c-res.false { background: #450a0a; color: #fca5a5; }

    .obj-box { width: 50px; height: 50px; background: #334155; border: 1px solid #475569; border-radius: 6px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 20px; }
  </style>

  <script>
    function runObjComp() {
        const btn = document.getElementById('btn-comp');
        const res = document.getElementById('comp-res');
        
        btn.disabled = true;
        btn.innerText = "Thinking...";
        
        setTimeout(() => {
            res.style.opacity = 1;
            btn.innerText = "COMPARE";
            btn.disabled = false;
        }, 500);
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Data Structures</div>
      <div class="sub">Review</div>
    </div>
    <span class="pill">The API</span>
  </div>

  <h2>Key List Operations</h2>
  <p style="margin-bottom:20px; color:#94a3b8;">A robust List class must provide these capabilities. Click to see the method signature.</p>

  <div class="grid-2" style="grid-template-columns: 1fr 1fr; gap:20px; height:70%;">
    
    <div style="display:grid; grid-template-columns: repeat(2, 1fr); gap:10px; align-content:start;">
      <button class="op-btn" onclick="showOp('create')">Create</button>
      <button class="op-btn" onclick="showOp('grow')">Grow</button>
      <button class="op-btn" onclick="showOp('add')">AddOne</button>
      <button class="op-btn" onclick="showOp('insert')">InsertOne</button>
      <button class="op-btn" onclick="showOp('delete')">DeleteOne</button>
      <button class="op-btn" onclick="showOp('find')">Find/Search</button>
      <button class="op-btn" onclick="showOp('print')">PrintAll</button>
      <button class="op-btn" onclick="showOp('sort')">Sort</button>
    </div>

    <div style="background:#1e293b; border-radius:12px; border:1px solid #334155; padding:20px; display:flex; flex-direction:column; justify-content:center;">
      <div id="op-display" style="opacity:0; transition:opacity 0.3s;">
        <div id="op-title" style="font-size:12px; font-weight:bold; color:#f59e0b; text-transform:uppercase; letter-spacing:1px; margin-bottom:10px;">SELECT AN OPERATION</div>
        <div class="code-block" style="background:#0f172a; padding:15px; border-radius:8px; font-family:'Fira Code', monospace; color:#e2e8f0; font-size:14px; border-left:3px solid #f59e0b;">
          <span id="op-code">...</span>
        </div>
        <div id="op-desc" style="margin-top:15px; color:#cbd5e1; font-size:14px; line-height:1.5;">
          Select an operation from the left to view implementation details.
        </div>
      </div>
      
      <div id="op-placeholder" style="text-align:center; color:#64748b;">
        <span style="font-size:40px;">üëà</span><br>Select an operation
      </div>
    </div>
  </div>

  <style>
    .op-btn {
      background: #f1f5f9; border: 1px solid #cbd5e1; color: #334155;
      padding: 10px; border-radius: 6px; cursor: pointer; font-weight: bold;
      transition: all 0.2s; text-align: left;
    }
    .op-btn:hover { background: #e2e8f0; transform: translateX(2px); }
    .op-btn:focus { outline: none; border-color: #f59e0b; background: #fff7ed; }
  </style>

  <script>
    const ops = {
      'create': { code: 'public List<T>() { ... }', desc: 'Initializes the internal array and sets Count to 0.' },
      'grow':   { code: 'private void Grow() { ... }', desc: 'Doubles the size of the internal array when full. Copies elements over.' },
      'add':    { code: 'public void Add(T item)', desc: 'Places item at the end. Calls Grow() if needed.' },
      'insert': { code: 'public void Insert(int index, T item)', desc: 'Shifts elements to make space, then places item at specific index.' },
      'delete': { code: 'public bool Remove(T item)', desc: 'Finds the item, removes it, and shifts remaining elements to close the gap.' },
      'find':   { code: 'public int IndexOf(T item)', desc: 'Iterates through the list to find a match and returns the index.' },
      'print':  { code: 'public void PrintAll()', desc: 'Uses a foreach loop or for loop to display all elements.' },
      'sort':   { code: 'public void Sort()', desc: 'Rearranges elements using IComparable logic.' }
    };

    function showOp(key) {
      document.getElementById('op-placeholder').style.display = 'none';
      const disp = document.getElementById('op-display');
      disp.style.opacity = 0;
      
      setTimeout(() => {
        document.getElementById('op-title').innerText = key;
        document.getElementById('op-code').innerText = ops[key].code;
        document.getElementById('op-desc').innerText = ops[key].desc;
        disp.style.opacity = 1;
      }, 100);
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Encapsulation</div>
      <div class="sub">Access Modifiers</div>
    </div>
    <span class="pill">Quiz</span>
  </div>

  <h2>Public or Private?</h2>
  <p style="margin-bottom:20px;">Decide which operations belong to the <strong>Interface (Client)</strong> and which belong to the <strong>Implementation (Internal)</strong>.</p>

  <div class="grid-2" style="grid-template-columns: 1fr; height:75%; overflow-y:auto;">
    
    <div style="background:white; border-radius:12px; padding:5px;">
      <table style="width:100%; border-collapse:collapse;">
        <thead>
          <tr style="border-bottom:2px solid #e2e8f0; color:#64748b; font-size:12px; text-transform:uppercase;">
            <th style="padding:10px; text-align:left;">Operation</th>
            <th style="padding:10px; text-align:center;">Your Guess</th>
            <th style="padding:10px; text-align:left;">The Reality</th>
          </tr>
        </thead>
        <tbody id="quiz-table">
          </tbody>
      </table>
    </div>

  </div>

  <style>
    .guess-btn {
      border: none; padding: 5px 10px; border-radius: 4px; font-size: 11px; font-weight: bold; cursor: pointer; margin: 0 2px; opacity: 0.6;
    }
    .guess-btn.pub { background: #dbeafe; color: #1e40af; }
    .guess-btn.priv { background: #fee2e2; color: #991b1b; }
    .guess-btn:hover { opacity: 1; transform: scale(1.05); }
    .guess-btn.selected { opacity: 1; border: 2px solid currentColor; }

    .reveal-box {
      font-size: 12px; color: #334155; display: none; padding: 5px; border-radius: 4px;
    }
    .reveal-box.show { display: block; animation: fadeIn 0.3s; }
    @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
  </style>

  <script>
    const items = [
      { name: "AddOne / InsertOne", type: "Public", reason: "The user needs to put data IN." },
      { name: "Grow / Resize", type: "Private", reason: "<strong>Critical:</strong> The user should never manually resize memory. This happens automatically inside Add()." },
      { name: "Find / Search", type: "Public", reason: "The user needs to retrieve data." },
      { name: "Sort", type: "Public", reason: "A service provided to the user." },
      { name: "Internal Array Access", type: "Private", reason: "We hide the raw array to prevent invalid index errors." },
    ];

    const table = document.getElementById('quiz-table');

    items.forEach((item, idx) => {
      const row = document.createElement('tr');
      row.style.borderBottom = "1px solid #f1f5f9";
      
      row.innerHTML = `
        <td style="padding:12px; font-weight:bold; color:#334155;">${item.name}</td>
        <td style="padding:12px; text-align:center;">
          <button class="guess-btn pub" onclick="guess(${idx}, 'Public')">Public</button>
          <button class="guess-btn priv" onclick="guess(${idx}, 'Private')">Private</button>
        </td>
        <td style="padding:12px;">
          <div id="reveal-${idx}" class="reveal-box">
             <span style="font-weight:bold; color:${item.type === 'Public' ? '#2563eb' : '#dc2626'}">${item.type}</span>: ${item.reason}
          </div>
        </td>
      `;
      table.appendChild(row);
    });

    function guess(idx, type) {
      // Show reveal
      document.getElementById(`reveal-${idx}`).classList.add('show');
    }
  </script>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Next Class</div>
      <div class="sub">Preview</div>
    </div>
    <span class="pill">Topic: Linked Lists</span>
  </div>

  <h2>Same Features, Different Engine</h2>
  <p style="margin-bottom:30px;">Next time: We implement the exact same operations, but with a completely different memory layout.</p>

  <div class="grid-2" style="grid-template-columns: 1fr 1fr; gap:40px; height:60%;">
    
    <div style="text-align:center; opacity:0.6;">
      <h3 style="color:#64748b; font-size:16px;">What we just did (Array)</h3>
      <div style="background:#f1f5f9; padding:20px; border-radius:12px; margin-top:10px; display:flex; gap:2px; justify-content:center;">
        <div class="mem-block">10</div>
        <div class="mem-block">20</div>
        <div class="mem-block">30</div>
        <div class="mem-block">40</div>
        <div class="mem-block empty"></div>
      </div>
      <p style="font-size:12px; color:#94a3b8; margin-top:10px;">Contiguous Memory. Fast read, slow resize.</p>
    </div>

    <div style="text-align:center;">
      <h3 style="color:#22c55e; font-size:16px;">Coming Up (Linked List)</h3>
      <div style="background:#f0fdf4; padding:20px; border-radius:12px; margin-top:10px; border:2px dashed #22c55e; position:relative; height:80px;">
        
        <div class="node" style="left:10px;">10</div>
        <div class="arrow" style="left:50px;">‚ûú</div>
        
        <div class="node" style="left:80px;">20</div>
        <div class="arrow" style="left:120px;">‚ûú</div>

        <div class="node" style="left:150px;">30</div>
        
      </div>
      <p style="font-size:12px; color:#166534; margin-top:10px;">Scattered Memory. Nodes point to each other.</p>
      
      <div class="infobox" style="margin-top:20px; text-align:left;">
        <strong>Why change?</strong>
        <ul style="margin:5px 0 0 15px; font-size:12px;">
          <li>No "Grow" logic needed (infinite expansion).</li>
          <li>Insertions don't require shifting everyone else!</li>
        </ul>
      </div>
    </div>

  </div>

  <style>
    .mem-block {
      width: 40px; height: 40px; background: #cbd5e1; border: 1px solid #94a3b8;
      display: flex; align-items: center; justify-content: center; font-weight: bold; color: #475569;
    }
    .mem-block.empty { background: white; border-style: dashed; }

    .node {
      width: 35px; height: 35px; background: #22c55e; color: white; border-radius: 50%;
      display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px;
      position: absolute; top: 22px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .arrow {
      position: absolute; top: 28px; color: #15803d; font-size: 14px;
    }

    .infobox {
      background: #fff; padding: 15px; border-radius: 8px; border-left: 4px solid #22c55e;
      font-size: 13px; color: #334155; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
  </style>
</section>

      </div>
    </div>
  </div>

  <div class="controls" aria-label="Presentation controls">
    <button class="iconbtn" id="prevBtn" onclick="go(-1)" aria-label="Previous slide" title="Previous (‚Üê)">
      <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
    </button>
    <button class="iconbtn" id="nextBtn" onclick="go(1)" aria-label="Next slide" title="Next (‚Üí / Space)">
      <svg viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg>
    </button>
    <button class="iconbtn" id="fsBtn" onclick="toggleFullScreen()" aria-label="Toggle fullscreen" title="Fullscreen (F)">
      <svg viewBox="0 0 24 24">
        <path d="M8 3H5a2 2 0 0 0-2 2v3"/>
        <path d="M16 3h3a2 2 0 0 1 2 2v3"/>
        <path d="M8 21H5a2 2 0 0 1-2-2v-3"/>
        <path d="M16 21h3a2 2 0 0 0 2-2v-3"/>
      </svg>
    </button>
  </div>

  <script>
    // --- CORE ENGINE ---
    const slides = Array.from(document.querySelectorAll(".slide"));
    const progressBar = document.getElementById("progress-bar");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const fsBtn = document.getElementById("fsBtn");

    let current = 0;

    // SCALING LOGIC
    function applyScale(){
      const pad = 24;
      const w = window.innerWidth - pad*2;
      const h = window.innerHeight - pad*2;
      const baseW = 1600;
      const baseH = 900;
      const s = Math.min(w/baseW, h/baseH);
      document.documentElement.style.setProperty('--scale', String(Math.max(0.3, Math.min(s, 1.5))));
    }

    // UPDATE UI
    function updateSlideNumbers(){
      slides.forEach((s, i) => {
        const holder = s.querySelector("[data-slide-no]");
        if (holder) holder.textContent = `${i + 1} / ${slides.length}`;
      });
    }

    function updateProgress(){
      progressBar.style.width = ((current + 1) / slides.length) * 100 + "%";
    }

    function updateUI(){
      slides.forEach(s => s.classList.remove("active"));
      slides[current].classList.add("active");

      updateProgress();
      prevBtn.disabled = current === 0;
      nextBtn.disabled = current === slides.length - 1;

      // Re-render math if MathJax is present
      if(window.MathJax) MathJax.typesetPromise();
    }

    function go(dir){
      const nextIndex = current + dir;
      if(nextIndex < 0 || nextIndex >= slides.length) return;
      current = nextIndex;
      updateUI();
    }

    function toggleFullScreen(){
      if(!document.fullscreenElement){
        document.documentElement.requestFullscreen?.();
      }else{
        document.exitFullscreen?.();
      }
    }
    
    // KEYBOARD NAVIGATION
    document.addEventListener("keydown", (e) => {
      if(e.key === "ArrowRight" || e.key === " " || e.key === "Enter"){
        if (e.key === " ") e.preventDefault();
        go(1);
      } else if(e.key === "ArrowLeft"){
        go(-1);
      } else if(e.key.toLowerCase() === "f"){
        toggleFullScreen();
      }
    });
    
    // INIT
    window.addEventListener("resize", applyScale);
    applyScale();
    updateSlideNumbers();
    updateUI();
  </script>
</body>
</html>