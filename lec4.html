<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lecture 4: Linked Lists</title>

  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root{
      /* --- THEME CONFIGURATION --- */
      --stage-0: #0b1220;      /* Dark background outer */
      --stage-1: #0f1a2e;      /* Dark background inner */

      --slide-bg: #ffffff;     /* Slide background */
      --ink: #0f172a;          /* Text color */
      --muted: #475569;        /* Subtext color */

      --soft: #e2e8f0;         /* Borders */
      --soft2: #f1f5f9;        /* Light backgrounds */

      --accent: #16a34a;       /* Primary Accent (Green) */
      --accent-2: #22c55e;     /* Brighter Accent */
      
      --radius: 20px;
      --shadow: 0 25px 60px rgba(0,0,0,.45);

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      --sans: "Segoe UI", system-ui, -apple-system, Roboto, Helvetica, Arial, sans-serif;

      --baseW: 1600;
      --baseH: 900;
      --scale: 1;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: var(--sans);
      background:
        radial-gradient(1400px 800px at 20% 10%, rgba(34,197,94,.15), transparent 60%),
        radial-gradient(1200px 800px at 85% 20%, rgba(22,163,74,.10), transparent 55%),
        linear-gradient(180deg, var(--stage-0), var(--stage-1));
      color:#e5e7eb;
      overflow:hidden;
    }

    /* Progress Bar */
    #progress-container{
      position:fixed; top:0; left:0; width:100%; height:8px;
      background: rgba(255,255,255,.10); z-index:9999; backdrop-filter: blur(6px);
    }
    #progress-bar{
      height:100%; width:0%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transition: width .25s ease;
    }

    /* Stage & Deck */
    .stage{
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center; padding: 18px;
    }
    .deck-wrap{
      width: calc(var(--baseW) * 1px);
      height: calc(var(--baseH) * 1px);
      transform: scale(var(--scale));
      transform-origin:center center;
      position:relative;
    }
    .deck{ width:100%; height:100%; position:relative; }

    /* Slide Logic */
    .slide{
      width:100%; height:100%;
      background: var(--slide-bg);
      color: var(--ink);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position:absolute; inset:0;
      display:none;
      overflow:hidden;
      padding: 50px 60px;
      animation: slideIn .28s ease;
    }
    .slide.active{ display:block; }
    
    @keyframes slideIn{
      from{ opacity:0; transform: translateY(14px) scale(.99); }
      to{ opacity:1; transform: translateY(0) scale(1); }
    }

    /* Decorative Triangles */
    .slide::before, .slide::after{
      content:""; position:absolute; width: 240px; height: 240px; pointer-events:none; opacity:.95; z-index: 0;
    }
    .slide::before{
      top:-1px; left:-1px;
      background: radial-gradient(circle at 0% 0%, rgba(34,197,94,.22), transparent 55%),
                  linear-gradient(135deg, rgba(22,163,74,.95), rgba(34,197,94,.55));
      clip-path: polygon(0 0, 100% 0, 0 100%);
    }
    .slide::after{
      bottom:-1px; right:-1px;
      background: radial-gradient(circle at 100% 100%, rgba(34,197,94,.22), transparent 55%),
                  linear-gradient(315deg, rgba(22,163,74,.95), rgba(34,197,94,.55));
      clip-path: polygon(100% 100%, 100% 0, 0 100%);
    }

    /* Typography & Header */
    .slide-top{
      position:relative; z-index:2; display:flex; align-items:center; justify-content:space-between; gap:20px; margin-bottom: 22px;
    }
    .meta{ display:flex; flex-direction:column; gap:4px; line-height:1.15; }
    .meta .course{ font-weight:800; letter-spacing:.06em; text-transform:uppercase; color: var(--ink); font-size: 16px; }
    .meta .sub{ font-size: 15px; color: var(--muted); }
    
    h1{ font-size: 56px; margin: 8px 0 10px; letter-spacing:-1.1px; line-height:1.06; position:relative; z-index:2; }
    h2{ font-size: 40px; margin: 6px 0 18px; letter-spacing:-0.8px; position:relative; z-index:2; border-bottom: 3px solid var(--accent); padding-bottom:10px; display:inline-block; }
    h3{ font-size: 26px; margin: 14px 0 10px; color: #0b2a14; position:relative; z-index:2; }
    p, li{ font-size: 20px; line-height:1.6; color: var(--ink); position:relative; z-index:2; }
    
    .muted{ color: var(--muted); }
    
    /* Code Styling */
    pre {
        background: #1e293b;
        color: #f8fafc;
        padding: 20px;
        border-radius: 12px;
        overflow-x: auto;
        font-family: var(--mono);
        font-size: 16px;
        line-height: 1.5;
        border: 1px solid #334155;
        position: relative;
        z-index: 2;
    }
    code{ font-family: var(--mono); font-size: .92em; color: var(--accent); background: #f3f4f6; padding: 2px 6px; border-radius: 8px; border: 1px solid #e5e7eb; }
    pre code { background: transparent; color: inherit; padding: 0; border: none; }

    /* Layout Utilities */
    .grid-2{ display:grid; grid-template-columns: 1.25fr 1fr; gap: 26px; align-items:start; position:relative; z-index:2; }
    .grid-3{ display:grid; grid-template-columns: repeat(3, 1fr); gap: 14px; align-items:start; position:relative; z-index:2; }
    
    /* Components */
    .card{ background: var(--soft2); border: 1px solid var(--soft); border-radius: 18px; padding: 18px; position:relative; z-index:2; }
    .card-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 18px; margin-top: 14px; position:relative; z-index:2; }

    .info-card{ background: #ffffff; border: 1px solid var(--soft); border-left: 6px solid var(--accent); border-radius: 16px; padding: 16px; transition: transform .15s ease, box-shadow .15s ease; cursor: default; }
    .info-card:hover{ transform: translateY(-2px); box-shadow: 0 10px 24px rgba(0,0,0,.10); }

    .pill{ display:inline-block; border:1px solid var(--soft); background: var(--soft2); border-radius: 999px; padding: 6px 14px; font-size: 14px; color: var(--muted); font-family: var(--mono); white-space:nowrap; }
    .callout{ border-left: 6px solid var(--accent); padding: 18px 22px; background: #f6fffa; border-radius: 16px; margin-top: 14px; position:relative; z-index:2; }
    
    /* Footer */
    .slide-footer{ position:absolute; left: 60px; right: 60px; bottom: 26px; display:flex; align-items:center; justify-content:space-between; color: var(--muted); font-size: 14px; z-index:2; }
    .slide-no{ font-family: var(--mono); background: var(--soft2); border: 1px solid var(--soft); padding: 6px 12px; border-radius: 999px; color: var(--muted); }

    /* Controls */
    .controls{ position:fixed; right: 18px; bottom: 18px; z-index:10000; display:flex; gap: 10px; align-items:center; }
    .iconbtn{ width: 44px; height: 44px; border-radius: 999px; border: 1px solid rgba(255,255,255,.22); background: rgba(15,23,42,.45); color:#e5e7eb; display:grid; place-items:center; cursor:pointer; backdrop-filter: blur(10px); transition: transform .12s ease, background .12s ease; user-select:none; }
    .iconbtn:hover{ transform: translateY(-2px); background: rgba(15,23,42,.65); }
    .iconbtn:disabled{ opacity:.45; cursor:not-allowed; transform:none; }
    .iconbtn svg{ width: 20px; height: 20px; fill: none; stroke: currentColor; stroke-width: 2.4; stroke-linecap: round; stroke-linejoin: round; }
  </style>
</head>

<body>
  <div id="progress-container"><div id="progress-bar"></div></div>

  <div class="stage">
    <div class="deck-wrap" id="deckWrap">
      <div class="deck" id="deck">

        <section class="slide active">
          <div class="slide-top">
            <div class="meta">
              <div class="course">COIS 2020H</div>
              <div class="sub">Data Structures</div>
            </div>
            <span class="pill">Lecture 4</span>
          </div>
          
          <h1>Linked List?</h1>
          
          <div class="card" style="margin-top: 22px;">
            <p style="margin:0;"><strong>Instructor:</strong> Ahmad Mousa<br /><span class="muted">Trent University - GTA</span></p>
            <div class="grid-3" style="margin-top:16px;">
                <div class="info-card"><div style="font-size:12px; font-weight:800; color:var(--muted);">FOCUS</div><div style="font-weight:900;">Linked Lists</div></div>
                <div class="info-card"><div style="font-size:12px; font-weight:800; color:var(--muted);">TYPE</div><div style="font-weight:900;">Generics</div></div>
                <div class="info-card"><div style="font-size:12px; font-weight:800; color:var(--muted);">TECH</div><div style="font-weight:900;">C#</div></div>
            </div>
          </div>
          
          <div class="slide-footer"><div class="muted">Based on lecture notes by Brian Srivastava & Alaa Alslaity</div><div class="slide-no" data-slide-no></div></div>
        </section>

<section class="slide">
          <div class="slide-top">
            <div class="meta"><div class="course">Introduction</div><div class="sub">Core Concepts</div></div>
            <span class="pill">Definition</span>
          </div>
          
          <h2>What is a Linked List?</h2>
          <p>A non-contiguous data structure where elements are not stored at adjacent memory locations.</p>
          
          <div class="grid-2">
            
            <div class="card-grid" style="grid-template-columns: 1fr; gap:14px; margin-top:0;">
                <div class="info-card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:4px;">
                        <h3 style="margin:0; font-size:18px;">Nodes</h3>
                        <span style="font-size:20px;">ðŸ“¦</span>
                    </div>
                    <p style="font-size:16px; margin:0;">The building blocks. The list consists of distinct objects called nodes.</p>
                </div>

                <div class="info-card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:4px;">
                        <h3 style="margin:0; font-size:18px;">Non-Contiguous</h3>
                        <span style="font-size:20px;">ðŸ”—</span>
                    </div>
                    <p style="font-size:16px; margin:0;">Unlike arrays, nodes exist scattered in memory, linked by addresses.</p>
                </div>

                <div class="info-card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:4px;">
                        <h3 style="margin:0; font-size:18px;">Dynamic</h3>
                        <span style="font-size:20px;">ðŸ“ˆ</span>
                    </div>
                    <p style="font-size:16px; margin:0;">The collection grows and shrinks dynamically during execution.</p>
                </div>
            </div>

<div class="card" style="display:flex; flex-direction:column; align-items:center; justify-content:center; background: #f8fafc; padding: 40px; border-radius: 16px;">
    <div style="font-size:13px; font-weight:800; color:#64748b; text-transform:uppercase; letter-spacing:1px; margin-bottom:20px;">Doubly Linked Node Anatomy</div>
    
    <div style="display:flex; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); transition: transform 0.2s ease;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
        
        <div style="background:#6366f1; border:2px solid #1e293b; border-right:none; border-radius: 12px 0 0 12px; padding:15px 20px; text-align:center; display:flex; flex-direction:column; justify-content:center; min-width: 60px;">
            <div style="font-size:10px; color:#fff; font-weight:700; opacity:0.9;">PREV</div>
            <div style="font-size:20px; font-weight:900; color:#fff;">â¬…</div>
        </div>

        <div style="background:#f1f5f9; border:2px solid #1e293b; border-right:none; padding:15px 20px; text-align:center; min-width: 50px;">
            <div style="font-size:10px; color:#64748b; font-weight:700;">ID</div>
            <div style="font-size:22px; font-weight:900; color:#1e293b;">#1</div>
        </div>

        <div style="background:#fff; border:2px solid #1e293b; padding:15px 30px; text-align:center; min-width: 80px;">
            <div style="font-size:10px; color:#64748b; font-weight:700;">DATA</div>
            <div style="font-size:28px; font-weight:900; color:#1e293b;">12</div>
        </div>

        <div style="background:#6366f1; border:2px solid #1e293b; border-left:none; border-radius: 0 12px 12px 0; padding:15px 20px; text-align:center; display:flex; flex-direction:column; justify-content:center; min-width: 60px;">
            <div style="font-size:10px; color:#fff; font-weight:700; opacity:0.9;">NEXT</div>
            <div style="font-size:20px; font-weight:900; color:#fff;">âžœ</div>
        </div>

    </div>
</div>

                <div class="callout" style="margin-top:30px; width:100%; font-size:15px; text-align:center;">
                    Each node holds <strong>Data</strong> and a <strong>Pointer</strong> (Reference) to the next node.
                </div>
            </div>

          </div>
          
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
        </section>
        <section class="slide">
          <div class="slide-top">
            <div class="meta"><div class="course">Variant 1</div><div class="sub">One-Way Street</div></div>
            <span class="pill">Singly Linked</span>
          </div>
          
          <h2>Singly Linked List</h2>
          <p>Nodes point only to the <strong>next</strong> node. Traversal is unidirectional.</p>

          <div class="card" style="margin-top:20px; padding:40px; display:flex; justify-content:center; align-items:center; overflow:visible;">
            <svg width="800" height="200" viewBox="0 0 800 200" style="overflow:visible;">
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#475569" />
                    </marker>
                </defs>

                <g class="node-group" transform="translate(50, 50)">
                    <rect x="0" y="0" width="100" height="60" rx="8" fill="#fff" stroke="#0f172a" stroke-width="2"/>
                    <text x="30" y="38" font-family="monospace" font-size="24" font-weight="bold" fill="#0f172a">12</text>
                    <rect x="70" y="0" width="30" height="60" rx="0" fill="#22c55e" opacity="0.2"/>
                    <circle cx="85" cy="30" r="4" fill="#16a34a"/>
                </g>
                
                <line x1="150" y1="80" x2="240" y2="80" stroke="#475569" stroke-width="3" marker-end="url(#arrowhead)"/>

                <g class="node-group" transform="translate(250, 50)">
                    <rect x="0" y="0" width="100" height="60" rx="8" fill="#fff" stroke="#0f172a" stroke-width="2"/>
                    <text x="30" y="38" font-family="monospace" font-size="24" font-weight="bold" fill="#0f172a">99</text>
                    <rect x="70" y="0" width="30" height="60" rx="0" fill="#22c55e" opacity="0.2"/>
                    <circle cx="85" cy="30" r="4" fill="#16a34a"/>
                </g>

                <line x1="350" y1="80" x2="440" y2="80" stroke="#475569" stroke-width="3" marker-end="url(#arrowhead)"/>

                <g class="node-group" transform="translate(450, 50)">
                    <rect x="0" y="0" width="100" height="60" rx="8" fill="#fff" stroke="#0f172a" stroke-width="2"/>
                    <text x="30" y="38" font-family="monospace" font-size="24" font-weight="bold" fill="#0f172a">37</text>
                    <rect x="70" y="0" width="30" height="60" rx="0" fill="#cbd5e1"/>
                    <line x1="70" y1="0" x2="100" y2="60" stroke="#94a3b8" stroke-width="2"/>
                </g>

                <line x1="550" y1="80" x2="600" y2="80" stroke="#cbd5e1" stroke-width="2"/>
                <g transform="translate(610, 85)">
                    <text font-family="monospace" font-size="16" fill="#94a3b8">NULL</text>
                    <rect x="-5" y="-15" width="50" height="25" fill="none" stroke="#94a3b8" stroke-width="1"/>
                    <line x1="-5" y1="-15" x2="45" y2="10" stroke="#94a3b8" stroke-width="1"/>
                </g>
            </svg>
          </div>
          
          <div class="callout" style="margin-top:20px;">
              <strong>Interaction:</strong> Each node contains <strong>Data</strong> (left) and a <strong>Pointer</strong> (right) to the next node. The list ends when the pointer is <code>NULL</code> (or empty).
          </div>

          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
        </section>


        <section class="slide">
          <div class="slide-top">
            <div class="meta"><div class="course">Variant 2</div><div class="sub">Two-Way Street</div></div>
            <span class="pill">Doubly Linked</span>
          </div>
          
          <h2>Doubly Linked List</h2>
          <p>Nodes contain <strong>Next</strong> and <strong>Previous</strong> pointers. Allows traversal in both directions.</p>

          <div class="card" style="margin-top:20px; padding:40px; display:flex; justify-content:center; align-items:center; overflow:visible;">
            <svg width="900" height="200" viewBox="0 0 900 200" style="overflow:visible;">
                <defs>
                    <marker id="arrowhead-bi" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#16a34a" />
                    </marker>
                    <marker id="arrowhead-rev" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                        <polygon points="10 0, 0 3.5, 10 7" fill="#16a34a" />
                    </marker>
                </defs>

                <text x="20" y="85" font-family="monospace" font-size="16" fill="#94a3b8">NULL</text>
                
                <line x1="70" y1="80" x2="110" y2="80" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead-rev)"/>

                <g class="dbl-node" transform="translate(120, 50)">
                    <rect x="0" y="0" width="30" height="60" rx="0" fill="#22c55e" opacity="0.1" stroke="#0f172a"/>
                    <text x="15" y="35" font-family="sans-serif" font-size="9" font-weight="bold" fill="#166534" text-anchor="middle" style="pointer-events:none;">PREV</text>
                    
                    <rect x="30" y="0" width="60" height="60" fill="#fff" stroke="#0f172a" stroke-width="2"/>
                    <text x="60" y="38" font-family="monospace" font-size="24" font-weight="bold" fill="#0f172a" text-anchor="middle">12</text>
                    
                    <rect x="90" y="0" width="30" height="60" rx="0" fill="#22c55e" opacity="0.1" stroke="#0f172a"/>
                    <text x="105" y="35" font-family="sans-serif" font-size="9" font-weight="bold" fill="#166534" text-anchor="middle" style="pointer-events:none;">NEXT</text>
                </g>

                <g>
                    <line x1="245" y1="70" x2="295" y2="70" stroke="#16a34a" stroke-width="2" marker-end="url(#arrowhead-bi)"/>
                    <line x1="245" y1="90" x2="295" y2="90" stroke="#16a34a" stroke-width="2" marker-start="url(#arrowhead-rev)"/>
                </g>

                <g class="dbl-node" transform="translate(300, 50)">
                    <rect x="0" y="0" width="30" height="60" fill="#22c55e" opacity="0.1" stroke="#0f172a"/>
                    <text x="15" y="35" font-family="sans-serif" font-size="9" font-weight="bold" fill="#166534" text-anchor="middle" style="pointer-events:none;">PREV</text>

                    <rect x="30" y="0" width="60" height="60" fill="#fff" stroke="#0f172a" stroke-width="2"/>
                    <text x="60" y="38" font-family="monospace" font-size="24" font-weight="bold" fill="#0f172a" text-anchor="middle">99</text>

                    <rect x="90" y="0" width="30" height="60" fill="#22c55e" opacity="0.1" stroke="#0f172a"/>
                    <text x="105" y="35" font-family="sans-serif" font-size="9" font-weight="bold" fill="#166534" text-anchor="middle" style="pointer-events:none;">NEXT</text>
                </g>

                <g>
                    <line x1="425" y1="70" x2="475" y2="70" stroke="#16a34a" stroke-width="2" marker-end="url(#arrowhead-bi)"/>
                    <line x1="425" y1="90" x2="475" y2="90" stroke="#16a34a" stroke-width="2" marker-start="url(#arrowhead-rev)"/>
                </g>

                <g class="dbl-node" transform="translate(480, 50)">
                    <rect x="0" y="0" width="30" height="60" fill="#22c55e" opacity="0.1" stroke="#0f172a"/>
                    <text x="15" y="35" font-family="sans-serif" font-size="9" font-weight="bold" fill="#166534" text-anchor="middle" style="pointer-events:none;">PREV</text>

                    <rect x="30" y="0" width="60" height="60" fill="#fff" stroke="#0f172a" stroke-width="2"/>
                    <text x="60" y="38" font-family="monospace" font-size="24" font-weight="bold" fill="#0f172a" text-anchor="middle">37</text>

                    <rect x="90" y="0" width="30" height="60" fill="#22c55e" opacity="0.1" stroke="#0f172a"/>
                    <text x="105" y="35" font-family="sans-serif" font-size="9" font-weight="bold" fill="#166534" text-anchor="middle" style="pointer-events:none;">NEXT</text>
                </g>

                <line x1="605" y1="80" x2="645" y2="80" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead-bi)"/>
                <text x="655" y="85" font-family="monospace" font-size="16" fill="#94a3b8">NULL</text>

            </svg>
          </div>
          
          <div class="grid-2" style="margin-top:20px;">
              <div class="info-card">
                  <h3>Forward</h3>
                  <p><code>12</code> &#8594; <code>99</code> &#8594; <code>37</code></p>
              </div>
              <div class="info-card">
                  <h3>Backward</h3>
                  <p><code>37</code> &#8594; <code>99</code> &#8594; <code>12</code></p>
              </div>
          </div>

          <style>
              .dbl-node { cursor:pointer; transition: transform 0.2s ease; }
              .dbl-node:hover { transform: translateY(-5px) scale(1.05); }
          </style>

          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
        </section>


        <section class="slide">
          <div class="slide-top">
            <div class="meta"><div class="course">Variant 3</div><div class="sub">Infinite Loop</div></div>
            <span class="pill">Circular</span>
          </div>
          
          <h2>Circular Linked List</h2>
          <p>The last node's <strong>Next</strong> pointer wraps around to point back to the first node.</p>

          <div class="card" style="margin-top:20px; padding:40px; display:flex; justify-content:center; align-items:center; overflow:visible;">
            <svg width="800" height="250" viewBox="0 0 800 250" style="overflow:visible;">
                
                <g class="node-group" transform="translate(100, 50)">
                    <rect x="0" y="0" width="100" height="60" rx="8" fill="#fff" stroke="#0f172a" stroke-width="2"/>
                    <text x="30" y="38" font-family="monospace" font-size="24" font-weight="bold" fill="#0f172a">12</text>
                    <rect x="70" y="0" width="30" height="60" rx="0" fill="#22c55e" opacity="0.2"/>
                    <circle cx="85" cy="30" r="4" fill="#16a34a"/>
                </g>
                
                <line x1="200" y1="80" x2="290" y2="80" stroke="#475569" stroke-width="3" marker-end="url(#arrowhead)"/>

                <g class="node-group" transform="translate(300, 50)">
                    <rect x="0" y="0" width="100" height="60" rx="8" fill="#fff" stroke="#0f172a" stroke-width="2"/>
                    <text x="30" y="38" font-family="monospace" font-size="24" font-weight="bold" fill="#0f172a">99</text>
                    <rect x="70" y="0" width="30" height="60" rx="0" fill="#22c55e" opacity="0.2"/>
                    <circle cx="85" cy="30" r="4" fill="#16a34a"/>
                </g>

                <line x1="400" y1="80" x2="490" y2="80" stroke="#475569" stroke-width="3" marker-end="url(#arrowhead)"/>

                <g class="node-group" transform="translate(500, 50)">
                    <rect x="0" y="0" width="100" height="60" rx="8" fill="#fff" stroke="#0f172a" stroke-width="2"/>
                    <text x="30" y="38" font-family="monospace" font-size="24" font-weight="bold" fill="#0f172a">37</text>
                    <rect x="70" y="0" width="30" height="60" rx="0" fill="#22c55e" opacity="0.2"/>
                    <circle cx="85" cy="30" r="4" fill="#16a34a"/>
                </g>

                <path d="M 600 80 Q 650 80 650 130 T 350 200 T 50 130 T 90 80" fill="none" stroke="#22c55e" stroke-width="3" stroke-dasharray="8,4" marker-end="url(#arrowhead-bi)"/>
                
                <text x="320" y="220" font-family="monospace" font-size="14" fill="#16a34a" font-weight="bold">Back to Head</text>

            </svg>
          </div>
          
          <div class="callout" style="background:#f0fdf4; border-color:#22c55e;">
              <strong>Note:</strong> There are no NULL references in a circular list. Traversing without a stop condition will result in an infinite loop.
          </div>

          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
        </section>

        <section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">CS 101</div>
      <div class="sub">Data Structures</div>
    </div>
    <span class="pill">Advanced Lists</span>
  </div>

  <h2>Linked List Variants</h2>
  
  <div class="content-grid">
    
    <div class="menu-col">
      <p class="instruction">Select a variant to visualize:</p>
      <ul class="variant-list">
        <li class="variant-item active" onclick="switchVariant('doubly', this)">
          <strong>Doubly Linked</strong>
          <span class="desc">Nodes point to Next and Previous.</span>
        </li>
        <li class="variant-item" onclick="switchVariant('headtail', this)">
          <strong>Head & Tail Pointers</strong>
          <span class="desc">Track both ends for fast insertion.</span>
        </li>
        <li class="variant-item" onclick="switchVariant('circular', this)">
          <strong>Circular Lists</strong>
          <span class="desc">Last node wraps around to the first.</span>
        </li>
        <li class="variant-item" onclick="switchVariant('sentinel', this)">
          <strong>Sentinel Nodes</strong>
          <span class="desc">Dummy nodes to simplify edge cases.</span>
        </li>
      </ul>
    </div>

    <div class="visual-col">
      
      <div id="doubly" class="variant-view active-view">
        <div class="card">
          <svg width="450" height="180" viewBox="0 0 450 180">
            <defs>
              <marker id="arrow-r" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#475569"/></marker>
              <marker id="arrow-l" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto"><polygon points="10 0, 0 3.5, 10 7" fill="#475569"/></marker>
            </defs>
            <g transform="translate(20, 60)">
               <rect x="0" y="0" width="30" height="60" fill="#e2e8f0" stroke="#0f172a"/><text x="15" y="35" font-size="8" text-anchor="middle" fill="#64748b">PREV</text>
               <rect x="30" y="0" width="50" height="60" fill="#fff" stroke="#0f172a"/><text x="55" y="35" font-family="monospace" font-weight="bold" text-anchor="middle">A</text>
               <rect x="80" y="0" width="30" height="60" fill="#e2e8f0" stroke="#0f172a"/><text x="95" y="35" font-size="8" text-anchor="middle" fill="#64748b">NEXT</text>
            </g>
            <line x1="135" y1="80" x2="175" y2="80" stroke="#475569" stroke-width="2" marker-end="url(#arrow-r)"/>
            <line x1="135" y1="100" x2="175" y2="100" stroke="#475569" stroke-width="2" marker-start="url(#arrow-l)"/>
            <g transform="translate(180, 60)">
               <rect x="0" y="0" width="30" height="60" fill="#e2e8f0" stroke="#0f172a"/><text x="15" y="35" font-size="8" text-anchor="middle" fill="#64748b">PREV</text>
               <rect x="30" y="0" width="50" height="60" fill="#fff" stroke="#0f172a"/><text x="55" y="35" font-family="monospace" font-weight="bold" text-anchor="middle">B</text>
               <rect x="80" y="0" width="30" height="60" fill="#e2e8f0" stroke="#0f172a"/><text x="95" y="35" font-size="8" text-anchor="middle" fill="#64748b">NEXT</text>
            </g>
          </svg>
        </div>
        <div class="caption">Allows traversal in both directions (Forward & Backward).</div>
      </div>

      <div id="headtail" class="variant-view">
        <div class="card">
          <svg width="450" height="180" viewBox="0 0 450 180">
            <defs><marker id="arrow-simple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#475569"/></marker></defs>
            
            <text x="50" y="30" font-family="monospace" font-weight="bold" fill="#ea580c">HEAD</text>
            <line x1="70" y1="40" x2="70" y2="70" stroke="#ea580c" stroke-width="2" marker-end="url(#arrow-simple)"/>
            
            <g transform="translate(20, 80)">
               <rect width="100" height="40" rx="4" fill="#fff" stroke="#0f172a"/>
               <text x="50" y="25" text-anchor="middle" font-family="monospace">Node A</text>
            </g>
            <line x1="120" y1="100" x2="160" y2="100" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow-simple)"/>
            
            <g transform="translate(170, 80)">
               <rect width="100" height="40" rx="4" fill="#fff" stroke="#0f172a"/>
               <text x="50" y="25" text-anchor="middle" font-family="monospace">Node B</text>
            </g>
            <line x1="270" y1="100" x2="310" y2="100" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow-simple)"/>

            <g transform="translate(320, 80)">
               <rect width="100" height="40" rx="4" fill="#fff" stroke="#0f172a"/>
               <text x="50" y="25" text-anchor="middle" font-family="monospace">Node C</text>
            </g>

            <text x="350" y="160" font-family="monospace" font-weight="bold" fill="#2563eb">TAIL</text>
            <line x1="370" y1="145" x2="370" y2="125" stroke="#2563eb" stroke-width="2" marker-end="url(#arrow-simple)"/>
          </svg>
        </div>
        <div class="caption">Insert at end (Tail) is O(1) instead of O(n).</div>
      </div>

      <div id="circular" class="variant-view">
        <div class="card">
          <svg width="450" height="180" viewBox="0 0 450 180">
            <defs><marker id="arrow-circ" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#16a34a"/></marker></defs>
            
            <g transform="translate(40, 70)">
               <rect width="80" height="40" rx="4" fill="#fff" stroke="#0f172a"/>
               <text x="40" y="25" text-anchor="middle" font-weight="bold">1</text>
            </g>
            <line x1="120" y1="90" x2="160" y2="90" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow-circ)"/>
            
            <g transform="translate(170, 70)">
               <rect width="80" height="40" rx="4" fill="#fff" stroke="#0f172a"/>
               <text x="40" y="25" text-anchor="middle" font-weight="bold">2</text>
            </g>
            <line x1="250" y1="90" x2="290" y2="90" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow-circ)"/>
            
            <g transform="translate(300, 70)">
               <rect width="80" height="40" rx="4" fill="#fff" stroke="#0f172a"/>
               <text x="40" y="25" text-anchor="middle" font-weight="bold">3</text>
            </g>

            <path d="M 340 110 Q 340 160 210 160 Q 80 160 80 115" fill="none" stroke="#16a34a" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow-circ)"/>
          </svg>
        </div>
        <div class="caption">No NULL at the end. Great for round-robin scheduling.</div>
      </div>

      <div id="sentinel" class="variant-view">
        <div class="card">
          <svg width="450" height="180" viewBox="0 0 450 180">
            <defs><marker id="arrow-sent" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#475569"/></marker></defs>
            
            <g transform="translate(20, 70)">
               <rect width="80" height="40" rx="4" fill="#e2e8f0" stroke="#94a3b8" stroke-dasharray="4,2"/>
               <text x="40" y="25" text-anchor="middle" font-size="12" fill="#64748b">SENTINEL</text>
            </g>
            <line x1="100" y1="90" x2="140" y2="90" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow-sent)"/>
            
            <g transform="translate(150, 70)">
               <rect width="80" height="40" rx="4" fill="#fff" stroke="#0f172a"/>
               <text x="40" y="25" text-anchor="middle" font-weight="bold">Data A</text>
            </g>
            <line x1="230" y1="90" x2="270" y2="90" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow-sent)"/>

            <g transform="translate(280, 70)">
               <rect width="80" height="40" rx="4" fill="#fff" stroke="#0f172a"/>
               <text x="40" y="25" text-anchor="middle" font-weight="bold">Data B</text>
            </g>
          </svg>
        </div>
        <div class="caption">Ensures list always has a 'first' node. Removes need for <code>if (head == null)</code> checks.</div>
      </div>

    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Variants</div><div class="slide-no"></div></div>

  <style>
    .content-grid { display: grid; grid-template-columns: 1fr 1.5fr; gap: 30px; margin-top: 20px; }
    
    /* Menu Styles */
    .variant-list { list-style: none; padding: 0; margin: 0; }
    .variant-item { 
      padding: 15px; border-left: 4px solid #cbd5e1; background: #f8fafc; margin-bottom: 10px; cursor: pointer; transition: all 0.2s;
    }
    .variant-item:hover { background: #f1f5f9; border-left-color: #94a3b8; }
    .variant-item.active { border-left-color: #2563eb; background: #eff6ff; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
    .variant-item strong { display: block; font-size: 1.1em; color: #1e293b; }
    .variant-item .desc { font-size: 0.85em; color: #64748b; display: block; margin-top: 4px; }
    .instruction { font-size: 0.9em; color: #94a3b8; font-style: italic; margin-bottom: 10px; }

    /* Visual Styles */
    .variant-view { display: none; animation: fadeIn 0.3s ease; }
    .variant-view.active-view { display: block; }
    .card { background: white; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; display: flex; justify-content: center; height: 200px; align-items: center; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }
    .caption { margin-top: 15px; background: #f0fdf4; border-left: 4px solid #22c55e; padding: 10px; font-size: 0.9em; color: #166534; }
    
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
  </style>

  <script>
    function switchVariant(id, el) {
      // Update Menu
      document.querySelectorAll('.variant-item').forEach(i => i.classList.remove('active'));
      el.classList.add('active');
      
      // Update View
      document.querySelectorAll('.variant-view').forEach(v => v.classList.remove('active-view'));
      document.getElementById(id).classList.add('active-view');
    }
  </script>
            <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>

</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">CS 101</div>
      <div class="sub">Fundamentals</div>
    </div>
    <span class="pill">The Building Block</span>
  </div>

  <h2>The Node: Code vs. Memory</h2>
  
  <div class="tab-container">
    <button class="tab-btn active" onclick="openTab('blueprint')">1. The Blueprint (Code)</button>
    <button class="tab-btn" onclick="openTab('memory')">2. The Reality (Heap)</button>
  </div>

  <div id="blueprint" class="tab-content active-content">
    <div class="split-layout">
      <div class="text-col">
        <p class="intro">A Node is a simple object defined by a class. Hover over the code lines to see what they create.</p>
        
        <div class="code-block">
          <div class="line">public class Node {</div>
          <div class="line interactive" onmouseover="highlight('data')" onmouseout="reset('data')">
            &nbsp;&nbsp;public Object <strong>data</strong>;
          </div>
          <div class="line interactive" onmouseover="highlight('next')" onmouseout="reset('next')">
            &nbsp;&nbsp;public Node <strong>next</strong>;
          </div>
          <div class="line">}</div>
        </div>

        <div class="explanation">
          <div id="msg-default"><strong>Hover over code above.</strong><br>See how the code maps to the structure.</div>
          <div id="msg-data" style="display:none; color:#ea580c;"><strong>The Payload:</strong><br>This holds your actual value (Number, String, User Object, etc).</div>
          <div id="msg-next" style="display:none; color:#2563eb;"><strong>The Reference:</strong><br>In C#/Java, this is a reference (pointer). It doesn't hold the next node; it holds the <em>address</em> of the next node.</div>
        </div>
      </div>

      <div class="visual-col">
        <svg width="300" height="200" viewBox="0 0 300 200">
          <defs>
             <marker id="arrow" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
               <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8" />
             </marker>
          </defs>
          
          <g transform="translate(50, 50)">
            <rect id="viz-data" x="0" y="0" width="100" height="80" fill="#fff" stroke="#0f172a" stroke-width="2"/>
            <text x="50" y="45" text-anchor="middle" font-family="monospace" font-weight="bold" fill="#0f172a">Data</text>
            
            <rect id="viz-next" x="100" y="0" width="60" height="80" fill="#f1f5f9" stroke="#0f172a" stroke-width="2"/>
            <circle cx="130" cy="40" r="5" fill="#94a3b8"/>
            <line id="viz-line" x1="130" y1="40" x2="180" y2="40" stroke="#94a3b8" stroke-width="3" marker-end="url(#arrow)"/>
            <text x="130" y="65" text-anchor="middle" font-size="10" fill="#64748b">next</text>
          </g>
        </svg>
      </div>
    </div>
  </div>

  <div id="memory" class="tab-content">
    <div class="split-layout">
      <div class="text-col">
        <p class="intro">Where do Nodes live?</p>
        <ul class="bullet-list">
          <li>Nodes live on the <strong>Heap</strong>.</li>
          <li>Unlike arrays, they are <strong>not contiguous</strong> (next door neighbors).</li>
          <li>The OS puts them wherever there is free space.</li>
        </ul>
        <div class="callout">
          <strong>Analogy:</strong><br>An Array is a row of theater seats.<br>A Linked List is a scavenger hunt where each clue leads to the next location.
        </div>
      </div>

      <div class="visual-col">
        <div class="heap-container">
          <div class="heap-label">SYSTEM MEMORY (THE HEAP)</div>
          <svg width="350" height="220" viewBox="0 0 350 220">
            <defs>
              <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#f1f5f9" stroke-width="1"/>
              </pattern>
            </defs>
            <rect width="350" height="220" fill="url(#grid)" />

            <g class="scatter-node" transform="translate(20, 150)">
              <rect width="40" height="25" rx="4" fill="#fff" stroke="#0f172a"/>
              <text x="20" y="17" text-anchor="middle" font-size="10" font-weight="bold">Head</text>
            </g>
            <path d="M 60 162 Q 100 162 120 80" fill="none" stroke="#2563eb" stroke-dasharray="4,2" marker-end="url(#arrow)"/>

            <g class="scatter-node" transform="translate(110, 50)">
              <rect width="40" height="25" rx="4" fill="#fff" stroke="#0f172a"/>
              <text x="20" y="17" text-anchor="middle" font-size="10">Node</text>
            </g>
            <path d="M 150 62 Q 200 62 250 120" fill="none" stroke="#2563eb" stroke-dasharray="4,2" marker-end="url(#arrow)"/>

            <g class="scatter-node" transform="translate(240, 120)">
              <rect width="40" height="25" rx="4" fill="#fff" stroke="#0f172a"/>
              <text x="20" y="17" text-anchor="middle" font-size="10">Node</text>
            </g>
             <path d="M 280 132 Q 300 132 320 40" fill="none" stroke="#2563eb" stroke-dasharray="4,2" marker-end="url(#arrow)"/>

             <g class="scatter-node" transform="translate(300, 20)">
              <rect width="40" height="25" rx="4" fill="#fff" stroke="#0f172a"/>
              <text x="20" y="17" text-anchor="middle" font-size="10">Tail</text>
            </g>

          </svg>
        </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Implementation</div><div class="slide-no"></div></div>

  <style>
    /* Tab Styling */
    .tab-container { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #e2e8f0; }
    .tab-btn { background: none; border: none; padding: 10px 20px; cursor: pointer; color: #64748b; font-weight: bold; font-size: 1rem; position: relative; top: 2px; }
    .tab-btn:hover { color: #0f172a; }
    .tab-btn.active { color: #2563eb; border-bottom: 3px solid #2563eb; }
    
    .tab-content { display: none; animation: fadeIn 0.4s ease; }
    .tab-content.active-content { display: block; }

    /* Layout */
    .split-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center; }
    .intro { font-size: 1.1em; color: #334155; margin-bottom: 15px; }

    /* Code Block Styling */
    .code-block { background: #1e293b; color: #e2e8f0; padding: 20px; border-radius: 8px; font-family: monospace; font-size: 1.1em; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
    .line { padding: 4px 8px; border-radius: 4px; transition: background 0.2s; }
    .line.interactive { cursor: help; border: 1px solid transparent; }
    .line.interactive:hover { background: #334155; border-color: #475569; }
    
    /* Explanation Box */
    .explanation { margin-top: 20px; height: 80px; padding: 15px; background: #f8fafc; border-left: 4px solid #94a3b8; color: #475569; font-size: 0.95em; }

    /* Heap Styling */
    .heap-container { border: 2px dashed #cbd5e1; background: #f8fafc; border-radius: 10px; position: relative; overflow: hidden; }
    .heap-label { position: absolute; top: 10px; left: 10px; font-size: 10px; letter-spacing: 1px; color: #94a3b8; font-weight: bold; }
    .callout { background: #fffbeb; border: 1px solid #fcd34d; padding: 15px; border-radius: 8px; margin-top: 20px; color: #92400e; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
  </style>

  <script>
    // Tab Switcher
    function openTab(tabName) {
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active-content'));
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
      
      document.getElementById(tabName).classList.add('active-content');
      event.currentTarget.classList.add('active');
    }

    // Code Highlight Logic
    function highlight(part) {
      // Reset texts
      document.getElementById('msg-default').style.display = 'none';
      document.getElementById('msg-data').style.display = 'none';
      document.getElementById('msg-next').style.display = 'none';
      
      if(part === 'data') {
        document.getElementById('viz-data').style.fill = '#fdba74'; // Orange Highlight
        document.getElementById('msg-data').style.display = 'block';
      } else if (part === 'next') {
        document.getElementById('viz-next').style.fill = '#93c5fd'; // Blue Highlight
        document.getElementById('viz-line').style.stroke = '#2563eb';
        document.getElementById('msg-next').style.display = 'block';
      }
    }

    function reset(part) {
       document.getElementById('msg-default').style.display = 'block';
       document.getElementById('msg-data').style.display = 'none';
       document.getElementById('msg-next').style.display = 'none';
       
       document.getElementById('viz-data').style.fill = '#fff';
       document.getElementById('viz-next').style.fill = '#f1f5f9';
       document.getElementById('viz-line').style.stroke = '#94a3b8';
    }
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta"><div class="course">CS 101</div><div class="sub">Linked Lists</div></div>
    <span class="pill">Memory Model Demo</span>
  </div>

  <h2>Linked List Operations: Memory View</h2>

  <div class="dashboard-container">
    <div class="stage-wrapper">
        <svg id="ll-stage" width="900" height="180" viewBox="0 0 900 180">
            <defs>
                <marker id="arrow-main" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8" />
                </marker>
            </defs>
            <g id="line-layer"></g>
            <g id="node-layer"></g>
        </svg>
        <div id="empty-state" class="empty-msg" style="display:none;">List is Empty (Head = NULL)</div>
    </div>

    <div class="console-box">
        <span class="console-label">STATUS:</span>
        <span id="console-text">Ready.</span>
    </div>

    <div class="controls-grid">
        <div class="control-group">
            <div class="group-title">Modification</div>
            <div class="btn-row">
                <button class="btn btn-primary" onclick="llDemo.create()">Reset List</button>
                <button class="btn btn-success" onclick="llDemo.addOne()">Append (End)</button>
            </div>
            <div class="btn-row">
                <button class="btn btn-info" onclick="llDemo.insertOne()">Insert (At Pos 1)</button>
                <button class="btn btn-danger" onclick="llDemo.deleteOne()">Delete Head</button>
            </div>
        </div>

        <div class="control-group">
            <div class="group-title">Traversal</div>
            <div class="btn-row">
                <button class="btn btn-secondary" onclick="llDemo.traverse()">Traverse List</button>
                <button class="btn btn-secondary" onclick="llDemo.find(99)">Find '99'</button>
            </div>
             <div class="btn-row">
                 <button class="btn btn-sm" onclick="llDemo.addSpecific(99)">+ Add '99'</button>
                 <button class="btn btn-sm" onclick="llDemo.deleteAll()">Clear All</button>
            </div>
        </div>

        <div class="control-group">
            <div class="group-title">Visual Legend</div>
            <div style="font-size: 0.75rem; color: #475569; display: flex; flex-direction: column; gap: 4px;">
                <div style="display:flex; align-items:center; gap:5px;">
                    <span style="font-family: monospace; background:#e2e8f0; padding:2px 4px; border-radius:3px;">#ID:0</span> 
                    <span>= Node Address</span>
                </div>
                <div style="display:flex; align-items:center; gap:5px;">
                    <div style="border:1px solid #000; width:50px; height:20px; display:flex;">
                        <div style="width:60%; border-right:1px solid #000; font-size:10px; display:flex; align-items:center; justify-content:center;">VAL</div>
                        <div style="width:40%; font-size:10px; display:flex; align-items:center; justify-content:center; color:#64748b;">NEXT</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>

  <style>
    .dashboard-container { display: flex; flex-direction: column; gap: 15px; font-family: sans-serif; }
    
    .stage-wrapper { 
        background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; 
        height: 200px; position: relative; overflow: hidden;
    }
    
    .empty-msg { 
        position: absolute; width: 100%; text-align: center; top: 90px;
        color: #94a3b8; font-family: monospace;
    }

    .console-box { 
        background: #0f172a; color: #34d399; font-family: monospace; 
        padding: 12px; border-radius: 8px; font-size: 0.85rem; border-left: 4px solid #3b82f6;
    }

    /* Controls Layout */
    .controls-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
    .control-group { background: #fff; padding: 12px; border-radius: 10px; border: 1px solid #e2e8f0; }
    .group-title { font-size: 0.7rem; text-transform: uppercase; color: #94a3b8; font-weight: 700; margin-bottom: 10px; }
    .btn-row { display: flex; gap: 5px; margin-bottom: 5px; }
    .btn { border: none; padding: 8px; border-radius: 5px; font-size: 0.75rem; cursor: pointer; color: white; flex: 1; font-weight: 600; transition: filter 0.2s; }
    .btn:hover { filter: brightness(1.2); }
    
    .btn-primary { background: #3b82f6; }
    .btn-success { background: #10b981; }
    .btn-info { background: #06b6d4; }
    .btn-danger { background: #ef4444; }
    .btn-secondary { background: #64748b; }
    .btn-sm { background: #cbd5e1; color: #1e293b; }

    /* --- NODE STYLING --- */
    .node-group { transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1); }
    
    .node-rect { fill: white; stroke: #1e293b; stroke-width: 2px; }
    .node-divider { stroke: #1e293b; stroke-width: 1px; }
    
    .node-id { font-family: monospace; font-size: 11px; fill: #64748b; font-weight: bold; }
    .node-data { font-family: monospace; font-weight: bold; fill: #1e293b; font-size: 14px; pointer-events: none; }
    .next-val-text { font-family: monospace; font-size: 10px; font-weight: bold; pointer-events: none; }
    
    .pointer-line { stroke: #94a3b8; stroke-width: 2px; transition: opacity 0.3s; }
    
    /* Highlight States */
    .highlight-active .node-rect { fill: #fef08a; stroke: #ca8a04; }
    .highlight-active .node-divider { stroke: #ca8a04; }
    
    .highlight-traverse .node-rect { fill: #bbf7d0; stroke: #16a34a; }
    .highlight-traverse .node-divider { stroke: #16a34a; }
  </style>

  <script>
    class LinkedListDemo {
        constructor() {
            this.list = [];
            this.counter = 0;
            // Visual Config
            this.NODE_W = 110;  // Wider to fit "Next: #ID"
            this.NODE_H = 45;
            this.SPACING = 160;
            this.START_X = 50;
            this.START_Y = 80;

            setTimeout(() => {
                this.nodeLayer = document.getElementById('node-layer');
                this.lineLayer = document.getElementById('line-layer');
                this.console = document.getElementById('console-text');
                this.create();
            }, 50);
        }

        render(highlightId = null, highlightClass = '') {
            if (!this.nodeLayer) return;

            // Empty State Toggle
            const emptyState = document.getElementById('empty-state');
            emptyState.style.display = this.list.length === 0 ? 'block' : 'none';

            // 1. Remove nodes that are no longer in the list
            const currentIds = this.list.map(item => `node-${item.id}`);
            Array.from(this.nodeLayer.children).forEach(node => {
                if (!currentIds.includes(node.id)) node.remove();
            });

            // 2. Render Loop
            this.list.forEach((item, index) => {
                const nodeId = `node-${item.id}`;
                let g = document.getElementById(nodeId);
                const x = this.START_X + index * this.SPACING;
                const y = this.START_Y;

                // Determine what the "Next" box should say
                const nextNode = this.list[index + 1];
                const nextTextContent = nextNode ? `#${nextNode.id}` : "NULL";
                const nextTextColor = nextNode ? "#64748b" : "#ef4444"; // Red for NULL

                if (!g) {
                    // --- CREATE NEW NODE SVG ---
                    g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                    g.setAttribute('id', nodeId);
                    g.classList.add('node-group');
                    
                    // 1. ID Label (Above node)
                    const idText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    idText.setAttribute('x', this.NODE_W / 2); 
                    idText.setAttribute('y', -8);
                    idText.setAttribute('text-anchor', 'middle'); 
                    idText.classList.add('node-id');
                    idText.textContent = `#ID:${item.id}`;

                    // 2. Main Rectangle container
                    const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                    rect.setAttribute('width', this.NODE_W); 
                    rect.setAttribute('height', this.NODE_H);
                    rect.setAttribute('rx', 4); 
                    rect.classList.add('node-rect');

                    // 3. Vertical Divider Line (Splitting Data | Next)
                    const divider = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    divider.setAttribute('x1', this.NODE_W * 0.6); 
                    divider.setAttribute('y1', 0);
                    divider.setAttribute('x2', this.NODE_W * 0.6); 
                    divider.setAttribute('y2', this.NODE_H);
                    divider.classList.add('node-divider');

                    // 4. Data Value (Left side)
                    const dataText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    dataText.setAttribute('x', (this.NODE_W * 0.6) / 2); 
                    dataText.setAttribute('y', 28);
                    dataText.setAttribute('text-anchor', 'middle'); 
                    dataText.classList.add('node-data');
                    dataText.textContent = item.val;

                    // 5. Next Pointer Value (Right side)
                    const nextText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    nextText.setAttribute('x', this.NODE_W * 0.8); 
                    nextText.setAttribute('y', 28);
                    nextText.setAttribute('text-anchor', 'middle'); 
                    nextText.classList.add('next-val-text'); // Class used to update later
                    nextText.textContent = nextTextContent;
                    nextText.setAttribute('fill', nextTextColor);

                    g.appendChild(idText);
                    g.appendChild(rect);
                    g.appendChild(divider);
                    g.appendChild(dataText);
                    g.appendChild(nextText);
                    this.nodeLayer.appendChild(g);
                } else {
                    // --- UPDATE EXISTING NODE ---
                    // This handles the "Break Connection" logic visually.
                    // Even if a node exists, its 'next' property might have changed.
                    const nextLabel = g.querySelector('.next-val-text');
                    if (nextLabel) {
                        nextLabel.textContent = nextTextContent;
                        nextLabel.setAttribute('fill', nextTextColor);
                    }
                }

                // Animate position
                g.setAttribute('transform', `translate(${x}, ${y})`);
                
                // Styles
                g.classList.remove('highlight-active', 'highlight-traverse');
                if (item.id === highlightId) g.classList.add(highlightClass);
            });

            // 3. Render Connecting Arrows
            this.lineLayer.innerHTML = '';
            for (let i = 0; i < this.list.length - 1; i++) {
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                
                // Start: Right side of Next compartment
                const startX = this.START_X + i * this.SPACING + this.NODE_W;
                const startY = this.START_Y + (this.NODE_H / 2);
                
                // End: Left side of next Node
                const endX = this.START_X + (i + 1) * this.SPACING;
                const endY = this.START_Y + (this.NODE_H / 2);

                line.setAttribute('x1', startX);
                line.setAttribute('y1', startY);
                line.setAttribute('x2', endX);
                line.setAttribute('y2', endY);
                line.classList.add('pointer-line');
                line.setAttribute('marker-end', 'url(#arrow-main)');
                this.lineLayer.appendChild(line);
            }
        }

        log(msg) { if(this.console) this.console.textContent = msg; }

        create() {
            this.counter = 0;
            this.list = [10, 20, 30].map(v => ({id: this.counter++, val: v}));
            this.render();
            this.log("Created: 10 -> 20 -> 30");
        }

        addOne() {
            if(this.list.length >= 5) { this.log("List full (demo limit)"); return; }
            const val = Math.floor(Math.random() * 90) + 10;
            const newItem = {id: this.counter++, val: val};
            this.list.push(newItem);
            this.render(newItem.id, 'highlight-active');
            this.log(`Appended Node #${newItem.id}`);
        }

        addSpecific(val) {
            if(this.list.length >= 5) { this.log("List full"); return; }
            const newItem = {id: this.counter++, val: val};
            this.list.push(newItem);
            this.render(newItem.id, 'highlight-active');
        }

        insertOne() {
            // Logic: Insert at Index 1
            if (this.list.length < 1) { this.log("Need at least 1 node to insert after."); return; }
            
            const newItem = {id: this.counter++, val: 88};
            this.list.splice(1, 0, newItem);
            
            // The render function automatically handles the "connection breaking"
            // because it recalculates the "Next" text for the previous node (Index 0)
            this.render(newItem.id, 'highlight-active');
            this.log(`Inserted Node #${newItem.id} at Pos 1. Connection Updated.`);
        }

        deleteOne() {
            if (this.list.length === 0) return;
            const removed = this.list.shift();
            this.render();
            this.log(`Deleted Head (Node #${removed.id})`);
        }

        deleteAll() {
            this.list = [];
            this.render();
            this.log("List Cleared");
        }

        async traverse() {
            this.log("Traversing...");
            for(let item of this.list) {
                this.render(item.id, 'highlight-traverse');
                await new Promise(r => setTimeout(r, 600));
            }
            this.render();
            this.log("Traversal Complete");
        }
        
        find(target) {
            const found = this.list.find(item => item.val === target);
            if (found) {
                this.render(found.id, 'highlight-active');
                this.log(`Found value ${target} at Node #${found.id}`);
            } else {
                this.log(`Value ${target} not found.`);
            }
        }
        
        sortList() {
             this.list.sort((a, b) => a.val - b.val);
             this.render();
        }
        
        randomize() {
             this.list.sort(() => Math.random() - 0.5);
             this.render();
        }
    }

    const llDemo = new LinkedListDemo();
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta"><div class="course">CS 101</div><div class="sub">Doubly Linked Lists</div></div>
    <span class="pill">Memory Model Demo</span>
  </div>

  <h2>Doubly Linked List Dashboard</h2>

  <div class="dashboard-container">
    <div class="stage-wrapper">
        <svg id="dll-stage" width="900" height="200" viewBox="0 0 900 200">
            <defs>
                <marker id="arrow-next" markerWidth="8" markerHeight="6" refX="0" refY="3" orient="auto">
                    <polygon points="0 0, 8 3, 0 6" fill="#3b82f6" />
                </marker>
                <marker id="arrow-prev" markerWidth="8" markerHeight="6" refX="0" refY="3" orient="auto">
                    <polygon points="0 0, 8 3, 0 6" fill="#f97316" />
                </marker>
            </defs>
            <g id="dll-line-layer"></g>
            <g id="dll-node-layer"></g>
        </svg>
        <div id="dll-empty-state" class="empty-msg" style="display:none;">List is Empty (Head = NULL)</div>
    </div>

    <div class="console-box">
        <span class="console-label">STATUS:</span>
        <span id="dll-console-text">Ready.</span>
    </div>

    <div class="controls-grid">
        <div class="control-group">
            <div class="group-title">Structure</div>
            <div class="btn-row">
                <button class="btn btn-primary" onclick="window.dllDemo.create()">Reset List</button>
                <button class="btn btn-success" onclick="window.dllDemo.addOne()">Append</button>
            </div>
            <div class="btn-row">
                <button class="btn btn-info" onclick="window.dllDemo.insertOne()">Insert (Pos 1)</button>
                <button class="btn btn-danger" onclick="window.dllDemo.deleteHead()">Delete Head</button>
            </div>
        </div>

        <div class="control-group">
            <div class="group-title">Traversal</div>
            <div class="btn-row">
                <button class="btn btn-secondary" onclick="window.dllDemo.traverseForward()">Forward ></button>
                <button class="btn btn-secondary" onclick="window.dllDemo.traverseBackward()">< Backward</button>
            </div>
             <div class="btn-row">
                 <button class="btn btn-sm" onclick="window.dllDemo.addSpecific(77)">+ Add '77'</button>
                 <button class="btn btn-sm" onclick="window.dllDemo.deleteAll()">Clear All</button>
            </div>
        </div>

        <div class="control-group">
            <div class="group-title">Visual Legend</div>
            <div style="font-size: 0.7rem; color: #475569; display: flex; flex-direction: column; gap: 6px;">
                <div style="display:flex; align-items:center; gap:5px;">
                    <span style="width:30px; border-bottom:2px solid #3b82f6;"></span> 
                    <span>Next Pointer (Blue)</span>
                </div>
                <div style="display:flex; align-items:center; gap:5px;">
                    <span style="width:30px; border-bottom:2px solid #f97316;"></span> 
                    <span>Prev Pointer (Orange)</span>
                </div>
                 <div style="display:flex; align-items:center; gap:5px;">
                    <div style="border:1px solid #000; width:80px; height:20px; display:flex;">
                        <div style="flex:1; border-right:1px solid #ccc; font-size:8px; display:flex; align-items:center; justify-content:center; color:#f97316;">PREV</div>
                        <div style="flex:2; border-right:1px solid #ccc; font-size:8px; display:flex; align-items:center; justify-content:center;">VAL</div>
                        <div style="flex:1; font-size:8px; display:flex; align-items:center; justify-content:center; color:#3b82f6;">NEXT</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>

  <style>
    /* Scoped slightly to prevent style leaks */
    .dashboard-container { display: flex; flex-direction: column; gap: 15px; font-family: sans-serif; }
    
    .stage-wrapper { 
        background: #f8fafc; border: 2px solid #e2e8f0; border-radius: 12px; 
        height: 220px; position: relative; overflow: hidden;
    }
    .empty-msg { 
        position: absolute; width: 100%; text-align: center; top: 100px;
        color: #94a3b8; font-family: monospace;
    }
    .console-box { 
        background: #0f172a; color: #34d399; font-family: monospace; 
        padding: 12px; border-radius: 8px; font-size: 0.85rem; border-left: 4px solid #8b5cf6;
    }

    .controls-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
    .control-group { background: #fff; padding: 12px; border-radius: 10px; border: 1px solid #e2e8f0; }
    .group-title { font-size: 0.7rem; text-transform: uppercase; color: #94a3b8; font-weight: 700; margin-bottom: 10px; }
    
    .btn-row { display: flex; gap: 5px; margin-bottom: 5px; }
    .btn { border: none; padding: 8px; border-radius: 5px; font-size: 0.75rem; cursor: pointer; color: white; flex: 1; font-weight: 600; transition: filter 0.2s; }
    .btn:hover { filter: brightness(1.2); }
    
    .btn-primary { background: #8b5cf6; } 
    .btn-success { background: #10b981; }
    .btn-info { background: #06b6d4; }
    .btn-danger { background: #ef4444; }
    .btn-secondary { background: #64748b; }
    .btn-sm { background: #cbd5e1; color: #1e293b; }

    /* --- NODE STYLING --- */
    .node-group { transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1); }
    .node-rect { fill: white; stroke: #1e293b; stroke-width: 2px; }
    .node-divider { stroke: #cbd5e1; stroke-width: 1px; }
    
    .node-id { font-family: monospace; font-size: 11px; fill: #64748b; font-weight: bold; }
    .node-data { font-family: monospace; font-weight: bold; fill: #1e293b; font-size: 14px; pointer-events: none; }
    
    .ptr-text { font-family: monospace; font-size: 9px; font-weight: bold; pointer-events: none; }

    .line-next { stroke: #3b82f6; stroke-width: 2px; }
    .line-prev { stroke: #f97316; stroke-width: 2px; }
    
    .highlight-active .node-rect { fill: #fef08a; stroke: #ca8a04; }
    .highlight-active .node-divider { stroke: #ca8a04; }
    .highlight-traverse .node-rect { fill: #bbf7d0; stroke: #16a34a; }
  </style>

  <script>
    class DoublyLinkedListDemo {
        constructor() {
            this.list = [];
            this.counter = 0;
            // Visual Config
            this.NODE_W = 140; 
            this.NODE_H = 45;
            this.SPACING = 180; 
            this.START_X = 40;
            this.START_Y = 90;

            // Wait for DOM to be fully parsed
            setTimeout(() => {
                this.nodeLayer = document.getElementById('dll-node-layer');
                this.lineLayer = document.getElementById('dll-line-layer');
                this.console = document.getElementById('dll-console-text');
                this.create();
            }, 100);
        }

        render(highlightId = null, highlightClass = '') {
            if (!this.nodeLayer) return;

            // Empty State
            const emptyState = document.getElementById('dll-empty-state');
            emptyState.style.display = this.list.length === 0 ? 'block' : 'none';

            // 1. Cleanup old nodes
            const currentIds = this.list.map(item => `dll-node-${item.id}`);
            Array.from(this.nodeLayer.children).forEach(node => {
                if (!currentIds.includes(node.id)) node.remove();
            });

            // 2. Render Nodes
            this.list.forEach((item, index) => {
                const nodeId = `dll-node-${item.id}`;
                let g = document.getElementById(nodeId);
                const x = this.START_X + index * this.SPACING;
                const y = this.START_Y;

                // --- CALCULATE POINTER VALUES ---
                const prevNode = this.list[index - 1];
                const nextNode = this.list[index + 1];

                const prevTxt = prevNode ? `#${prevNode.id}` : "NULL";
                const prevCol = prevNode ? "#f97316" : "#ef4444"; // Orange or Red

                const nextTxt = nextNode ? `#${nextNode.id}` : "NULL";
                const nextCol = nextNode ? "#3b82f6" : "#ef4444"; // Blue or Red

                if (!g) {
                    // Create SVG Group
                    g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                    g.setAttribute('id', nodeId);
                    g.classList.add('node-group');

                    // A. ID Label
                    const idText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    idText.setAttribute('x', this.NODE_W / 2); idText.setAttribute('y', -8);
                    idText.setAttribute('text-anchor', 'middle'); idText.classList.add('node-id');
                    idText.textContent = `#ID:${item.id}`;

                    // B. Main Rect
                    const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                    rect.setAttribute('width', this.NODE_W); rect.setAttribute('height', this.NODE_H);
                    rect.setAttribute('rx', 4); rect.classList.add('node-rect');

                    // C. Dividers (Two lines for 3 sections)
                    // Section 1 Divider
                    const div1 = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    div1.setAttribute('x1', this.NODE_W * 0.25); div1.setAttribute('y1', 0);
                    div1.setAttribute('x2', this.NODE_W * 0.25); div1.setAttribute('y2', this.NODE_H);
                    div1.classList.add('node-divider');

                    // Section 2 Divider
                    const div2 = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    div2.setAttribute('x1', this.NODE_W * 0.75); div2.setAttribute('y1', 0);
                    div2.setAttribute('x2', this.NODE_W * 0.75); div2.setAttribute('y2', this.NODE_H);
                    div2.classList.add('node-divider');

                    // D. Text Content
                    // PREV Text Placeholder
                    const tPrev = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    tPrev.setAttribute('x', (this.NODE_W * 0.25) / 2); tPrev.setAttribute('y', 28);
                    tPrev.setAttribute('text-anchor', 'middle'); tPrev.classList.add('ptr-text', 'prev-val');
                    
                    // DATA Text
                    const tData = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    tData.setAttribute('x', this.NODE_W * 0.5); tData.setAttribute('y', 28);
                    tData.setAttribute('text-anchor', 'middle'); tData.classList.add('node-data');
                    tData.textContent = item.val;

                    // NEXT Text Placeholder
                    const tNext = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    tNext.setAttribute('x', this.NODE_W * 0.875); tNext.setAttribute('y', 28);
                    tNext.setAttribute('text-anchor', 'middle'); tNext.classList.add('ptr-text', 'next-val');

                    g.appendChild(idText); g.appendChild(rect);
                    g.appendChild(div1); g.appendChild(div2);
                    g.appendChild(tPrev); g.appendChild(tData); g.appendChild(tNext);
                    this.nodeLayer.appendChild(g);
                }

                // Update Dynamic Text (For existing and new nodes)
                const txtP = g.querySelector('.prev-val');
                if(txtP) { txtP.textContent = prevTxt; txtP.setAttribute('fill', prevCol); }
                
                const txtN = g.querySelector('.next-val');
                if(txtN) { txtN.textContent = nextTxt; txtN.setAttribute('fill', nextCol); }

                // Move and Highlight
                g.setAttribute('transform', `translate(${x}, ${y})`);
                g.classList.remove('highlight-active', 'highlight-traverse');
                if (item.id === highlightId) g.classList.add(highlightClass);
            });

            // 3. Render Dual Arrows
            this.lineLayer.innerHTML = '';
            for (let i = 0; i < this.list.length - 1; i++) {
                // NEXT Arrow (Top, Blue, Forward)
                const lNext = document.createElementNS("http://www.w3.org/2000/svg", "line");
                lNext.setAttribute('x1', this.START_X + i * this.SPACING + this.NODE_W); 
                lNext.setAttribute('y1', this.START_Y + 15);
                lNext.setAttribute('x2', this.START_X + (i + 1) * this.SPACING); 
                lNext.setAttribute('y2', this.START_Y + 15);
                lNext.setAttribute('marker-end', 'url(#arrow-next)');
                lNext.classList.add('line-next');

                // PREV Arrow (Bottom, Orange, Backward)
                const lPrev = document.createElementNS("http://www.w3.org/2000/svg", "line");
                lPrev.setAttribute('x1', this.START_X + (i + 1) * this.SPACING); 
                lPrev.setAttribute('y1', this.START_Y + 30);
                lPrev.setAttribute('x2', this.START_X + i * this.SPACING + this.NODE_W); 
                lPrev.setAttribute('y2', this.START_Y + 30);
                lPrev.setAttribute('marker-end', 'url(#arrow-prev)');
                lPrev.classList.add('line-prev');

                this.lineLayer.appendChild(lNext);
                this.lineLayer.appendChild(lPrev);
            }
        }

        log(msg) { if(this.console) this.console.textContent = msg; }

        create() {
            this.counter = 0;
            this.list = [10, 20, 30].map(v => ({id: this.counter++, val: v}));
            this.render();
            this.log("List Created. Links established.");
        }

        addOne() {
            if(this.list.length >= 4) { this.log("List full"); return; }
            const val = Math.floor(Math.random() * 90) + 10;
            const newItem = {id: this.counter++, val: val};
            this.list.push(newItem);
            this.render(newItem.id, 'highlight-active');
            this.log(`Append Node #${newItem.id}. Updated tail links.`);
        }

        addSpecific(val) {
            if(this.list.length >= 4) { this.log("List full"); return; }
            const newItem = {id: this.counter++, val: val};
            this.list.push(newItem);
            this.render(newItem.id, 'highlight-active');
        }

        insertOne() {
            if (this.list.length < 1) return;
            const newItem = {id: this.counter++, val: 55};
            this.list.splice(1, 0, newItem);
            this.render(newItem.id, 'highlight-active');
            this.log(`Inserted Node #${newItem.id} at [1]. 4 pointers updated!`);
        }

        deleteHead() {
            if (this.list.length === 0) return;
            const removed = this.list.shift();
            this.render();
            this.log(`Deleted Head. New Head Prev is now NULL.`);
        }

        deleteAll() {
            this.list = [];
            this.render();
        }

        async traverseForward() {
            this.log("Traversing Forward (Head -> Tail)...");
            for(let item of this.list) {
                this.render(item.id, 'highlight-traverse');
                await new Promise(r => setTimeout(r, 600));
            }
            this.render();
            this.log("Done.");
        }

        async traverseBackward() {
            this.log("Traversing Backward (Tail -> Head)...");
            for(let i = this.list.length - 1; i >= 0; i--) {
                this.render(this.list[i].id, 'highlight-active'); 
                await new Promise(r => setTimeout(r, 600));
            }
            this.render();
            this.log("Done.");
        }
    }

    // Bind to window to ensure global access for button onclicks
    window.dllDemo = new DoublyLinkedListDemo();
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Topology Change</div>
    </div>
    <span class="pill">Insert (Middle)</span>
  </div>

  <h2>Inserting a Node</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #f59e0b;">
        <h3 style="margin:0 0 10px; color:#b45309; font-size:18px;">The "Golden Rule" of Insertion</h3>
        <p style="margin:0; font-size:16px;">
          Always connect your <strong>New Node</strong> to the rest of the list <em>before</em> you break the chain from the <strong>Current Node</strong>.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div id="ins-line-1" class="line">// 1. Find the spot (after 'current')</div>
        <div id="ins-line-2" class="line">Node current = head;</div>
        <div id="ins-line-3" class="line">while (current.data != target) {</div>
        <div id="ins-line-4" class="line">&nbsp;&nbsp;current = current.next;</div>
        <div id="ins-line-5" class="line">}</div>
        <div id="ins-line-6" class="line" style="margin-top:10px;">// 2. The Rewire (Careful!)</div>
        <div id="ins-line-7" class="line">toAdd.next = current.next;</div>
        <div id="ins-line-8" class="line">current.next = toAdd;</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:400px;">
      
      <svg id="insert-stage" width="100%" height="220" viewBox="0 0 500 220" style="overflow:visible;">
        <defs>
            <marker id="arrow-ins" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
            </marker>
            <marker id="arrow-new" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#16a34a"/>
            </marker>
        </defs>
        
        <g id="ins-list-group"></g>

        <g id="ins-new-node" transform="translate(180, 150)" style="opacity:0; transition:opacity 0.5s;">
           <rect width="60" height="40" rx="4" fill="#dcfce7" stroke="#16a34a" stroke-width="2"/>
           <text x="30" y="25" text-anchor="middle" font-weight="bold" fill="#14532d">New</text>
           <text x="30" y="-10" text-anchor="middle" font-size="12" fill="#16a34a">toAdd</text>
        </g>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0;">
        <div id="ins-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px; height:20px;">Ready.</div>
        
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
           <button class="btn btn-secondary" onclick="insertDemo.reset()">Reset</button>
           <button class="btn btn-primary" onclick="insertDemo.play()">â–¶ Visualize Insertion</button>
        </div>
      </div>

    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Insert</div><div class="slide-no"></div></div>

  <script>
    const insertDemo = {
        step: 0,
        timer: null,
        
        reset: function() {
            clearTimeout(this.timer);
            this.step = 0;
            this.clearHighlights();
            document.getElementById('ins-msg').textContent = "Ready.";
            
            // Reset Graphics
            const g = document.getElementById('ins-list-group');
            g.innerHTML = '';
            document.getElementById('ins-new-node').style.opacity = '0';
            
            // Draw List: Head -> A -> B -> C
            this.drawNode(20, 50, 'Head', 'node-head');
            this.drawArrow(70, 70, 100, 70, 'arrow-1');
            this.drawNode(100, 50, 'A', 'node-a'); // Target
            this.drawArrow(150, 70, 200, 70, 'arrow-2'); // The link to break
            this.drawNode(200, 50, 'B', 'node-b');
            this.drawArrow(250, 70, 300, 70, 'arrow-3');
            this.drawNode(300, 50, 'C', 'node-c');
            
            // Remove any extra dynamic lines
            const dyn = document.querySelectorAll('.dynamic-arrow');
            dyn.forEach(el => el.remove());
        },

        play: function() {
            if(this.step > 0) this.reset();
            this.nextStep();
        },

        nextStep: function() {
            const msg = document.getElementById('ins-msg');
            
            // 1. Init
            if (this.step === 0) {
                this.highlight('ins-line-2');
                msg.textContent = "Start at Head. Target is 'A'.";
                this.timer = setTimeout(() => this.nextStep(), 1500);
            }
            // 2. Traversal
            else if (this.step === 1) {
                this.highlight('ins-line-3');
                this.highlightNode('node-head');
                msg.textContent = "Checking Head... Not 'A'.";
                this.timer = setTimeout(() => this.nextStep(), 1500);
            }
            else if (this.step === 2) {
                this.highlight('ins-line-4');
                this.highlightNode('node-a'); // Found
                msg.textContent = "Current is 'A'. Found Target!";
                
                // Show New Node
                document.getElementById('ins-new-node').style.opacity = '1';
                
                this.timer = setTimeout(() => this.nextStep(), 1500);
            }
            // 3. Rewire Step 1
            else if (this.step === 3) {
                this.highlight('ins-line-7');
                msg.textContent = "toAdd.next = current.next (B)";
                
                // Draw Green Arrow from New -> B
                this.drawDynamicArrow(240, 170, 230, 95, 'green'); // Up and right
                
                this.timer = setTimeout(() => this.nextStep(), 2000);
            }
            // 4. Rewire Step 2
            else if (this.step === 4) {
                this.highlight('ins-line-8');
                msg.textContent = "current.next = toAdd";
                
                // Fade out old arrow (A->B)
                document.getElementById('arrow-2').style.opacity = '0.2';
                document.getElementById('arrow-2').setAttribute('stroke-dasharray', '4');
                
                // Draw new arrow (A->New)
                this.drawDynamicArrow(130, 95, 180, 150, 'black');
                
                msg.textContent = "Insertion Complete!";
            }
            
            this.step++;
        },
        
        // Helpers
        highlight: function(id) {
            this.clearHighlights();
            document.getElementById(id).classList.add('active-line');
        },
        
        clearHighlights: function() {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.querySelectorAll('.node-rect').forEach(r => {
                r.setAttribute('stroke', '#0f172a');
                r.setAttribute('stroke-width', '2');
            });
        },
        
        highlightNode: function(id) {
             const grp = document.getElementById(id);
             if(grp) {
                 const rect = grp.querySelector('rect');
                 rect.setAttribute('stroke', '#f59e0b');
                 rect.setAttribute('stroke-width', '4');
             }
        },

        drawNode: function(x, y, txt, id) {
            const g = document.getElementById('ins-list-group');
            const grp = document.createElementNS("http://www.w3.org/2000/svg", "g");
            grp.setAttribute('id', id);
            grp.setAttribute('transform', `translate(${x}, ${y})`);
            
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute('width', 50); rect.setAttribute('height', 40);
            rect.setAttribute('rx', 4); rect.classList.add('node-rect');
            rect.setAttribute('fill', '#fff'); rect.setAttribute('stroke', '#0f172a'); rect.setAttribute('stroke-width', '2');

            const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
            text.setAttribute('x', 25); text.setAttribute('y', 25);
            text.setAttribute('text-anchor', 'middle'); text.textContent = txt;
            text.setAttribute('font-weight', 'bold');

            grp.appendChild(rect); grp.appendChild(text);
            g.appendChild(grp);
        },

        drawArrow: function(x1, y1, x2, y2, id) {
            const g = document.getElementById('ins-list-group');
            const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
            l.setAttribute('id', id);
            l.setAttribute('x1', x1); l.setAttribute('y1', y1);
            l.setAttribute('x2', x2); l.setAttribute('y2', y2);
            l.setAttribute('stroke', '#64748b'); l.setAttribute('stroke-width', '2');
            l.setAttribute('marker-end', 'url(#arrow-ins)');
            g.appendChild(l);
        },
        
        drawDynamicArrow: function(x1, y1, x2, y2, color) {
            const svg = document.getElementById('insert-stage');
            const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
            l.setAttribute('class', 'dynamic-arrow');
            l.setAttribute('x1', x1); l.setAttribute('y1', y1);
            l.setAttribute('x2', x2); l.setAttribute('y2', y2);
            l.setAttribute('stroke', color === 'green' ? '#16a34a' : '#0f172a'); 
            l.setAttribute('stroke-width', '3');
            l.setAttribute('marker-end', color === 'green' ? 'url(#arrow-new)' : 'url(#arrow-ins)');
            
            // Animation
            l.style.opacity = '0';
            svg.appendChild(l);
            
            // Trigger reflow
            setTimeout(() => l.style.opacity = '1', 50);
        }
    };
    
    setTimeout(() => insertDemo.reset(), 500);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Combining Collections</div>
    </div>
    <span class="pill">Merge Lists</span>
  </div>

  <h2>Merging Two Lists</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card">
        <h3 style="margin:0 0 10px; color:var(--accent);">The Concept</h3>
        <p style="margin:0; font-size:16px;">
          To merge <strong>List B</strong> onto the end of <strong>List A</strong>, you only need to change <em>one pointer</em>.
          <br><br>
          1. Traverse to the end of List A (Last Node).
          <br>
          2. Change <code>Last.next</code> from <code>NULL</code> to <code>Head B</code>.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div id="mrg-line-1" class="line">Node current = headA;</div>
        <div id="mrg-line-2" class="line">// 1. Find the tail of List A</div>
        <div id="mrg-line-3" class="line">while (current.next != null) {</div>
        <div id="mrg-line-4" class="line">&nbsp;&nbsp;current = current.next;</div>
        <div id="mrg-line-5" class="line">}</div>
        <div id="mrg-line-6" class="line" style="margin-top:10px;">// 2. Link Tail A to Head B</div>
        <div id="mrg-line-7" class="line">current.next = headB;</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:400px;">
      
      <svg id="merge-stage" width="100%" height="250" viewBox="0 0 500 250" style="overflow:visible;">
        <defs>
            <marker id="arrow-mrg" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
            </marker>
             <marker id="arrow-link" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#16a34a"/>
            </marker>
        </defs>
        
        <g id="list-a-grp"></g>
        
        <g id="list-b-grp" transform="translate(0, 100)"></g>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0;">
         <div id="merge-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px; height:20px;">Ready to Merge.</div>
         <div style="display:flex; gap:10px;">
             <button class="btn btn-secondary" onclick="mergeDemo.reset()">Reset</button>
             <button class="btn btn-success" onclick="mergeDemo.animate()">Connect (Merge)</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Merge</div><div class="slide-no"></div></div>

  <script>
    const mergeDemo = {
        timer: null,
        
        reset: function() {
            clearTimeout(this.timer);
            this.clearHighlights();
            document.getElementById('merge-msg').textContent = "Two separate lists.";
            
            // Clear Stage
            document.getElementById('list-a-grp').innerHTML = '';
            document.getElementById('list-b-grp').innerHTML = '';
            document.getElementById('list-b-grp').style.transition = 'transform 1s ease';
            document.getElementById('list-b-grp').setAttribute('transform', 'translate(0, 100)');
            
            // Draw List A (Top)
            this.drawNode('list-a-grp', 20, 30, 'A1', 'blue');
            this.drawArrow('list-a-grp', 70, 50, 100, 50);
            this.drawNode('list-a-grp', 100, 30, 'A2', 'blue');
            this.drawArrow('list-a-grp', 150, 50, 180, 50, 'link-a-end'); // ID for removing later
            this.drawNull('list-a-grp', 190, 45, 'null-a');

            // Draw List B (Bottom)
            this.drawNode('list-b-grp', 20, 30, 'B1', 'green');
            this.drawArrow('list-b-grp', 70, 50, 100, 50);
            this.drawNode('list-b-grp', 100, 30, 'B2', 'green');
            this.drawArrow('list-b-grp', 150, 50, 180, 50);
            this.drawNull('list-b-grp', 190, 45, 'null-b');
        },

        animate: function() {
            this.reset();
            const msg = document.getElementById('merge-msg');
            
            // Step 1: Traverse
            this.highlight('mrg-line-1');
            msg.textContent = "Start at Head A...";
            
            this.timer = setTimeout(() => {
                this.highlight('mrg-line-3');
                msg.textContent = "Traversing to end of A...";
                
                // Visual traversal (fast)
                this.highlightNode('A1');
                setTimeout(() => this.highlightNode('A2'), 600);
                
                this.timer = setTimeout(() => {
                    // Step 2: Found End
                    this.highlight('mrg-line-7');
                    msg.textContent = "Found Tail (A2). Linking to Head B...";
                    
                    // The Transformation
                    const nullA = document.getElementById('null-a');
                    const linkA = document.getElementById('link-a-end');
                    if(nullA) nullA.style.opacity = '0'; // Hide NULL
                    if(linkA) linkA.style.opacity = '0'; // Hide old arrow
                    
                    // Move List B Up
                    const listB = document.getElementById('list-b-grp');
                    listB.setAttribute('transform', 'translate(180, 0)'); // Move B to end of A
                    
                    // Draw Connecting Arrow
                    this.drawLinkArrow();
                    
                    msg.textContent = "Merge Complete! A -> B";
                    
                }, 1200);
            }, 800);
        },

        // --- Drawing Helpers ---
        drawNode: function(pid, x, y, txt, color) {
            const p = document.getElementById(pid);
            const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
            g.setAttribute('transform', `translate(${x},${y})`);
            g.setAttribute('id', 'node-'+txt);
            
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute('width', 50); rect.setAttribute('height', 40);
            rect.setAttribute('rx', 4); 
            rect.setAttribute('fill', '#fff');
            rect.setAttribute('stroke', color === 'blue' ? '#2563eb' : '#16a34a');
            rect.setAttribute('stroke-width', 2);
            
            const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
            text.setAttribute('x', 25); text.setAttribute('y', 25);
            text.setAttribute('text-anchor', 'middle'); text.textContent = txt;
            text.setAttribute('font-weight', 'bold');
            
            g.appendChild(rect); g.appendChild(text);
            p.appendChild(g);
        },

        drawArrow: function(pid, x1, y1, x2, y2, id=null) {
            const p = document.getElementById(pid);
            const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
            if(id) l.setAttribute('id', id);
            l.setAttribute('x1', x1); l.setAttribute('y1', y1);
            l.setAttribute('x2', x2); l.setAttribute('y2', y2);
            l.setAttribute('stroke', '#64748b'); l.setAttribute('stroke-width', 2);
            l.setAttribute('marker-end', 'url(#arrow-mrg)');
            p.appendChild(l);
        },
        
        drawLinkArrow: function() {
            const stage = document.getElementById('merge-stage');
            const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
            // From End of A (150 + 50 width = 200 approx) to Start of Moved B (180 + 20 pad = 200)
            // Coordinates based on calculation: 
            // A2 is at x=100. Width 50. Right edge x=150. Center Y=50.
            // B1 moved to translate(180, 0). Local x=20. Global x=200.
            l.setAttribute('x1', 150); l.setAttribute('y1', 50);
            l.setAttribute('x2', 200); l.setAttribute('y2', 50);
            l.setAttribute('stroke', '#16a34a'); l.setAttribute('stroke-width', 4);
            l.setAttribute('marker-end', 'url(#arrow-link)');
            l.style.animation = "fadeIn 0.5s ease";
            stage.appendChild(l);
        },

        drawNull: function(pid, x, y, id) {
            const p = document.getElementById(pid);
            const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
            t.setAttribute('id', id);
            t.setAttribute('x', x); t.setAttribute('y', y);
            t.textContent = "NULL";
            t.setAttribute('font-size', 10); t.setAttribute('fill', '#94a3b8');
            p.appendChild(t);
        },
        
        highlight: function(lineId) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            const el = document.getElementById(lineId);
            if(el) el.classList.add('active-line');
        },
        
        highlightNode: function(nodeTxt) {
            const el = document.getElementById('node-'+nodeTxt);
            if(el) {
                const r = el.querySelector('rect');
                r.style.fill = '#fef3c7'; // yellow
                setTimeout(() => r.style.fill = '#fff', 400);
            }
        },
        
        clearHighlights: function() {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            // Remove dynamically added link arrows
            const stage = document.getElementById('merge-stage');
            // Keep groups, remove standalone lines
            Array.from(stage.children).forEach(c => {
                if(c.tagName === 'line') c.remove();
            });
        }
    };
    
    setTimeout(() => mergeDemo.reset(), 500);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Edge Case Analysis</div>
    </div>
    <span class="pill">Delete Last (Naive Approach)</span>
  </div>

  <h2>The "Next.Next" Problem</h2>
  
  <div class="grid-2">
    <div class="code-block" style="font-size:13px; padding:15px; position:relative;">
      <div class="line comment">// Goal: Stop at the 2nd to last node</div>
      <div id="c-line-1" class="line">Node current = head;</div>
      <div class="line comment">// DANGER: Checking 2 steps ahead</div>
      <div id="c-line-2" class="line">while (current.next.next != null) {</div>
      <div id="c-line-3" class="line">&nbsp;&nbsp;current = current.next;</div>
      <div id="c-line-4" class="line">}</div>
      <div id="c-line-5" class="line">current.next = null; // Delete</div>

      <div id="crash-overlay" style="display:none; position:absolute; top:40%; left:10%; right:10%; background:#fef2f2; border:2px solid #ef4444; color:#b91c1c; padding:10px; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.2); text-align:center; animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
         <div style="font-weight:bold; font-size:1.1em; margin-bottom:5px;">â›” CRASH: NullReference</div>
         <div style="font-size:0.85em; opacity:0.9;">
            Attempted to read <code>.next</code> on a NULL value.<br>
            <code>current.next</code> was NULL.
         </div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:360px;">
      
      <svg id="crash-stage" width="100%" height="220" viewBox="0 0 500 220" style="overflow:visible;">
         <defs>
            <marker id="arrow-gray" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
               <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
            </marker>
            <marker id="arrow-probe" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
               <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
            </marker>
         </defs>
         
         <g id="crash-nodes"></g>
         
         <g id="ptr-current" style="display:none; transition: transform 0.5s ease;">
            <text x="0" y="85" text-anchor="middle" font-size="12" font-weight="bold" fill="#3b82f6">current</text>
            <line x1="0" y1="75" x2="0" y2="45" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrow-gray)" />
         </g>

         <g id="ptr-probe" style="display:none;">
            <path id="probe-path" d="" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrow-probe)"/>
            <text id="probe-text" x="0" y="0" font-size="11" fill="#8b5cf6" font-weight="bold">Checking .next.next</text>
         </g>
      </svg>

      <div class="controls-grid" style="grid-template-columns: 1fr 1fr;">
        <button class="btn btn-secondary" onclick="crashDemo.reset('SAFE')">Load: 3 Nodes (Safe)</button>
        <button class="btn btn-secondary" onclick="crashDemo.reset('CRASH')">Load: 1 Node (Unsafe)</button>
        <button class="btn btn-danger" onclick="crashDemo.run()" style="grid-column: span 2; font-weight:800;">â–¶ Run Code</button>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Defensive Coding</div><div class="slide-no"></div></div>

  <style>
    .line { padding: 2px 5px; border-radius: 4px; transition: background 0.2s; }
    .active-line { background: #334155; border-left: 3px solid #fcd34d; color: #fff; }
    .comment { color: #64748b; font-style: italic; }
    
    /* Node Styles matching previous slides */
    .c-node-rect { fill: white; stroke: #1e293b; stroke-width: 2px; }
    .c-node-div { stroke: #cbd5e1; stroke-width: 1px; }
    .c-node-txt { font-family: monospace; font-weight: bold; font-size: 14px; fill: #1e293b; }
    .c-node-next { font-family: monospace; font-size: 10px; fill: #64748b; }
    
    @keyframes popIn { from { opacity:0; transform: scale(0.9); } to { opacity:1; transform: scale(1); } }
    @keyframes shakeBox { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
    .shaking { animation: shakeBox 0.4s ease-in-out; }
  </style>

  <script>
    const crashDemo = {
        mode: 'SAFE',
        list: [],
        NODE_W: 100,
        NODE_H: 40,
        SPACING: 150,
        START_X: 50,
        START_Y: 50,
        
        reset: function(mode) {
            this.mode = mode;
            document.getElementById('crash-overlay').style.display = 'none';
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById('ptr-current').style.display = 'none';
            document.getElementById('ptr-probe').style.display = 'none';
            
            const g = document.getElementById('crash-nodes');
            g.innerHTML = '';
            
            // Build Data
            if (mode === 'SAFE') {
                this.list = [
                    {val: 'Head', next: '#2'}, 
                    {val: 'A', next: '#3'}, 
                    {val: 'B', next: 'NULL'}
                ];
            } else {
                this.list = [
                    {val: 'Head', next: 'NULL'}
                ];
            }

            // Draw Nodes
            this.list.forEach((node, i) => {
                const grp = document.createElementNS("http://www.w3.org/2000/svg", "g");
                const x = this.START_X + (i * this.SPACING);
                grp.setAttribute('transform', `translate(${x}, ${this.START_Y})`);
                
                // Rect
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttribute('width', this.NODE_W); rect.setAttribute('height', this.NODE_H);
                rect.setAttribute('rx', 4); rect.classList.add('c-node-rect');
                
                // Divider
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute('x1', this.NODE_W * 0.65); line.setAttribute('y1', 0);
                line.setAttribute('x2', this.NODE_W * 0.65); line.setAttribute('y2', this.NODE_H);
                line.classList.add('c-node-div');
                
                // Val
                const tVal = document.createElementNS("http://www.w3.org/2000/svg", "text");
                tVal.setAttribute('x', this.NODE_W * 0.32); tVal.setAttribute('y', 25);
                tVal.setAttribute('text-anchor', 'middle'); tVal.classList.add('c-node-txt');
                tVal.textContent = node.val;
                
                // Next
                const tNext = document.createElementNS("http://www.w3.org/2000/svg", "text");
                tNext.setAttribute('x', this.NODE_W * 0.82); tNext.setAttribute('y', 25);
                tNext.setAttribute('text-anchor', 'middle'); tNext.classList.add('c-node-next');
                tNext.textContent = node.next === 'NULL' ? 'NULL' : node.next;
                if(node.next === 'NULL') tNext.setAttribute('fill', '#ef4444');

                grp.appendChild(rect); grp.appendChild(line);
                grp.appendChild(tVal); grp.appendChild(tNext);
                g.appendChild(grp);

                // Draw Arrow to next (if exists)
                if (i < this.list.length - 1) {
                    const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    l.setAttribute('x1', x + this.NODE_W); l.setAttribute('y1', this.START_Y + 20);
                    l.setAttribute('x2', x + this.SPACING); l.setAttribute('y2', this.START_Y + 20);
                    l.setAttribute('stroke', '#94a3b8'); l.setAttribute('stroke-width', 2);
                    l.setAttribute('marker-end', 'url(#arrow-gray)');
                    g.appendChild(l);
                }
            });
        },

        run: async function() {
            // Reset visual artifacts
            this.reset(this.mode);
            const ptr = document.getElementById('ptr-current');
            const probe = document.getElementById('ptr-probe');
            const probePath = document.getElementById('probe-path');
            const probeText = document.getElementById('probe-text');
            
            // 1. Initialize Current
            this.hl('c-line-1');
            ptr.style.display = 'block';
            let currIdx = 0;
            this.movePtr(0);
            await this.wait(800);

            // LOOP
            while(true) {
                // 2. Check Condition
                this.hl('c-line-2');
                
                // VISUALIZE THE "LOOK AHEAD"
                probe.style.display = 'block';
                const startX = this.START_X + (currIdx * this.SPACING) + (this.NODE_W/2);
                
                // Calculate curve to next.next
                // If next exists, jump to next+1. If next is null, crash curve.
                const hasNext = currIdx < this.list.length - 1;
                const hasNextNext = currIdx < this.list.length - 2;

                if (hasNext) {
                    // Draw arc from current to current+2
                    const targetX = startX + (this.SPACING * 2); 
                    const pathStr = `M ${startX} ${this.START_Y} Q ${startX + this.SPACING} ${this.START_Y - 80} ${targetX} ${this.START_Y}`;
                    probePath.setAttribute('d', pathStr);
                    probePath.setAttribute('stroke', '#8b5cf6'); // Purple (Active)
                    probeText.setAttribute('x', startX + this.SPACING);
                    probeText.setAttribute('y', this.START_Y - 50);
                    probeText.textContent = "Checking .next.next...";
                    
                    await this.wait(1000);
                    
                    if (hasNextNext) {
                        // Safe!
                        probe.style.display = 'none';
                        this.hl('c-line-3'); // Body
                        currIdx++;
                        this.movePtr(currIdx);
                        await this.wait(800);
                    } else {
                        // Next.next is NULL (End of loop condition met)
                        probeText.textContent = "Found NULL! Stop.";
                        await this.wait(800);
                        probe.style.display = 'none';
                        break; // Exit Loop
                    }
                } else {
                    // CRASH SCENARIO: current.next is NULL.
                    // Draw arc that crashes into nothingness
                    const targetX = startX + (this.SPACING * 1.5);
                    const pathStr = `M ${startX} ${this.START_Y} Q ${startX + 50} ${this.START_Y - 60} ${targetX} ${this.START_Y}`;
                    probePath.setAttribute('d', pathStr);
                    probePath.setAttribute('stroke', '#ef4444'); // Red
                    probeText.setAttribute('x', startX + 60);
                    probeText.setAttribute('y', this.START_Y - 40);
                    probeText.textContent = "current.next is NULL!";
                    
                    await this.wait(800);
                    
                    // Show Crash
                    const err = document.getElementById('crash-overlay');
                    err.style.display = 'block';
                    err.classList.add('shaking');
                    return; // STOP EXECUTION
                }
            }
            
            // 3. Delete
            this.hl('c-line-5');
            const g = document.getElementById('crash-nodes');
            // Visually remove last node and arrow
            if(g.children.length > 2) {
                g.lastElementChild.remove(); // Remove arrow
                g.lastElementChild.remove(); // Remove Node B
                
                // Update Node A to say NULL
                const nodeAGroup = g.children[1]; // Very rough selection for demo
                const textNext = nodeAGroup.querySelector('.c-node-next');
                if(textNext) {
                    textNext.textContent = "NULL";
                    textNext.setAttribute('fill', '#ef4444');
                }
            }
        },

        movePtr: function(idx) {
            const x = this.START_X + (idx * this.SPACING) + (this.NODE_W / 2);
            const ptr = document.getElementById('ptr-current');
            ptr.setAttribute('transform', `translate(${x}, 0)`);
        },

        hl: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },

        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    // Init
    setTimeout(() => crashDemo.reset('SAFE'), 200);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>


<section class="slide" id="efficiency-slide">
  <style>
    #efficiency-slide {
      font-family: 'Inter', system-ui, sans-serif;
      background: #fff;
      padding: 40px;
      color: #1e293b;
    }

    /* Header */
    .eff-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 30px; border-bottom: 2px solid #f1f5f9; padding-bottom: 15px; }
    .eff-title h2 { font-size: 2.2rem; font-weight: 800; color: #0f172a; margin: 0; }
    .eff-subtitle { font-size: 0.9rem; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 1px; }
    .eff-badge { background: #fef3c7; color: #b45309; padding: 6px 14px; border-radius: 20px; font-weight: 700; font-size: 0.85rem; border: 1px solid #fcd34d; }

    /* Layout */
    .comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; height: 75%; }
    
    .panel { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; display: flex; flex-direction: column; position: relative; overflow: hidden; }
    .panel-head { border-top: 4px solid #22c55e; } /* Green for Fast */
    .panel-tail { border-top: 4px solid #ef4444; } /* Red for Slow */
    
    .panel h3 { margin: 0 0 10px 0; font-size: 1.2rem; display: flex; justify-content: space-between; align-items: center; }
    .time-tag { font-family: monospace; font-size: 0.9rem; padding: 4px 8px; border-radius: 6px; }
    .tag-fast { background: #dcfce7; color: #15803d; }
    .tag-slow { background: #fee2e2; color: #b91c1c; }

    .desc { font-size: 0.9rem; color: #475569; margin-bottom: 20px; min-height: 40px; }

    /* SVG Containers */
    .viz-stage { flex-grow: 1; border: 1px dashed #cbd5e1; border-radius: 8px; background: #fff; display: flex; justify-content: center; align-items: center; position: relative; }

    /* Controls */
    .action-btn { margin-top: 15px; padding: 12px; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; width: 100%; transition: transform 0.1s; display: flex; align-items: center; justify-content: center; gap: 8px; }
    .action-btn:active { transform: scale(0.98); }
    .btn-fast { background: #22c55e; color: white; box-shadow: 0 4px 10px -2px rgba(34, 197, 94, 0.3); }
    .btn-slow { background: #ef4444; color: white; box-shadow: 0 4px 10px -2px rgba(239, 68, 68, 0.3); }

    /* Icons */
    .icon { width: 18px; height: 18px; stroke-width: 2.5; }

  </style>

  <div class="eff-header">
    <div class="eff-title">
      <div class="eff-subtitle">Asymmetry</div>
      <h2>Delete Head vs. Delete Tail</h2>
    </div>
    <div class="eff-badge">Singly Linked List</div>
  </div>

  <div class="comparison-grid">
    
    <div class="panel panel-head">
      <h3>
        Delete Head
        <span class="time-tag tag-fast">O(1)</span>
      </h3>
      <div class="desc">
        We just move the Head pointer forward once. <br><strong>No traversal required.</strong>
      </div>
      
      <div class="viz-stage" id="stage-head">
        <svg width="200" height="120" viewBox="0 0 200 120" style="overflow:visible">
          <defs>
            <marker id="arrow-sm" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#64748b" /></marker>
          </defs>
          
          <g id="h-nodes"></g>
          
          <g id="h-ptr" style="transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
             <text x="0" y="0" text-anchor="middle" font-weight="bold" fill="#15803d" font-size="12">HEAD</text>
             <line x1="0" y1="5" x2="0" y2="25" stroke="#15803d" stroke-width="3" marker-end="url(#arrow-sm)" />
          </g>
        </svg>
      </div>

      <button class="action-btn btn-fast" onclick="effDemo.deleteHead()">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
        Delete Head (Instant)
      </button>
    </div>

    <div class="panel panel-tail">
      <h3>
        Delete Tail
        <span class="time-tag tag-slow">O(n)</span>
      </h3>
      <div class="desc">
        We can't go back from Tail. We must scan from Head to find the <strong>new</strong> tail.
      </div>
      
      <div class="viz-stage" id="stage-tail">
        <svg width="200" height="120" viewBox="0 0 200 120" style="overflow:visible">
           <g id="t-nodes"></g>

           <g id="t-ptr" style="transition: transform 0.5s ease;">
             <text x="0" y="0" text-anchor="middle" font-weight="bold" fill="#b91c1c" font-size="12">TAIL</text>
             <line x1="0" y1="5" x2="0" y2="25" stroke="#b91c1c" stroke-width="3" marker-end="url(#arrow-sm)" />
           </g>
           
           <circle id="t-scan" r="6" fill="#f59e0b" opacity="0" />
        </svg>
      </div>

      <button class="action-btn btn-slow" onclick="effDemo.deleteTail()">
         <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
         Delete Tail (Wait for it...)
      </button>
    </div>
  </div>

  <script>
    const effDemo = {
      headIdx: 0,
      tailCount: 4,
      isAnimating: false,

      init: function() {
        this.renderHeadList();
        this.renderTailList();
      },

      /* --- HEAD LOGIC --- */
      renderHeadList: function() {
        const grp = document.getElementById('h-nodes');
        grp.innerHTML = '';
        // Draw 3 nodes, starting at index `headIdx`
        for(let i = 0; i < 3; i++) {
           this.drawNode(grp, i * 70 + 40, 60, i + this.headIdx, i < 2);
        }
        // Reset Pointer
        document.getElementById('h-ptr').setAttribute('transform', `translate(40, 30)`);
      },

      deleteHead: async function() {
        if(this.isAnimating) return;
        this.isAnimating = true;

        // 1. Visual Move Pointer
        const ptr = document.getElementById('h-ptr');
        ptr.style.transform = `translate(110px, 30px)`; // Move to next node x=110

        // 2. Old Head Fades
        const nodes = document.getElementById('h-nodes').children;
        if(nodes[0]) nodes[0].style.opacity = '0.2';
        
        await this.wait(300); // Fast!
        
        // Reset Logic
        this.headIdx++;
        this.renderHeadList();
        this.isAnimating = false;
      },

      /* --- TAIL LOGIC --- */
      renderTailList: function() {
        const grp = document.getElementById('t-nodes');
        grp.innerHTML = '';
        // Draw 4 nodes always
        for(let i = 0; i < 4; i++) {
           this.drawNode(grp, i * 50 + 25, 60, i, i < 3);
        }
        // Place Tail at end (3 * 50 + 25 = 175)
        document.getElementById('t-ptr').setAttribute('transform', `translate(175, 30)`);
      },

      deleteTail: async function() {
        if(this.isAnimating) return;
        this.isAnimating = true;
        const scan = document.getElementById('t-scan');
        
        // 1. Start Scan from Head
        scan.style.opacity = '1';
        
        // Traversal Animation loop
        for(let i=0; i<3; i++) {
           const x = i * 50 + 25;
           scan.setAttribute('cx', x);
           scan.setAttribute('cy', 60);
           await this.wait(500); // Slow step!
        }
        
        // 2. Arrived at 2nd to last (Node 2)
        // Update Tail Ptr
        const tailPtr = document.getElementById('t-ptr');
        tailPtr.style.transform = `translate(125px, 30px)`; // Node 2 x
        
        // Fade out last node
        const nodes = document.getElementById('t-nodes').children;
        // The last node group is the 4th child (index 3)
        // Note: my drawNode appends a <g>, so children are the nodes.
        if(nodes[3]) nodes[3].style.opacity = '0.2';
        
        await this.wait(800);
        
        // Reset
        scan.style.opacity = '0';
        this.renderTailList();
        this.isAnimating = false;
      },

      /* --- HELPERS --- */
      drawNode: function(parent, x, y, label, hasArrow) {
        const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
        g.style.transition = "opacity 0.3s";
        
        const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        rect.setAttribute('x', x - 20); rect.setAttribute('y', y - 15);
        rect.setAttribute('width', 40); rect.setAttribute('height', 30);
        rect.setAttribute('rx', 4); rect.setAttribute('fill', '#fff');
        rect.setAttribute('stroke', '#334155'); rect.setAttribute('stroke-width', 2);
        
        const txt = document.createElementNS("http://www.w3.org/2000/svg", "text");
        txt.setAttribute('x', x); txt.setAttribute('y', y + 5);
        txt.setAttribute('text-anchor', 'middle');
        txt.textContent = label;
        
        g.appendChild(rect); g.appendChild(txt);
        
        if(hasArrow) {
           const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
           l.setAttribute('x1', x + 20); l.setAttribute('y1', y);
           l.setAttribute('x2', x + 30); l.setAttribute('y2', y); // Short link
           l.setAttribute('stroke', '#94a3b8');
           l.setAttribute('marker-end', 'url(#arrow-sm)');
           g.appendChild(l);
        }
        parent.appendChild(g);
      },
      
      wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => effDemo.init(), 100);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Traversal</div>
    </div>
    <span class="pill">Find / Search</span>
  </div>

  <h2>Searching the List</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card">
        <h3 style="margin:0 0 10px; color:#3b82f6;">Linear Search</h3>
        <p style="margin:0; font-size:16px;">
          Linked Lists don't support random access (no index). To find an item, you must start at the <strong>Head</strong> and check every node until you find a match or hit <strong>NULL</strong>.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div id="srch-line-1" class="line">Node current = head;</div>
        <div id="srch-line-2" class="line">while (current != null) {</div>
        <div id="srch-line-3" class="line">&nbsp;&nbsp;if (current.data == target) {</div>
        <div id="srch-line-4" class="line" style="color:#16a34a;">&nbsp;&nbsp;&nbsp;&nbsp;return current; // FOUND!</div>
        <div id="srch-line-5" class="line">&nbsp;&nbsp;}</div>
        <div id="srch-line-6" class="line">&nbsp;&nbsp;current = current.next;</div>
        <div id="srch-line-7" class="line">}</div>
        <div id="srch-line-8" class="line" style="color:#ef4444;">return null; // Not Found</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:400px;">
      
      <svg id="search-stage" width="100%" height="220" viewBox="0 0 500 220" style="overflow:visible;">
        <defs>
            <marker id="arrow-srch" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
            </marker>
        </defs>
        
        <g id="search-list-grp"></g>
        
        <g id="scanner" transform="translate(20, 100)" style="opacity:0; transition: transform 0.6s ease;">
            <circle r="15" fill="none" stroke="#3b82f6" stroke-width="3"/>
            <line x1="0" y1="-15" x2="0" y2="15" stroke="#3b82f6" stroke-width="2"/>
            <line x1="-15" y1="0" x2="15" y2="0" stroke="#3b82f6" stroke-width="2"/>
            <text x="0" y="35" text-anchor="middle" font-size="12" fill="#3b82f6" font-weight="bold">current</text>
        </g>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
            <div id="search-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; height:20px;">Ready.</div>
            <div style="font-size:12px; color:#64748b;">Target: <strong style="color:#0f172a; font-size:16px;">99</strong></div>
        </div>
        
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
           <button class="btn btn-primary" onclick="searchDemo.find(99)">Find '99' (Exists)</button>
           <button class="btn btn-danger" onclick="searchDemo.find(40)">Find '40' (Missing)</button>
        </div>
      </div>

    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Find</div><div class="slide-no"></div></div>

  <script>
    const searchDemo = {
        listData: [10, 45, 99, 12, 7],
        nodes: [],
        timer: null,
        
        init: function() {
            this.drawList();
        },
        
        drawList: function() {
            const grp = document.getElementById('search-list-grp');
            grp.innerHTML = '';
            
            this.nodes = [];
            let x = 20;
            const y = 40;
            
            this.listData.forEach((val, i) => {
                // Node Group
                const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                g.setAttribute('transform', `translate(${x}, ${y})`);
                g.setAttribute('id', `s-node-${i}`);
                
                // Box
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttribute('width', 60); rect.setAttribute('height', 40);
                rect.setAttribute('rx', 4); 
                rect.setAttribute('fill', '#fff');
                rect.setAttribute('stroke', '#0f172a');
                rect.setAttribute('stroke-width', '2');
                
                // Text
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute('x', 30); text.setAttribute('y', 25);
                text.setAttribute('text-anchor', 'middle'); text.textContent = val;
                text.setAttribute('font-weight', 'bold');
                
                g.appendChild(rect); g.appendChild(text);
                grp.appendChild(g);
                
                this.nodes.push({x: x + 30, val: val, id: i}); // Store center X
                
                // Arrow
                if (i < this.listData.length - 1) {
                    const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    l.setAttribute('x1', x + 60); l.setAttribute('y1', y + 20);
                    l.setAttribute('x2', x + 100); l.setAttribute('y2', y + 20);
                    l.setAttribute('stroke', '#64748b'); l.setAttribute('marker-end', 'url(#arrow-srch)');
                    grp.appendChild(l);
                }
                
                x += 100;
            });
            
            // NULL at end
            const nullTxt = document.createElementNS("http://www.w3.org/2000/svg", "text");
            nullTxt.setAttribute('x', x); nullTxt.setAttribute('y', y + 25);
            nullTxt.textContent = "NULL";
            nullTxt.setAttribute('fill', '#94a3b8');
            grp.appendChild(nullTxt);
        },
        
        find: async function(target) {
            this.resetVisuals();
            const scanner = document.getElementById('scanner');
            const msg = document.getElementById('search-msg');
            
            scanner.style.opacity = '1';
            this.highlightCode('srch-line-1');
            msg.textContent = "Start at Head.";
            
            await this.wait(800);
            
            for (let i = 0; i < this.nodes.length; i++) {
                const node = this.nodes[i];
                
                // Move Scanner
                scanner.setAttribute('transform', `translate(${node.x}, 60)`); // center of node
                this.highlightCode('srch-line-2'); // While != null
                
                await this.wait(600);
                
                // Check Data
                this.highlightCode('srch-line-3');
                msg.textContent = `Comparing ${node.val} == ${target}?`;
                
                // Visual Flash
                const nodeRect = document.getElementById(`s-node-${i}`).querySelector('rect');
                nodeRect.setAttribute('fill', '#fef9c3'); // Yellow check
                
                await this.wait(800);
                
                if (node.val === target) {
                    // FOUND
                    nodeRect.setAttribute('fill', '#bbf7d0'); // Green
                    nodeRect.setAttribute('stroke', '#16a34a');
                    scanner.querySelector('circle').setAttribute('stroke', '#16a34a');
                    
                    this.highlightCode('srch-line-4');
                    msg.textContent = "Match Found! Return Node.";
                    return; 
                }
                
                // Reset Flash
                nodeRect.setAttribute('fill', '#fff');
                
                // Move Next
                this.highlightCode('srch-line-6');
                msg.textContent = "No match. current = current.next";
                await this.wait(600);
            }
            
            // End of List
            scanner.style.opacity = '0';
            this.highlightCode('srch-line-8');
            msg.textContent = "Hit NULL. Target not found.";
        },
        
        resetVisuals: function() {
             document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
             document.querySelectorAll('rect').forEach(r => {
                 r.setAttribute('fill', '#fff');
                 r.setAttribute('stroke', '#0f172a');
             });
             document.getElementById('scanner').querySelector('circle').setAttribute('stroke', '#3b82f6');
        },
        
        highlightCode: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        
        wait: function(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    };
    
    // Init
    setTimeout(() => searchDemo.init(), 500);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Output</div>
    </div>
    <span class="pill">Print All</span>
  </div>

  <h2>Traversing & Printing</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <p style="margin:0; font-size:16px;">
        To print the entire list, we start at the <strong>Head</strong> and move forward one node at a time until we hit <strong>NULL</strong>.
      </p>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div id="prt-line-1" class="line">public void printAllNodes() {</div>
        <div id="prt-line-2" class="line">&nbsp;&nbsp;Node current = head;</div>
        <div id="prt-line-3" class="line">&nbsp;&nbsp;while (current != null) {</div>
        <div id="prt-line-4" class="line" style="color:#22c55e;">&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(current.data);</div>
        <div id="prt-line-5" class="line">&nbsp;&nbsp;&nbsp;&nbsp;current = current.next;</div>
        <div id="prt-line-6" class="line">&nbsp;&nbsp;}</div>
        <div id="prt-line-7" class="line">}</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:420px;">
      
      <svg id="print-stage" width="100%" height="150" viewBox="0 0 500 150" style="overflow:visible;">
        <defs>
            <marker id="arrow-prt" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
            </marker>
        </defs>
        
        <g id="print-nodes-grp"></g>
        
        <g id="ptr-print" transform="translate(20, 90)" style="opacity:0; transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
             <text x="30" y="30" text-anchor="middle" font-size="12" fill="#ea580c" font-weight="bold">current</text>
             <line x1="30" y1="15" x2="30" y2="-5" stroke="#ea580c" stroke-width="2" marker-end="url(#arrow-prt)"/>
        </g>
      </svg>

      <div style="background:#1e293b; border-radius:8px; padding:15px; flex-grow:1; font-family:monospace; color:#10b981; overflow-y:auto; border:2px solid #334155; position:relative;">
          <div style="position:absolute; top:0; right:0; background:#334155; color:#cbd5e1; font-size:10px; padding:2px 6px; border-bottom-left-radius:6px;">TERMINAL</div>
          <div id="console-output">
              <span style="color:#64748b;">> Ready to print...</span>
          </div>
      </div>

      <div style="margin-top:15px; display:flex; gap:10px;">
          <button class="btn btn-primary" onclick="printDemo.run()">Run printAllNodes()</button>
          <button class="btn btn-secondary" onclick="printDemo.reset()">Clear Console</button>
      </div>

    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Print All</div><div class="slide-no"></div></div>

  <script>
    const printDemo = {
        data: ['Alpha', 'Beta', 'Gamma', 'Delta'],
        nodes: [],
        
        init: function() {
            this.draw();
        },
        
        draw: function() {
            const g = document.getElementById('print-nodes-grp');
            g.innerHTML = '';
            this.nodes = [];
            
            let x = 20;
            this.data.forEach((val, i) => {
                const grp = document.createElementNS("http://www.w3.org/2000/svg", "g");
                grp.setAttribute('transform', `translate(${x}, 20)`);
                grp.setAttribute('id', `p-node-${i}`);
                
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttribute('width', 80); rect.setAttribute('height', 40);
                rect.setAttribute('rx', 4); rect.setAttribute('fill', '#fff');
                rect.setAttribute('stroke', '#0f172a'); rect.setAttribute('stroke-width', 2);
                
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute('x', 40); text.setAttribute('y', 25);
                text.setAttribute('text-anchor', 'middle'); text.textContent = val;
                text.setAttribute('font-size', '12'); text.setAttribute('font-weight', 'bold');
                
                grp.appendChild(rect); grp.appendChild(text);
                g.appendChild(grp);
                
                this.nodes.push({x: x, val: val});
                
                if(i < this.data.length - 1) {
                    const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    l.setAttribute('x1', x+80); l.setAttribute('y1', 40);
                    l.setAttribute('x2', x+110); l.setAttribute('y2', 40);
                    l.setAttribute('stroke', '#64748b'); l.setAttribute('marker-end', 'url(#arrow-prt)');
                    g.appendChild(l);
                }
                
                x += 110;
            });
            
            // Null
            const n = document.createElementNS("http://www.w3.org/2000/svg", "text");
            n.setAttribute('x', x); n.setAttribute('y', 45); n.textContent = "NULL";
            n.setAttribute('fill', '#94a3b8'); n.setAttribute('font-size', 12);
            g.appendChild(n);
        },
        
        run: async function() {
            this.reset();
            const term = document.getElementById('console-output');
            const ptr = document.getElementById('ptr-print');
            
            term.innerHTML = '<span style="color:#94a3b8;">> Output started:</span><br>';
            
            this.highlight('prt-line-2');
            ptr.style.opacity = '1';
            
            for(let i=0; i<this.nodes.length; i++) {
                // Move Pointer
                ptr.setAttribute('transform', `translate(${this.nodes[i].x}, 70)`);
                
                // While Check
                this.highlight('prt-line-3');
                await this.wait(600);
                
                // Print
                this.highlight('prt-line-4');
                const nodeRect = document.getElementById(`p-node-${i}`).querySelector('rect');
                nodeRect.setAttribute('fill', '#bbf7d0'); // Flash Green
                
                // Add to terminal
                term.innerHTML += `<div>${this.nodes[i].val}</div>`;
                term.scrollTop = term.scrollHeight; // Auto scroll
                
                await this.wait(600);
                nodeRect.setAttribute('fill', '#fff'); // Reset color
                
                // Move Next
                this.highlight('prt-line-5');
                await this.wait(600);
            }
            
            // Final Null Check
            ptr.setAttribute('transform', `translate(${this.nodes[this.nodes.length-1].x + 110}, 70)`);
            this.highlight('prt-line-3'); // Check null
            await this.wait(500);
            
            ptr.style.opacity = '0';
            this.highlight('prt-line-7');
            term.innerHTML += '<span style="color:#94a3b8;">> Process terminated.</span>';
        },
        
        reset: function() {
            document.getElementById('console-output').innerHTML = '<span style="color:#64748b;">> Ready...</span>';
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            this.draw(); // reset colors
            document.getElementById('ptr-print').style.opacity = '0';
        },
        
        highlight: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        
        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => printDemo.init(), 200);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Advanced Operations</div>
    </div>
    <span class="pill">Randomize (Shuffle)</span>
  </div>

  <h2>Shuffling a Linked List</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #8b5cf6;">
        <h3 style="margin:0 0 10px; color:#7c3aed;">The Challenge</h3>
        <p style="margin:0; font-size:16px;">
          Arrays have indices, so you can easily do <code>swap(arr[i], arr[random])</code>. 
          <br>Linked Lists <strong>do not</strong> allow random access. You can't jump to index 5 instantly.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div class="line" style="color:#94a3b8;">// Strategy: Merge Shuffle</div>
        <div class="line">1. <strong>Split</strong> the list into two halves.</div>
        <div class="line">&nbsp;&nbsp; (Left: 1->2->3, Right: 4->5->6)</div>
        <div class="line">2. <strong>Random Merge</strong> them back.</div>
        <div class="line">&nbsp;&nbsp; Flip a coin to decide which head</div>
        <div class="line">&nbsp;&nbsp; goes next into the new list.</div>
        <div class="line" style="margin-top:10px; color:#ef4444;">Warning: Don't lose your pointers!</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:400px;">
      
      <svg id="shuffle-stage" width="100%" height="250" viewBox="0 0 500 250" style="overflow:visible;">
        <defs>
            <marker id="arrow-shuf" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
            </marker>
        </defs>
        
        <g id="shuf-list-main"></g>
        <g id="shuf-list-left" transform="translate(0, 0)"></g>
        <g id="shuf-list-right" transform="translate(0, 0)"></g>
        <g id="shuf-result" transform="translate(50, 180)"></g>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0; text-align:center;">
         <div id="shuf-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px;">Sorted List.</div>
         <div style="display:flex; gap:10px; justify-content:center;">
             <button class="btn btn-secondary" onclick="shuffleDemo.reset()">Reset</button>
             <button class="btn btn-primary" style="background:#8b5cf6;" onclick="shuffleDemo.animate()">Run Merge Shuffle</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Randomize</div><div class="slide-no"></div></div>

  <script>
    const shuffleDemo = {
        timer: null,
        
        reset: function() {
            clearTimeout(this.timer);
            const stage = document.getElementById('shuffle-stage');
            stage.querySelectorAll('g').forEach(g => g.innerHTML = ''); // Clear all
            document.getElementById('shuf-msg').textContent = "Ready to Shuffle.";
            
            // Draw Initial List: 1 -> 2 -> 3 -> 4 -> 5 -> 6
            this.drawNode('shuf-list-main', 20, 20, '1', 'n1');
            this.drawArrow('shuf-list-main', 70, 40, 90, 40);
            this.drawNode('shuf-list-main', 90, 20, '2', 'n2');
            this.drawArrow('shuf-list-main', 140, 40, 160, 40);
            this.drawNode('shuf-list-main', 160, 20, '3', 'n3');
            this.drawArrow('shuf-list-main', 210, 40, 230, 40, 'split-point'); // Break here
            this.drawNode('shuf-list-main', 230, 20, '4', 'n4');
            this.drawArrow('shuf-list-main', 280, 40, 300, 40);
            this.drawNode('shuf-list-main', 300, 20, '5', 'n5');
            this.drawArrow('shuf-list-main', 350, 40, 370, 40);
            this.drawNode('shuf-list-main', 370, 20, '6', 'n6');
        },

        animate: function() {
            this.reset();
            const msg = document.getElementById('shuf-msg');
            
            // Step 1: Split
            msg.textContent = "Step 1: Splitting in half...";
            
            this.timer = setTimeout(() => {
                // Remove connecting arrow
                document.getElementById('split-point').remove();
                
                // Move Right Half Down and Over
                const nodesRight = ['n4', 'n5', 'n6'];
                nodesRight.forEach(id => {
                    const el = document.getElementById(id);
                    // Use simple transform for demo
                    // In reality we would reparent, but here we just shift visuals
                    const currentX = parseInt(el.getAttribute('transform').split('(')[1]);
                    el.style.transition = "transform 0.8s ease";
                    el.setAttribute('transform', `translate(${currentX}, 90)`); // Drop down
                });
                
                // We assume arrows follow in a real SVG app, but here we will just clear and redraw for simplicity/robustness
                this.redrawSplitState();
                
                msg.textContent = "Step 2: Randomly Merging...";
                
                this.timer = setTimeout(() => {
                    this.performMerge();
                }, 1000);
                
            }, 800);
        },
        
        redrawSplitState: function() {
            // Hard reset to clean split state for visual clarity
            const stage = document.getElementById('shuffle-stage');
            stage.querySelectorAll('g').forEach(g => g.innerHTML = '');
            
            // Left Group
            this.drawNode('shuf-list-left', 50, 20, '1', 'L1');
            this.drawNode('shuf-list-left', 120, 20, '2', 'L2');
            this.drawNode('shuf-list-left', 190, 20, '3', 'L3');
            
            // Right Group
            this.drawNode('shuf-list-right', 50, 90, '4', 'R1');
            this.drawNode('shuf-list-right', 120, 90, '5', 'R2');
            this.drawNode('shuf-list-right', 190, 90, '6', 'R3');
        },
        
        performMerge: async function() {
            const left = ['1', '2', '3'];
            const right = ['4', '5', '6'];
            let x = 20;
            const y = 180;
            
            // Clear old groups
            document.getElementById('shuf-list-left').innerHTML = '';
            document.getElementById('shuf-list-right').innerHTML = '';
            
            const resultGrp = document.getElementById('shuf-result');
            
            while(left.length > 0 || right.length > 0) {
                let pickLeft = false;
                if (left.length > 0 && right.length > 0) pickLeft = Math.random() > 0.5;
                else if (left.length > 0) pickLeft = true;
                else pickLeft = false;
                
                const val = pickLeft ? left.shift() : right.shift();
                const color = pickLeft ? '#3b82f6' : '#8b5cf6'; // Blue vs Purple
                
                // Draw Node in Result
                this.drawNode('shuf-result', x, 0, val, 'res-'+x, color);
                
                // Draw Arrow if not first
                if (x > 20) {
                     this.drawArrow('shuf-result', x - 40, 20, x - 10, 20);
                }
                
                x += 70;
                await new Promise(r => setTimeout(r, 400));
            }
            
            document.getElementById('shuf-msg').textContent = "Shuffled!";
        },

        // Helpers
        drawNode: function(pid, x, y, txt, id, strokeColor='#0f172a') {
            const p = document.getElementById(pid);
            const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
            g.setAttribute('transform', `translate(${x}, ${y})`);
            g.setAttribute('id', id);
            
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute('width', 40); rect.setAttribute('height', 40);
            rect.setAttribute('rx', 4); rect.setAttribute('fill', '#fff');
            rect.setAttribute('stroke', strokeColor); rect.setAttribute('stroke-width', 2);
            
            const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
            text.setAttribute('x', 20); text.setAttribute('y', 25);
            text.setAttribute('text-anchor', 'middle'); text.textContent = txt;
            text.setAttribute('font-weight', 'bold');
            
            g.appendChild(rect); g.appendChild(text);
            p.appendChild(g);
        },
        
        drawArrow: function(pid, x1, y1, x2, y2, id=null) {
            const p = document.getElementById(pid);
            const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
            if(id) l.setAttribute('id', id);
            l.setAttribute('x1', x1); l.setAttribute('y1', y1);
            l.setAttribute('x2', x2); l.setAttribute('y2', y2);
            l.setAttribute('stroke', '#64748b'); l.setAttribute('marker-end', 'url(#arrow-shuf)');
            p.appendChild(l);
        }
    };
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Ordering</div>
    </div>
    <span class="pill">Sorted Insert</span>
  </div>

  <h2>Sorting: The "Insert in Order" Strategy</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #06b6d4;">
        <h3 style="margin:0 0 10px; color:#0891b2;">Why insert in order?</h3>
        <p style="margin:0; font-size:16px;">
          Sorting an existing mess of pointers is difficult (swapping links is error-prone). 
          <br>It is much easier to <strong>build</strong> the list sorted by placing every new node exactly where it belongs.
        </p>
      </div>

      <div class="code-block" style="font-size:13px; padding:15px;">
        <div class="line" style="color:#94a3b8;">// Find spot where (next > toAdd)</div>
        <div id="sort-line-1" class="line">Node current = head;</div>
        <div id="sort-line-2" class="line">while (current.next != null &&</div>
        <div id="sort-line-3" class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current.next.data < toAdd.data) {</div>
        <div id="sort-line-4" class="line">&nbsp;&nbsp;current = current.next;</div>
        <div id="sort-line-5" class="line">}</div>
        <div class="line" style="color:#94a3b8; margin-top:5px;">// Insert 'toAdd' after 'current'</div>
        <div id="sort-line-6" class="line">toAdd.next = current.next;</div>
        <div id="sort-line-7" class="line">current.next = toAdd;</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:420px;">
      
      <svg id="sort-stage" width="100%" height="220" viewBox="0 0 500 220" style="overflow:visible;">
        <defs>
            <marker id="arrow-sort" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
            </marker>
        </defs>
        
        <g id="sorted-list-grp"></g>
        
        <g id="new-sort-node" transform="translate(20, 120)" style="opacity:0; transition: transform 0.4s ease;">
           <rect width="50" height="40" rx="4" fill="#ecfccb" stroke="#84cc16" stroke-width="2"/>
           <text x="25" y="25" text-anchor="middle" font-weight="bold" fill="#3f6212" id="new-sort-val">?</text>
           <text x="25" y="-10" text-anchor="middle" font-size="10" fill="#65a30d">toAdd</text>
        </g>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0;">
         <div id="sort-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; height:20px; margin-bottom:10px;">List is sorted.</div>
         <div style="display:flex; gap:10px;">
             <button class="btn btn-secondary" onclick="sortDemo.reset()">Reset</button>
             <button class="btn btn-info" onclick="sortDemo.insertRandom()">+ Insert Random Number</button>
         </div>
      </div>

    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Sorting</div><div class="slide-no"></div></div>

  <script>
    const sortDemo = {
        data: [10, 30, 50, 90], // Initial sorted data
        isAnimating: false,
        
        init: function() {
            this.renderList();
        },
        
        reset: function() {
            this.data = [10, 30, 50, 90];
            this.renderList();
            document.getElementById('sort-msg').textContent = "Reset to default.";
            document.getElementById('new-sort-node').style.opacity = '0';
        },

        renderList: function() {
            const grp = document.getElementById('sorted-list-grp');
            grp.innerHTML = '';
            
            let x = 20;
            this.data.forEach((val, i) => {
                const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                g.setAttribute('transform', `translate(${x}, 40)`);
                g.setAttribute('id', `sort-node-${i}`);
                g.style.transition = "transform 0.5s ease"; // For sliding effect later
                
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttribute('width', 50); rect.setAttribute('height', 40);
                rect.setAttribute('rx', 4); rect.setAttribute('fill', '#fff');
                rect.setAttribute('stroke', '#0f172a'); rect.setAttribute('stroke-width', 2);
                
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute('x', 25); text.setAttribute('y', 25);
                text.setAttribute('text-anchor', 'middle'); text.textContent = val;
                text.setAttribute('font-weight', 'bold');
                
                g.appendChild(rect); g.appendChild(text);
                grp.appendChild(g);
                
                // Arrow
                if(i < this.data.length - 1) {
                    const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    l.setAttribute('x1', 50); l.setAttribute('y1', 20);
                    l.setAttribute('x2', 80); l.setAttribute('y2', 20);
                    l.setAttribute('stroke', '#64748b'); l.setAttribute('marker-end', 'url(#arrow-sort)');
                    g.appendChild(l);
                }
                
                x += 80;
            });
            
            // NULL
            const nullTxt = document.createElementNS("http://www.w3.org/2000/svg", "text");
            nullTxt.setAttribute('x', x); nullTxt.setAttribute('y', 65);
            nullTxt.textContent = "NULL"; nullTxt.setAttribute('fill', '#94a3b8');
            nullTxt.setAttribute('id', 'sort-null');
            nullTxt.style.transition = "transform 0.5s ease";
            grp.appendChild(nullTxt);
        },
        
        insertRandom: async function() {
            if(this.isAnimating) return;
            this.isAnimating = true;
            
            // 1. Generate Number
            const val = Math.floor(Math.random() * 100);
            const node = document.getElementById('new-sort-node');
            document.getElementById('new-sort-val').textContent = val;
            
            const msg = document.getElementById('sort-msg');
            msg.textContent = `Inserting ${val}...`;
            
            // 2. Show Node at Start
            node.style.opacity = '1';
            node.setAttribute('transform', `translate(20, 120)`);
            this.highlight('sort-line-1');
            
            await this.wait(800);
            
            // 3. Traverse
            let index = 0;
            let currentX = 20;
            
            while(index < this.data.length) {
                // Move under current node
                node.setAttribute('transform', `translate(${currentX}, 120)`);
                this.highlight('sort-line-2'); // Check condition
                
                await this.wait(600);
                
                msg.textContent = `Is ${val} > ${this.data[index]}?`;
                
                if (val < this.data[index]) {
                    msg.textContent = `No. ${val} belongs before ${this.data[index]}.`;
                    break; // Found spot
                }
                
                msg.textContent = "Yes. Move next.";
                this.highlight('sort-line-4');
                currentX += 80;
                index++;
                await this.wait(600);
            }
            
            // 4. Found Spot - Visual Insert
            this.highlight('sort-line-6');
            msg.textContent = "Inserting node...";
            
            // Move node up
            node.setAttribute('transform', `translate(${currentX}, 40)`);
            
            // Slide existing nodes to the right
            for(let i=index; i<this.data.length; i++) {
                const el = document.getElementById(`sort-node-${i}`);
                const oldX = 20 + (i * 80);
                el.setAttribute('transform', `translate(${oldX + 80}, 40)`);
            }
            const nullTxt = document.getElementById('sort-null');
            const nullX = 20 + (this.data.length * 80);
            nullTxt.setAttribute('transform', `translate(80, 0)`); // simpler shift relative to group
            
            await this.wait(800);
            
            // 5. Logic Update
            this.data.splice(index, 0, val);
            this.renderList(); // Redraw clean
            node.style.opacity = '0'; // Hide temp node
            
            msg.textContent = "Inserted!";
            this.isAnimating = false;
        },
        
        highlight: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => sortDemo.init(), 500);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Maintenance</div>
    </div>
    <span class="pill">Delete All</span>
  </div>

  <h2>Clearing the List</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #ef4444;">
        <h3 style="margin:0 0 10px; color:#b91c1c;">Strategy: Repetition</h3>
        <p style="margin:0; font-size:16px;">
          To clear the list, we simply wrap our <strong>DeleteLast</strong> logic in a loop.
          <br><br>
          <em>"Keep deleting the last element until the Head becomes null."</em>
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div id="clear-line-1" class="line">public void DeleteAll() {</div>
        <div id="clear-line-2" class="line">&nbsp;&nbsp;// Loop while list is not empty</div>
        <div id="clear-line-3" class="line">&nbsp;&nbsp;while (head != null) {</div>
        <div id="clear-line-4" class="line" style="color:#ef4444;">&nbsp;&nbsp;&nbsp;&nbsp;DeleteLast();</div>
        <div id="clear-line-5" class="line">&nbsp;&nbsp;}</div>
        <div id="clear-line-6" class="line">}</div>
      </div>
      
      <div style="font-size:12px; color:#64748b; font-style:italic;">
          Note: In Garbage Collected languages (Java/C#), you could often just set head = null, but this approach ensures explicit cleanup.
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:400px;">
      
      <svg id="clear-stage" width="100%" height="200" viewBox="0 0 500 200" style="overflow:visible;">
        <defs>
            <marker id="arrow-clr" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
            </marker>
        </defs>
        
        <g id="clear-list-grp"></g>
        
        <circle id="scanner-clr" r="8" fill="#ef4444" style="opacity:0; transition: transform 0.2s linear;"/>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0; text-align:center;">
         <div id="clear-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px;">List contains items.</div>
         <div style="display:flex; gap:10px; justify-content:center;">
             <button class="btn btn-secondary" onclick="clearDemo.reset()">Reset List</button>
             <button class="btn btn-danger" onclick="clearDemo.run()">Run DeleteAll()</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Delete All</div><div class="slide-no"></div></div>

  <script>
    const clearDemo = {
        count: 5,
        isRunning: false,
        
        init: function() {
            this.reset();
        },
        
        reset: function() {
            this.count = 5;
            this.isRunning = false;
            this.render();
            document.getElementById('clear-msg').textContent = "Ready to clear.";
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
        },
        
        render: function() {
            const grp = document.getElementById('clear-list-grp');
            grp.innerHTML = '';
            
            let x = 20;
            for(let i=0; i<this.count; i++) {
                const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                g.setAttribute('transform', `translate(${x}, 50)`);
                g.setAttribute('id', `clr-node-${i}`);
                g.style.transition = "transform 0.3s, opacity 0.3s";
                
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttribute('width', 50); rect.setAttribute('height', 40);
                rect.setAttribute('rx', 4); rect.setAttribute('fill', '#fff');
                rect.setAttribute('stroke', '#0f172a'); rect.setAttribute('stroke-width', 2);
                
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute('x', 25); text.setAttribute('y', 25);
                text.setAttribute('text-anchor', 'middle'); text.textContent = i+1;
                
                g.appendChild(rect); g.appendChild(text);
                grp.appendChild(g);
                
                if(i < this.count - 1) {
                     const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
                     l.setAttribute('x1', x+50); l.setAttribute('y1', 70);
                     l.setAttribute('x2', x+80); l.setAttribute('y2', 70);
                     l.setAttribute('stroke', '#64748b'); l.setAttribute('marker-end', 'url(#arrow-clr)');
                     grp.appendChild(l);
                }
                
                x += 80;
            }
            
            // HEAD Label
            if(this.count > 0) {
                const h = document.createElementNS("http://www.w3.org/2000/svg", "text");
                h.setAttribute('x', 20); h.setAttribute('y', 40); 
                h.textContent = "HEAD"; h.setAttribute('fill', '#ef4444'); h.setAttribute('font-size', 10);
                h.setAttribute('font-weight', 'bold');
                grp.appendChild(h);
            } else {
                const h = document.createElementNS("http://www.w3.org/2000/svg", "text");
                h.setAttribute('x', 50); h.setAttribute('y', 80); 
                h.textContent = "HEAD IS NULL (List Empty)"; 
                h.setAttribute('fill', '#94a3b8'); h.setAttribute('font-weight', 'bold');
                grp.appendChild(h);
            }
        },
        
        run: async function() {
            if(this.isRunning) return;
            this.isRunning = true;
            const scanner = document.getElementById('scanner-clr');
            const msg = document.getElementById('clear-msg');
            
            this.highlight('clear-line-1');
            await this.wait(500);
            
            while(this.count > 0) {
                // Check Condition
                this.highlight('clear-line-3');
                msg.textContent = `Head != null. (${this.count} items remain)`;
                await this.wait(500);
                
                // Call DeleteLast
                this.highlight('clear-line-4');
                msg.textContent = "Calling DeleteLast()...";
                
                // Simulate Traversal visually (fast)
                scanner.style.opacity = '1';
                let cx = 45;
                for(let k=0; k<this.count; k++) {
                    scanner.setAttribute('transform', `translate(${cx}, 70)`);
                    cx += 80;
                    await this.wait(100);
                }
                
                // Remove last
                const lastNode = document.getElementById(`clr-node-${this.count-1}`);
                if(lastNode) {
                    lastNode.style.transform = "translate(0, 50) scale(0)";
                    lastNode.style.opacity = "0";
                }
                scanner.style.opacity = '0';
                
                this.count--;
                await this.wait(300);
                this.render(); // Redraw clean
            }
            
            this.highlight('clear-line-3');
            msg.textContent = "Head == null. Loop ends.";
            await this.wait(500);
            this.highlight('clear-line-6');
            msg.textContent = "List Cleared.";
            this.isRunning = false;
        },
        
        highlight: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => clearDemo.init(), 500);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Variations</div>
      <div class="sub">Optimization</div>
    </div>
    <span class="pill">Head & Tail Pointers</span>
  </div>

  <h2>Adding a "Tail" Reference</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #22c55e; background: #f0fdf4; padding:15px; border-left-width:4px; border-radius:4px;">
        <h3 style="margin:0 0 5px; color:#15803d; font-size:16px;">The Efficiency Boost</h3>
        <p style="margin:0; font-size:14px; color:#166534;">
          By tracking the <strong>Last Node (Tail)</strong>, we can append to the list immediately without traversing.
        </p>
        <ul style="margin:5px 0 0 20px; font-size:13px; color:#15803d;">
            <li><strong>Time Complexity:</strong> O(1) (Constant Time)</li>
            <li><strong>Benefit:</strong> Instant access to the end.</li>
        </ul>
      </div>

      <div class="code-block" style="font-size:13px; padding:15px; position:relative;">
        <div class="line">class LinkedList {</div>
        <div class="line">&nbsp;&nbsp;Node head, <span style="color:#22c55e; font-weight:bold;">last</span>;</div>
        <div class="line" style="margin-top:5px;">&nbsp;&nbsp;void Append(data) {</div>
        <div id="t-line-1" class="line">&nbsp;&nbsp;&nbsp;&nbsp;Node newNode = new Node(data);</div>
        <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;if (head == null) { ... }</div>
        <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;else {</div>
        <div id="t-line-2" class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last.next = newNode; <span style="color:#64748b;">// 1. Link</span></div>
        <div id="t-line-3" class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last = newNode;      <span style="color:#64748b;">// 2. Move Tail</span></div>
        <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
        <div class="line">&nbsp;&nbsp;}</div>
        <div class="line">}</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:450px;">
      
      <svg id="tail-stage" width="100%" height="280" viewBox="0 0 600 280" style="overflow:visible;">
        <defs>
            <marker id="arrow-tail" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
            </marker>
            <marker id="arrow-ptr-green" markerWidth="12" markerHeight="12" refX="6" refY="12" orient="auto">
                <path d="M 6 12 L 0 0 L 12 0 Z" fill="#22c55e" />
            </marker>
        </defs>
        
        <g id="tail-nodes-grp"></g>
        
        <g id="tail-ptr-visual" style="transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);">
            <text x="0" y="-15" text-anchor="middle" font-weight="bold" fill="#22c55e" font-size="14" style="font-family:monospace;">TAIL</text>
            <line x1="0" y1="-10" x2="0" y2="20" stroke="#22c55e" stroke-width="3" marker-end="url(#arrow-ptr-green)"/>
        </g>
      </svg>

      <div class="console-box" style="margin-top:-20px;">
          <span class="console-label">STATUS:</span>
          <span id="tail-status">Ready.</span>
      </div>

      <div style="display:flex; gap:10px; justify-content:center; margin-top:10px;">
          <button class="btn btn-secondary" onclick="tailDemo.reset()">Reset</button>
          <button class="btn btn-success" onclick="tailDemo.appendStep()" style="flex:2;">+ Append Node (O(1))</button>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Tail Pointer Optimization</div><div class="slide-no"></div></div>

  <style>
    /* Reusing styles for consistency */
    .t-node-rect { fill: white; stroke: #1e293b; stroke-width: 2px; }
    .t-node-div { stroke: #cbd5e1; stroke-width: 1px; }
    .t-node-txt { font-family: monospace; font-weight: bold; font-size: 14px; fill: #1e293b; }
    .t-node-next { font-family: monospace; font-size: 10px; fill: #64748b; font-weight:bold; }
    .t-node-id { font-family: monospace; font-size: 11px; fill: #64748b; font-weight: bold; }
    
    .new-node-anim { animation: dropIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    @keyframes dropIn { from { opacity:0; transform: translateY(-30px); } to { opacity:1; transform: translateY(0); } }
    
    .active-line { background: #334155; border-left: 3px solid #22c55e; color: #fff; padding-left:5px;}
  </style>

  <script>
    const tailDemo = {
        list: [],
        counter: 0,
        isAnimating: false,
        // Config
        NODE_W: 110,
        NODE_H: 45,
        SPACING: 150,
        START_X: 30,
        START_Y: 100,

        reset: function() {
            this.list = [];
            this.counter = 0;
            this.isAnimating = false;
            document.getElementById('tail-nodes-grp').innerHTML = '';
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            
            // Create initial state: Head -> A
            this.addNodeInternal('Head');
            this.addNodeInternal('A');
            this.updateVisuals();
            this.log("List Reset. Tail pointing to Node #1.");
        },

        // The public function triggered by button
        appendStep: async function() {
            if (this.isAnimating) return;
            if (this.list.length >= 4) { this.log("List full for demo purposes."); return; }
            
            this.isAnimating = true;
            
            // Step 1: Create Node
            this.hl('t-line-1');
            this.log("Creating new Node...");
            const newNode = this.addNodeInternal(String.fromCharCode(66 + this.list.length - 2)); // B, C, D...
            const nodeX = this.START_X + (this.list.length - 1) * this.SPACING;
            
            // Draw ONLY the new node first (without connection)
            this.drawSingleNode(newNode, this.list.length - 1, true); 
            await this.wait(600);

            // Step 2: Link (last.next = new)
            this.hl('t-line-2');
            this.log("last.next = newNode (Updating previous Next pointer)");
            
            // Update Previous Node Text and Draw Arrow
            const prevIndex = this.list.length - 2;
            this.updateNodeNextText(prevIndex, newNode.id);
            this.drawArrow(prevIndex);
            
            await this.wait(800);

            // Step 3: Move Tail
            this.hl('t-line-3');
            this.log("last = newNode (Moving Tail Pointer)");
            this.moveTailVisual(this.list.length - 1);
            
            await this.wait(800);
            
            this.log("Append Complete.");
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            this.isAnimating = false;
        },

        // --- Internal Helpers ---

        addNodeInternal: function(val) {
            const node = { id: this.counter++, val: val, next: null };
            if (this.list.length > 0) {
                this.list[this.list.length - 1].next = node.id;
            }
            this.list.push(node);
            return node;
        },

        updateVisuals: function() {
            const grp = document.getElementById('tail-nodes-grp');
            grp.innerHTML = '';
            
            this.list.forEach((node, i) => {
                this.drawSingleNode(node, i, false);
                if (i < this.list.length - 1) this.drawArrow(i);
            });
            
            this.moveTailVisual(this.list.length - 1);
        },

        drawSingleNode: function(node, index, isNew) {
            const grp = document.getElementById('tail-nodes-grp');
            const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
            const x = this.START_X + index * this.SPACING;
            const y = this.START_Y;
            
            g.setAttribute('transform', `translate(${x}, ${y})`);
            if(isNew) g.classList.add('new-node-anim');
            g.setAttribute('id', `t-node-g-${index}`); // Store ID for updates

            // 1. ID Label
            const idTxt = document.createElementNS("http://www.w3.org/2000/svg", "text");
            idTxt.setAttribute('x', this.NODE_W/2); idTxt.setAttribute('y', -8);
            idTxt.textContent = `#ID:${node.id}`; idTxt.classList.add('t-node-id');
            idTxt.setAttribute('text-anchor', 'middle');

            // 2. Rect
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute('width', this.NODE_W); rect.setAttribute('height', this.NODE_H);
            rect.setAttribute('rx', 4); rect.classList.add('t-node-rect');

            // 3. Divider
            const div = document.createElementNS("http://www.w3.org/2000/svg", "line");
            div.setAttribute('x1', this.NODE_W * 0.65); div.setAttribute('y1', 0);
            div.setAttribute('x2', this.NODE_W * 0.65); div.setAttribute('y2', this.NODE_H);
            div.classList.add('t-node-div');

            // 4. Value
            const val = document.createElementNS("http://www.w3.org/2000/svg", "text");
            val.setAttribute('x', (this.NODE_W * 0.65)/2); val.setAttribute('y', 28);
            val.textContent = node.val; val.classList.add('t-node-txt');
            val.setAttribute('text-anchor', 'middle');

            // 5. Next Text (Dynamic)
            const nextTxt = document.createElementNS("http://www.w3.org/2000/svg", "text");
            nextTxt.setAttribute('x', this.NODE_W * 0.825); nextTxt.setAttribute('y', 28);
            nextTxt.classList.add('t-node-next');
            nextTxt.setAttribute('text-anchor', 'middle');
            nextTxt.setAttribute('id', `t-next-txt-${index}`); // ID for direct update

            // Logic for Next Text content
            if (node.next === null) {
                nextTxt.textContent = "NULL";
                nextTxt.setAttribute('fill', '#ef4444');
            } else {
                nextTxt.textContent = `#${node.next}`;
                nextTxt.setAttribute('fill', '#64748b');
            }

            g.appendChild(idTxt); g.appendChild(rect); g.appendChild(div);
            g.appendChild(val); g.appendChild(nextTxt);
            grp.appendChild(g);
        },

        updateNodeNextText: function(index, newId) {
            const txtEl = document.getElementById(`t-next-txt-${index}`);
            if (txtEl) {
                txtEl.textContent = `#${newId}`;
                txtEl.setAttribute('fill', '#64748b');
            }
        },

        drawArrow: function(index) {
            const grp = document.getElementById('tail-nodes-grp');
            const x1 = this.START_X + index * this.SPACING + this.NODE_W;
            const x2 = this.START_X + (index + 1) * this.SPACING;
            const y = this.START_Y + (this.NODE_H / 2);

            const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
            line.setAttribute('x1', x1); line.setAttribute('y1', y);
            line.setAttribute('x2', x2); line.setAttribute('y2', y);
            line.setAttribute('stroke', '#94a3b8'); line.setAttribute('stroke-width', 2);
            line.setAttribute('marker-end', 'url(#arrow-tail)');
            
            // Insert before nodes so arrows are behind? Actually append is fine here.
            grp.appendChild(line);
        },

        moveTailVisual: function(index) {
            const ptr = document.getElementById('tail-ptr-visual');
            const x = this.START_X + index * this.SPACING + (this.NODE_W / 2);
            const y = this.START_Y - 40; // Position above the node
            ptr.setAttribute('transform', `translate(${x}, ${y})`);
        },

        log: function(msg) { document.getElementById('tail-status').textContent = msg; },
        hl: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => tailDemo.reset(), 500);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>


<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Algorithms</div>
      <div class="sub">Edge Case Analysis</div>
    </div>
    <span class="pill">Time Complexity: O(n)</span>
  </div>

  <h2>Deleting the Tail</h2>

  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      
      <div class="info-card">
        <h3 style="margin:0 0 10px; color:var(--accent); font-size:18px;">The "Holding Hands" Problem</h3>
        <p style="margin:0; font-size:16px; color:var(--ink);">
          We can't step back from the Tail. We must traverse from the start to find the <strong>second-to-last</strong> node.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div class="line comment">// 1. Stop before the end</div>
        <div id="del-line-1" class="line">while (curr.next.next != null) {</div>
        <div id="del-line-2" class="line">&nbsp;&nbsp;curr = curr.next;</div>
        <div id="del-line-3" class="line">}</div>
        <div class="line comment">// 2. Nullify the reference</div>
        <div id="del-line-4" class="line">curr.next = null;</div>
        <div class="line comment" style="opacity:0.6;">// Tail var is NOT updated</div>
      </div>

    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:400px;">
      
      <svg id="del-stage" width="100%" height="250" viewBox="0 0 500 250" style="overflow:visible;">
        <defs>
          <marker id="arrow-del" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
          </marker>
        </defs>
        
        <g id="del-list-grp"></g>
        
        <g id="ptr-tail" style="transition: transform 0.5s ease;">
           <text x="0" y="-10" text-anchor="middle" font-weight="bold" fill="#ef4444" font-size="12">TAIL</text>
           <line x1="0" y1="0" x2="0" y2="25" stroke="#ef4444" stroke-width="2" marker-end="url(#arrow-del)" />
        </g>

        <g id="ptr-curr" style="opacity:0; transition: transform 0.3s ease;">
           <text x="0" y="85" text-anchor="middle" font-weight="bold" fill="#f59e0b" font-size="12">curr</text>
           <line x1="0" y1="75" x2="0" y2="45" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow-del)" />
        </g>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0;">
         <div id="del-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px; height:20px;">Ready to delete.</div>
         <div style="display:grid; grid-template-columns: 1fr 2fr; gap:10px;">
             <button class="btn btn-secondary" style="padding:10px; border-radius:8px; border:none; cursor:pointer;" onclick="delDemo.reset()">Reset</button>
             <button class="btn btn-danger" style="padding:10px; border-radius:8px; border:none; cursor:pointer; background:#ef4444; color:white; font-weight:bold;" onclick="delDemo.run()">Delete Tail</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer">
    <div class="muted"> </div>
    <div class="slide-no" data-slide-no></div>
  </div>

  <script>
    const delDemo = {
      isRunning: false,
      
      reset: function() {
        this.isRunning = false;
        this.clearHighlights();
        document.getElementById('del-msg').textContent = "Ready.";
        document.getElementById('ptr-curr').style.opacity = 0;
        
        // Reset Graphics
        const g = document.getElementById('del-list-grp');
        g.innerHTML = '';
        
        // Render 4 nodes using standard style
        for(let i=0; i<4; i++) this.drawNode(i);
        
        // Position Tail at last node (index 3)
        // x = 30 + (3 * 110) + 25 = 385
        document.getElementById('ptr-tail').setAttribute('transform', `translate(385, 20)`);
        document.getElementById('ptr-tail').style.opacity = 1;
      },
      
      run: async function() {
        if(this.isRunning) return;
        this.isRunning = true;
        const msg = document.getElementById('del-msg');
        const currPtr = document.getElementById('ptr-curr');
        
        // Step 1: Traverse
        msg.textContent = "Traversing to 2nd-to-last node...";
        this.highlightLine('del-line-1');
        currPtr.style.opacity = 1;
        
        for(let i=0; i<3; i++) {
          const x = 30 + (i * 110) + 25;
          currPtr.setAttribute('transform', `translate(${x}, 0)`);
          
          if(i < 2) {
             await this.wait(500);
             this.highlightLine('del-line-2');
             await this.wait(500);
             this.highlightLine('del-line-1');
          } else {
             // Found it (Index 2)
             await this.wait(500);
             msg.textContent = "Found it! (Node " + i + ")";
             this.highlightNode(i);
             await this.wait(1000);
          }
        }
        
        // Step 2: Delete
        msg.textContent = "Setting curr.next = null...";
        this.highlightLine('del-line-4');
        await this.wait(800);
        
        // Visual Break
        const lastLink = document.getElementById('del-link-2');
        const lastNode = document.getElementById('del-node-3');
        
        if(lastLink) {
            lastLink.setAttribute('stroke', '#ef4444');
            lastLink.setAttribute('stroke-dasharray', '4');
            await this.wait(500);
            lastLink.style.opacity = 0;
        }
        
        if(lastNode) {
            lastNode.style.opacity = 0.4;
            lastNode.setAttribute('transform', 'translate(360, 80) rotate(10)'); 
        }
        
        msg.textContent = "Done. TAIL pointer NOT updated!";
        await this.wait(500);
        currPtr.style.opacity = 0;
        this.clearHighlights();
        this.isRunning = false;
      },
      
      drawNode: function(i) {
        const grp = document.getElementById('del-list-grp');
        const x = 30 + (i * 110);
        const y = 50;
        
        const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
        g.setAttribute('id', `del-node-${i}`);
        g.setAttribute('transform', `translate(${x}, ${y})`);
        g.style.transition = "all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)";
        
        // Rect matching theme
        const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        rect.setAttribute('width', 50); rect.setAttribute('height', 40);
        rect.setAttribute('rx', 4);
        rect.setAttribute('fill', '#fff');
        rect.setAttribute('stroke', '#0f172a');
        rect.setAttribute('stroke-width', 2);
        
        const txt = document.createElementNS("http://www.w3.org/2000/svg", "text");
        txt.setAttribute('x', 25); txt.setAttribute('y', 25);
        txt.setAttribute('text-anchor', 'middle');
        txt.setAttribute('font-weight', 'bold');
        txt.textContent = i;
        
        g.appendChild(rect); g.appendChild(txt);
        grp.appendChild(g);
        
        if(i < 3) {
            const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
            line.setAttribute('id', `del-link-${i}`);
            line.setAttribute('x1', x + 50); line.setAttribute('y1', y + 20);
            line.setAttribute('x2', x + 110); line.setAttribute('y2', y + 20);
            line.setAttribute('stroke', '#64748b');
            line.setAttribute('stroke-width', 2);
            line.setAttribute('marker-end', 'url(#arrow-del)');
            line.style.transition = "opacity 0.5s";
            grp.appendChild(line);
        }
      },
      
      highlightLine: function(id) {
        document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
        if(id) document.getElementById(id).classList.add('active-line');
      },
      
      highlightNode: function(i) {
        const el = document.getElementById(`del-node-${i}`);
        if(el) el.querySelector('rect').setAttribute('stroke', '#f59e0b');
      },
      
      clearHighlights: function() {
        document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
        document.querySelectorAll('#del-list-grp rect').forEach(r => r.setAttribute('stroke', '#0f172a'));
      },
      
      wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => delDemo.reset(), 500);
  </script>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Variations</div>
      <div class="sub">Head & Tail</div>
    </div>
    <span class="pill">Add First</span>
  </div>

  <h2>AddFirst: Updating the Head</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #8b5cf6;">
        <h3 style="margin:0 0 10px; color:#7c3aed;">The Edge Case</h3>
        <p style="margin:0; font-size:16px;">
          Normally, <code>AddFirst</code> only changes the Head.
          <br><strong>However:</strong> If the list is empty, the new node is both the First <em>and</em> the Last node. You must update <strong>both pointers</strong>.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div id="af-line-1" class="line">Node newNode = new Node(data);</div>
        <div id="af-line-2" class="line">if (head == null) {</div>
        <div id="af-line-3" class="line" style="color:#8b5cf6;">&nbsp;&nbsp;last = newNode; // Special Case!</div>
        <div id="af-line-4" class="line">} else {</div>
        <div id="af-line-5" class="line">&nbsp;&nbsp;newNode.next = head;</div>
        <div id="af-line-6" class="line">}</div>
        <div id="af-line-7" class="line">head = newNode;</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:450px;">
      
      <svg id="addfirst-stage" width="100%" height="250" viewBox="0 0 500 250" style="overflow:visible;">
        <defs>
            <marker id="arrow-af" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
            </marker>
             <marker id="arrow-ptr-af" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
            </marker>
        </defs>
        
        <g id="af-list-grp"></g>
        
        <g id="af-head-ptr" style="transition: transform 0.5s ease;">
            <text x="0" y="0" text-anchor="middle" font-weight="bold" fill="#ea580c" font-size="12">HEAD</text>
            <line x1="0" y1="5" x2="0" y2="25" stroke="#ea580c" stroke-width="2" marker-end="url(#arrow-af)"/>
        </g>
        
        <g id="af-last-ptr" style="transition: transform 0.5s ease;">
            <text x="0" y="0" text-anchor="middle" font-weight="bold" fill="#22c55e" font-size="12">LAST</text>
            <line x1="0" y1="5" x2="0" y2="25" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-af)"/>
        </g>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0; text-align:center;">
         <div id="af-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px;">Empty List.</div>
         <div style="display:flex; gap:10px; justify-content:center;">
             <button class="btn btn-secondary" onclick="addFirstDemo.reset()">Reset</button>
             <button class="btn btn-primary" style="background:#8b5cf6;" onclick="addFirstDemo.add()">Add First</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - AddFirst</div><div class="slide-no"></div></div>

  <script>
    const addFirstDemo = {
        nodes: [],
        
        init: function() { this.reset(); },
        
        reset: function() {
            this.nodes = [];
            document.getElementById('af-list-grp').innerHTML = '';
            document.getElementById('af-msg').textContent = "Empty List.";
            
            // Hide pointers initially
            document.getElementById('af-head-ptr').style.opacity = '0';
            document.getElementById('af-last-ptr').style.opacity = '0';
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
        },
        
        add: async function() {
            const msg = document.getElementById('af-msg');
            const isEmpty = this.nodes.length === 0;
            const val = String.fromCharCode(65 + this.nodes.length);
            
            this.highlight('af-line-1');
            msg.textContent = `Creating Node ${val}...`;
            
            // 1. Create Node (Visually floating)
            // If list exists, we shift everyone right first to make room
            if(!isEmpty) {
                this.shiftExistingNodes();
                await this.wait(500);
            }
            
            this.createNode(val, 20); // Always insert at x=20
            
            await this.wait(500);
            
            if(isEmpty) {
                // CASE: EMPTY
                this.highlight('af-line-2');
                msg.textContent = "Head is NULL (List Empty)";
                await this.wait(800);
                
                this.highlight('af-line-3');
                msg.textContent = "Update LAST pointer.";
                const lastPtr = document.getElementById('af-last-ptr');
                lastPtr.setAttribute('transform', 'translate(45, 120)'); // Under node
                lastPtr.style.opacity = '1';
                
            } else {
                // CASE: EXISTING
                this.highlight('af-line-5');
                msg.textContent = "newNode.next = current Head";
                this.drawArrow(70, 60, 110, 60); // Connect new to old head
            }
            
            await this.wait(800);
            
            // Final Head Update
            this.highlight('af-line-7');
            msg.textContent = "head = newNode";
            
            const headPtr = document.getElementById('af-head-ptr');
            headPtr.setAttribute('transform', 'translate(45, 10)'); // Above node
            headPtr.style.opacity = '1';
            
            // Store data
            this.nodes.unshift(val);
            msg.textContent = "Added.";
        },
        
        shiftExistingNodes: function() {
             const grp = document.getElementById('af-list-grp');
             Array.from(grp.children).forEach(child => {
                 // Parse transform
                 const current = child.getAttribute('transform');
                 if(current) {
                     const x = parseFloat(current.match(/translate\(([^,]+)/)[1]);
                     child.setAttribute('transform', `translate(${x + 90}, 40)`);
                 }
                 // If it's a line (arrow)
                 if(child.tagName === 'line') {
                      const x1 = parseFloat(child.getAttribute('x1'));
                      const x2 = parseFloat(child.getAttribute('x2'));
                      child.setAttribute('x1', x1 + 90);
                      child.setAttribute('x2', x2 + 90);
                 }
             });
             
             // Move Last Ptr if needed
             if(this.nodes.length > 0) {
                 // Last ptr is under the last element. We moved everything right.
                 // We don't need to recalculate index, just shift the visual ptr
                 const lastPtr = document.getElementById('af-last-ptr');
                 const currentTrans = lastPtr.getAttribute('transform');
                 if(currentTrans) {
                     const x = parseFloat(currentTrans.match(/translate\(([^,]+)/)[1]);
                     lastPtr.setAttribute('transform', `translate(${x + 90}, 120)`);
                 }
             }
        },
        
        createNode: function(txt, x) {
            const grp = document.getElementById('af-list-grp');
            const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
            g.setAttribute('transform', `translate(${x}, 40)`);
            g.style.animation = "fadeIn 0.5s ease";
            
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute('width', 50); rect.setAttribute('height', 40);
            rect.setAttribute('rx', 4); rect.setAttribute('fill', '#fff');
            rect.setAttribute('stroke', '#0f172a'); rect.setAttribute('stroke-width', 2);
            
            const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
            text.setAttribute('x', 25); text.setAttribute('y', 25);
            text.setAttribute('text-anchor', 'middle'); text.textContent = txt;
            
            g.appendChild(rect); g.appendChild(text);
            grp.appendChild(g);
        },
        
        drawArrow: function(x1, y1, x2, y2) {
             const grp = document.getElementById('af-list-grp');
             const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
             l.setAttribute('x1', x1); l.setAttribute('y1', y1);
             l.setAttribute('x2', x2); l.setAttribute('y2', y2);
             l.setAttribute('stroke', '#64748b'); l.setAttribute('marker-end', 'url(#arrow-af)');
             grp.appendChild(l);
        },
        
        highlight: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => addFirstDemo.init(), 500);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Variations</div>
      <div class="sub">Head & Tail</div>
    </div>
    <span class="pill">Add Last</span>
  </div>

  <h2>AddLast: Updating the Tail</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #22c55e;">
        <h3 style="margin:0 0 10px; color:#15803d;">The Efficiency</h3>
        <p style="margin:0; font-size:16px;">
          <strong>AddLast</strong> is the "opposite".
          <br>1. Head remains unchanged.
          <br>2. We use the <code>last</code> pointer to append instantly.
          <br>3. We MUST update <code>last</code> to point to the new node.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div id="al-line-1" class="line">Node newNode = new Node(data);</div>
        <div id="al-line-2" class="line">if (head == null) {</div>
        <div id="al-line-3" class="line">&nbsp;&nbsp;head = newNode;</div>
        <div id="al-line-4" class="line">&nbsp;&nbsp;last = newNode;</div>
        <div id="al-line-5" class="line">} else {</div>
        <div id="al-line-6" class="line" style="color:#22c55e;">&nbsp;&nbsp;last.next = newNode; // Link Old Tail</div>
        <div id="al-line-7" class="line" style="color:#22c55e;">&nbsp;&nbsp;last = newNode;      // Move Tail</div>
        <div id="al-line-8" class="line">}</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:450px;">
      
      <svg id="addlast-stage" width="100%" height="250" viewBox="0 0 500 250" style="overflow:visible;">
        <defs>
            <marker id="arrow-al" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
            </marker>
        </defs>
        
        <g id="al-list-grp"></g>
        
        <g id="al-head-ptr" style="transition: transform 0.5s ease;">
            <text x="0" y="0" text-anchor="middle" font-weight="bold" fill="#ea580c" font-size="12">HEAD</text>
            <line x1="0" y1="5" x2="0" y2="25" stroke="#ea580c" stroke-width="2" marker-end="url(#arrow-al)"/>
        </g>
        
        <g id="al-last-ptr" style="transition: transform 0.5s ease;">
            <text x="0" y="0" text-anchor="middle" font-weight="bold" fill="#22c55e" font-size="12">LAST</text>
            <line x1="0" y1="5" x2="0" y2="25" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-al)"/>
        </g>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0; text-align:center;">
         <div id="al-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px;">Empty List.</div>
         <div style="display:flex; gap:10px; justify-content:center;">
             <button class="btn btn-secondary" onclick="addLastDemo.reset()">Reset</button>
             <button class="btn btn-success" onclick="addLastDemo.add()">Add Last</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - AddLast</div><div class="slide-no"></div></div>

  <script>
    const addLastDemo = {
        count: 0,
        
        init: function() { this.reset(); },
        
        reset: function() {
            this.count = 0;
            document.getElementById('al-list-grp').innerHTML = '';
            document.getElementById('al-msg').textContent = "Empty List.";
            document.getElementById('al-head-ptr').style.opacity = '0';
            document.getElementById('al-last-ptr').style.opacity = '0';
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
        },
        
        add: async function() {
            if(this.count > 4) { this.reset(); return; }
            const msg = document.getElementById('al-msg');
            const val = String.fromCharCode(65 + this.count);
            const x = 20 + (this.count * 90);
            
            this.highlight('al-line-1');
            msg.textContent = `Creating Node ${val}...`;
            
            this.createNode(val, x);
            await this.wait(500);
            
            if(this.count === 0) {
                // First Node
                this.highlight('al-line-3');
                msg.textContent = "Head = newNode";
                const hp = document.getElementById('al-head-ptr');
                hp.setAttribute('transform', 'translate(45, 10)');
                hp.style.opacity = '1';
                
                await this.wait(500);
                
                this.highlight('al-line-4');
                msg.textContent = "Last = newNode";
                const lp = document.getElementById('al-last-ptr');
                lp.setAttribute('transform', 'translate(45, 120)');
                lp.style.opacity = '1';
                
            } else {
                // Normal Append
                this.highlight('al-line-6');
                msg.textContent = "last.next = newNode (Link)";
                this.drawArrow(x - 40, 60, x, 60);
                
                await this.wait(500);
                
                this.highlight('al-line-7');
                msg.textContent = "last = newNode (Update Tail)";
                const lp = document.getElementById('al-last-ptr');
                lp.setAttribute('transform', `translate(${x+25}, 120)`);
            }
            
            this.count++;
            await this.wait(500);
            msg.textContent = "Added.";
        },
        
        createNode: function(txt, x) {
            const grp = document.getElementById('al-list-grp');
            const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
            g.setAttribute('transform', `translate(${x}, 40)`);
            g.style.animation = "fadeIn 0.5s ease";
            
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute('width', 50); rect.setAttribute('height', 40);
            rect.setAttribute('rx', 4); rect.setAttribute('fill', '#fff');
            rect.setAttribute('stroke', '#0f172a'); rect.setAttribute('stroke-width', 2);
            
            const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
            text.setAttribute('x', 25); text.setAttribute('y', 25);
            text.setAttribute('text-anchor', 'middle'); text.textContent = txt;
            
            g.appendChild(rect); g.appendChild(text);
            grp.appendChild(g);
        },
        
        drawArrow: function(x1, y1, x2, y2) {
             const grp = document.getElementById('al-list-grp');
             const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
             l.setAttribute('x1', x1); l.setAttribute('y1', y1);
             l.setAttribute('x2', x2); l.setAttribute('y2', y2);
             l.setAttribute('stroke', '#64748b'); l.setAttribute('marker-end', 'url(#arrow-al)');
             grp.appendChild(l);
        },
        
        highlight: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => addLastDemo.init(), 500);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Variations</div>
      <div class="sub">Bidirectional</div>
    </div>
    <span class="pill">Doubly Linked</span>
  </div>

  <h2>Doubly Linked Lists</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #f59e0b;">
        <h3 style="margin:0 0 10px; color:#b45309;">The Trade-off</h3>
        <p style="margin:0; font-size:16px;">
          <strong>Pros:</strong> Most useful variety. Can traverse forwards and backwards.
          <br><strong>Cons:</strong> Adds complexity. Every operation (Add, Delete) must update <em>two</em> pointers per node.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div class="line">public class Node {</div>
        <div class="line" style="color:#2563eb;">&nbsp;&nbsp;public Node next;</div>
        <div class="line" style="color:#dc2626;">&nbsp;&nbsp;public Node previous;</div>
        <div class="line">&nbsp;&nbsp;public Object data;</div>
        <div class="line">}</div>
        <div class="line" style="color:#94a3b8; margin-top:10px;">// Can be used with Head only,</div>
        <div class="line" style="color:#94a3b8;">// or Head + Tail (Last).</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:450px;">
      
      <svg id="dll-stage" width="100%" height="250" viewBox="0 0 550 250" style="overflow:visible;">
        <defs>
            <marker id="arrow-next-dll" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                <polygon points="0 0, 8 3, 0 6" fill="#2563eb" />
            </marker>
            <marker id="arrow-prev-dll" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                <polygon points="0 3, 8 6, 8 0" fill="#dc2626" />
            </marker>
        </defs>
        
        <g id="dll-grp"></g>
        
        <rect id="dll-highlight" width="100" height="50" rx="4" fill="none" stroke="#f59e0b" stroke-width="4" style="opacity:0; transition: transform 0.4s ease;" />
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0; text-align:center;">
         <div id="dll-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px;">Current: HEAD</div>
         <div style="display:flex; gap:10px; justify-content:center;">
             <button class="btn btn-secondary" onclick="dllDemo.prev()" id="btn-prev">â† Previous</button>
             <button class="btn btn-secondary" onclick="dllDemo.next()" id="btn-next">Next â†’</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Doubly Linked</div><div class="slide-no"></div></div>

  <script>
    const dllDemo = {
        idx: 0,
        count: 3,
        
        init: function() {
            this.render();
            this.updateHighlight();
        },
        
        render: function() {
            const grp = document.getElementById('dll-grp');
            grp.innerHTML = '';
            
            // Draw 3 Nodes
            for(let i=0; i<this.count; i++) {
                this.drawNode(i);
            }
            
            // Draw NULLs
            this.drawNull(20, 85, 'prev');
            this.drawNull(20 + (this.count * 150) - 40, 85, 'next');
        },
        
        next: function() {
            if(this.idx < this.count - 1) {
                this.idx++;
                this.updateHighlight();
            }
        },
        
        prev: function() {
            if(this.idx > 0) {
                this.idx--;
                this.updateHighlight();
            }
        },
        
        updateHighlight: function() {
            const h = document.getElementById('dll-highlight');
            const x = 50 + (this.idx * 150);
            h.setAttribute('transform', `translate(${x}, 60)`);
            h.style.opacity = '1';
            
            const msg = document.getElementById('dll-msg');
            msg.textContent = `Current Node: ${String.fromCharCode(65+this.idx)}`;
            
            // Button States
            document.getElementById('btn-prev').disabled = (this.idx === 0);
            document.getElementById('btn-prev').style.opacity = (this.idx === 0) ? 0.5 : 1;
            
            document.getElementById('btn-next').disabled = (this.idx === this.count - 1);
            document.getElementById('btn-next').style.opacity = (this.idx === this.count - 1) ? 0.5 : 1;
        },
        
        drawNode: function(i) {
            const grp = document.getElementById('dll-grp');
            const x = 50 + (i * 150);
            const y = 60;
            
            const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
            g.setAttribute('transform', `translate(${x}, ${y})`);
            
            // Main Box
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute('width', 100); rect.setAttribute('height', 50);
            rect.setAttribute('rx', 4); rect.setAttribute('fill', '#fff');
            rect.setAttribute('stroke', '#0f172a'); rect.setAttribute('stroke-width', 2);
            
            // Dividers
            const l1 = this.createLine(30, 0, 30, 50);
            const l2 = this.createLine(70, 0, 70, 50);
            
            // Text
            const tPrev = this.createText(15, 30, 'Prev', '#dc2626', 10);
            const tData = this.createText(50, 32, String.fromCharCode(65+i), '#0f172a', 16);
            const tNext = this.createText(85, 30, 'Next', '#2563eb', 10);
            
            g.append(rect, l1, l2, tPrev, tData, tNext);
            grp.appendChild(g);
            
            // Arrows
            if (i < this.count - 1) {
                // Next Arrow (Top)
                const lineNext = document.createElementNS("http://www.w3.org/2000/svg", "line");
                lineNext.setAttribute('x1', x + 100); lineNext.setAttribute('y1', y + 15);
                lineNext.setAttribute('x2', x + 150); lineNext.setAttribute('y2', y + 15);
                lineNext.setAttribute('stroke', '#2563eb'); lineNext.setAttribute('stroke-width', 2);
                lineNext.setAttribute('marker-end', 'url(#arrow-next-dll)');
                grp.appendChild(lineNext);
                
                // Prev Arrow (Bottom)
                const linePrev = document.createElementNS("http://www.w3.org/2000/svg", "line");
                linePrev.setAttribute('x1', x + 150); linePrev.setAttribute('y1', y + 35);
                linePrev.setAttribute('x2', x + 100); linePrev.setAttribute('y2', y + 35);
                linePrev.setAttribute('stroke', '#dc2626'); linePrev.setAttribute('stroke-width', 2);
                linePrev.setAttribute('marker-end', 'url(#arrow-prev-dll)');
                grp.appendChild(linePrev);
            }
        },
        
        createLine: function(x1, y1, x2, y2) {
            const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
            l.setAttribute('x1', x1); l.setAttribute('y1', y1);
            l.setAttribute('x2', x2); l.setAttribute('y2', y2);
            l.setAttribute('stroke', '#e2e8f0');
            return l;
        },
        
        createText: function(x, y, txt, fill, size) {
            const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
            t.setAttribute('x', x); t.setAttribute('y', y);
            t.setAttribute('text-anchor', 'middle');
            t.setAttribute('fill', fill); t.setAttribute('font-size', size);
            t.setAttribute('font-weight', 'bold');
            t.textContent = txt;
            return t;
        },
        
        drawNull: function(x, y, type) {
             const grp = document.getElementById('dll-grp');
             const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
             t.setAttribute('x', x); t.setAttribute('y', y);
             t.textContent = "NULL";
             t.setAttribute('fill', type === 'next' ? '#2563eb' : '#dc2626');
             t.setAttribute('font-size', 10);
             grp.appendChild(t);
             
             // Tiny line
             const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
             if(type === 'next') {
                 l.setAttribute('x1', x-10); l.setAttribute('y1', y-5);
                 l.setAttribute('x2', x); l.setAttribute('y2', y-5);
                 l.setAttribute('stroke', '#2563eb');
             } else {
                 l.setAttribute('x1', x+30); l.setAttribute('y1', y-5);
                 l.setAttribute('x2', x+40); l.setAttribute('y2', y-5);
                 l.setAttribute('stroke', '#dc2626');
             }
             grp.appendChild(l);
        }
    };
    
    setTimeout(() => dllDemo.init(), 500);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Doubly Linked</div>
      <div class="sub">Fundamentals</div>
    </div>
    <span class="pill">Create & Structure</span>
  </div>

  <h2>The Class Structure</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #22c55e;">
        <h3 style="margin:0 0 10px; color:#15803d;">Basically Unchanged</h3>
        <p style="margin:0; font-size:16px;">
          Just like a Singly Linked List, the <strong>List Object</strong> is just a wrapper that holds references.
          <br><br>
          The only difference is that we now maintain a <strong>Head</strong> (start) and a <strong>Tail</strong> (end) to take advantage of the double links.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div class="line">public class DoublyLinkedList {</div>
        <div class="line">&nbsp;&nbsp;// The anchors</div>
        <div class="line" style="color:#ea580c;">&nbsp;&nbsp;private Node head;</div>
        <div class="line" style="color:#16a34a;">&nbsp;&nbsp;private Node tail;</div>
        <div class="line">&nbsp;</div>
        <div class="line">&nbsp;&nbsp;public DoublyLinkedList() {</div>
        <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;this.head = null;</div>
        <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;this.tail = null;</div>
        <div class="line">&nbsp;&nbsp;}</div>
        <div class="line">}</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:center; align-items:center; height:450px;">
      
      <svg id="dll-create-stage" width="100%" height="250" viewBox="0 0 400 250" style="overflow:visible;">
        <defs>
            <marker id="arrow-ptr-c" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
            </marker>
        </defs>
        
        <rect x="50" y="20" width="300" height="200" rx="10" fill="#f8fafc" stroke="#94a3b8" stroke-dasharray="5,5" stroke-width="2"/>
        <text x="65" y="45" font-family="monospace" font-weight="bold" fill="#64748b">new DoublyLinkedList()</text>

        <g transform="translate(100, 80)">
           <rect width="60" height="30" fill="#fff" stroke="#ea580c"/>
           <text x="30" y="20" text-anchor="middle" font-size="12">HEAD</text>
           <line id="line-head-c" x1="30" y1="30" x2="30" y2="80" stroke="#ea580c" stroke-width="2" marker-end="url(#arrow-ptr-c)" style="opacity:0;"/>
        </g>

        <g transform="translate(240, 80)">
           <rect width="60" height="30" fill="#fff" stroke="#16a34a"/>
           <text x="30" y="20" text-anchor="middle" font-size="12">TAIL</text>
           <line id="line-tail-c" x1="30" y1="30" x2="30" y2="80" stroke="#16a34a" stroke-width="2" marker-end="url(#arrow-ptr-c)" style="opacity:0;"/>
        </g>

        <g id="first-node-c" transform="translate(150, 160)" style="opacity:0; transition: all 0.5s ease;">
            <rect width="100" height="40" rx="4" fill="#fff" stroke="#0f172a" stroke-width="2"/>
            <text x="50" y="25" text-anchor="middle" font-weight="bold">Data</text>
            <text x="-20" y="25" font-size="10" fill="#94a3b8">NULL</text>
            <text x="120" y="25" font-size="10" fill="#94a3b8">NULL</text>
            <line x1="0" y1="20" x2="-15" y2="20" stroke="#94a3b8"/>
            <line x1="100" y1="20" x2="115" y2="20" stroke="#94a3b8"/>
        </g>

      </svg>

      <div style="margin-top:20px;">
          <button class="btn btn-primary" onclick="dllCreateDemo.addNode()">Add First Node</button>
          <button class="btn btn-secondary" onclick="dllCreateDemo.reset()">Reset</button>
      </div>

    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - DLL Create</div><div class="slide-no"></div></div>

  <script>
    const dllCreateDemo = {
        reset: function() {
            document.getElementById('first-node-c').style.opacity = '0';
            document.getElementById('line-head-c').style.opacity = '0';
            document.getElementById('line-tail-c').style.opacity = '0';
            
            // Reset positions
            document.getElementById('line-head-c').setAttribute('x2', '30');
            document.getElementById('line-head-c').setAttribute('y2', '80');
        },
        addNode: function() {
            // Show Node
            document.getElementById('first-node-c').style.opacity = '1';
            
            // Point Head and Tail to it
            setTimeout(() => {
                const lh = document.getElementById('line-head-c');
                const lt = document.getElementById('line-tail-c');
                
                // Animate lines pointing to the node
                lh.style.transition = "all 0.5s ease";
                lh.setAttribute('x2', '100'); // Angle towards center x=150+50 relative
                lh.setAttribute('y2', '80'); // Relative Y
                lh.style.opacity = '1';

                lt.style.transition = "all 0.5s ease";
                lt.setAttribute('x2', '-40');
                lt.setAttribute('y2', '80');
                lt.style.opacity = '1';
            }, 300);
        }
    };
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Doubly Linked</div>
      <div class="sub">Algorithms</div>
    </div>
    <span class="pill">Reverse Traversal</span>
  </div>

  <h2>Traversing Backwards</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #ec4899;">
        <h3 style="margin:0 0 10px; color:#be185d;">The Power of "Previous"</h3>
        <p style="margin:0; font-size:16px;">
          With a Doubly Linked List, if you have a reference to the <strong>Tail</strong> (or any middle node), you can walk all the way back to the start.
          <br><br>
          <strong>Logic Change:</strong> Instead of moving to <code>next</code>, we move to <code>previous</code>.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div id="rev-line-1" class="line">Node current = tail; // Start at end</div>
        <div id="rev-line-2" class="line">while (current != null) {</div>
        <div id="rev-line-3" class="line">&nbsp;&nbsp;Console.WriteLine(current.data);</div>
        <div id="rev-line-4" class="line" style="color:#ec4899;">&nbsp;&nbsp;current = current.previous; // Move Back</div>
        <div id="rev-line-5" class="line">}</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:450px;">
      
      <svg id="rev-stage" width="100%" height="220" viewBox="0 0 500 220" style="overflow:visible;">
        <defs>
            <marker id="arrow-prev-rev" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                <polygon points="0 3, 8 6, 8 0" fill="#ec4899" />
            </marker>
        </defs>
        
        <g id="rev-list-grp"></g>
        
        <g id="rev-walker" style="opacity:0; transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);">
            <circle r="15" fill="#fce7f3" stroke="#be185d" stroke-width="2"/>
            <text x="0" y="4" text-anchor="middle" font-size="10" fill="#be185d" font-weight="bold">curr</text>
            <line x1="0" y1="15" x2="0" y2="30" stroke="#be185d" stroke-width="2" />
        </g>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0; display:flex; flex-direction:column; gap:10px;">
         <div id="rev-console" style="font-family:monospace; color:#0f172a; font-weight:bold; min-height:20px;">Ready.</div>
         <div style="display:flex; gap:10px; justify-content:center;">
             <button class="btn btn-secondary" onclick="revDemo.reset()">Reset</button>
             <button class="btn btn-primary" style="background:#be185d;" onclick="revDemo.run()">Run Reverse Traversal</button>
         </div>
      </div>

    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Reverse Traversal</div><div class="slide-no"></div></div>

  <script>
    const revDemo = {
        data: ['Head', 'B', 'C', 'Tail'],
        
        init: function() { this.render(); },
        
        reset: function() {
            this.render();
            document.getElementById('rev-walker').style.opacity = '0';
            document.getElementById('rev-console').textContent = "Ready.";
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
        },
        
        render: function() {
            const grp = document.getElementById('rev-list-grp');
            grp.innerHTML = '';
            
            this.data.forEach((val, i) => {
                const x = 50 + (i * 100);
                const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                g.setAttribute('transform', `translate(${x}, 80)`);
                g.setAttribute('id', `rev-node-${i}`);
                
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttribute('width', 80); rect.setAttribute('height', 40);
                rect.setAttribute('rx', 4); rect.setAttribute('fill', '#fff');
                rect.setAttribute('stroke', '#0f172a'); rect.setAttribute('stroke-width', 2);
                
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute('x', 40); text.setAttribute('y', 25);
                text.setAttribute('text-anchor', 'middle'); text.textContent = val;
                text.setAttribute('font-weight', 'bold');
                
                g.append(rect, text);
                grp.appendChild(g);
                
                // Back Arrow (Pink)
                if (i > 0) {
                     const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
                     l.setAttribute('x1', x); l.setAttribute('y1', 110);
                     l.setAttribute('x2', x - 20); l.setAttribute('y2', 110);
                     l.setAttribute('stroke', '#ec4899'); l.setAttribute('stroke-width', 2);
                     l.setAttribute('marker-end', 'url(#arrow-prev-rev)');
                     grp.appendChild(l);
                }
            });
        },
        
        run: async function() {
            const walker = document.getElementById('rev-walker');
            const msg = document.getElementById('rev-console');
            
            // Start at Tail
            this.highlight('rev-line-1');
            msg.textContent = "current = tail (Start at End)";
            walker.style.opacity = '1';
            
            let i = this.data.length - 1;
            
            while(i >= 0) {
                // Move Walker
                const x = 50 + (i * 100) + 40; // Center
                walker.setAttribute('transform', `translate(${x}, 40)`); // Above node
                
                this.highlight('rev-line-2');
                await this.wait(500);
                
                // Print
                this.highlight('rev-line-3');
                msg.textContent = `Processing: ${this.data[i]}`;
                const node = document.getElementById(`rev-node-${i}`).querySelector('rect');
                node.setAttribute('fill', '#fbcfe8'); // Pink highlight
                
                await this.wait(600);
                
                // Move Back
                this.highlight('rev-line-4');
                node.setAttribute('fill', '#fff');
                
                if(i > 0) {
                    msg.textContent = "current = current.previous";
                } else {
                    msg.textContent = "current.previous is NULL. Stop.";
                }
                
                await this.wait(500);
                i--;
            }
            
            walker.style.opacity = '0';
            this.highlight('rev-line-5');
            msg.textContent = "Done.";
        },
        
        highlight: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => revDemo.init(), 200);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Doubly Linked</div>
      <div class="sub">Operations</div>
    </div>
    <span class="pill">Append (Add Last)</span>
  </div>

  <h2>Appending to a DLL</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #2563eb;">
        <h3 style="margin:0 0 10px; color:#1d4ed8;">The "Double" Difference</h3>
        <p style="margin:0; font-size:16px;">
          Appending is almost identical to the Singly Linked List with a Tail pointer.
          <br><br>
          <strong>The Extra Step:</strong> You must connect the new node's <code>previous</code> pointer back to the old tail.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div id="dap-line-1" class="line">Node newNode = new Node(data);</div>
        <div id="dap-line-2" class="line">if (head == null) {</div>
        <div id="dap-line-3" class="line">&nbsp;&nbsp;head = newNode; tail = newNode;</div>
        <div id="dap-line-4" class="line">} else {</div>
        <div id="dap-line-5" class="line" style="color:#dc2626;">&nbsp;&nbsp;newNode.previous = tail; // Back Link</div>
        <div id="dap-line-6" class="line" style="color:#2563eb;">&nbsp;&nbsp;tail.next = newNode;     // Fwd Link</div>
        <div id="dap-line-7" class="line">&nbsp;&nbsp;tail = newNode;          // Update Tail</div>
        <div id="dap-line-8" class="line">}</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:450px;">
      
      <svg id="dll-append-stage" width="100%" height="250" viewBox="0 0 550 250" style="overflow:visible;">
        <defs>
            <marker id="arrow-n-dap" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><polygon points="0 0, 8 3, 0 6" fill="#2563eb" /></marker>
            <marker id="arrow-p-dap" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><polygon points="0 3, 8 6, 8 0" fill="#dc2626" /></marker>
            <marker id="arrow-ptr-dap" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/></marker>
        </defs>
        
        <g id="dap-list-grp"></g>
        
        <g id="dap-head-ptr" style="opacity:0; transition: all 0.5s ease;">
            <text x="0" y="0" text-anchor="middle" font-weight="bold" fill="#ea580c" font-size="12">HEAD</text>
            <line x1="0" y1="5" x2="0" y2="25" stroke="#ea580c" stroke-width="2" marker-end="url(#arrow-ptr-dap)"/>
        </g>
        
        <g id="dap-tail-ptr" style="opacity:0; transition: all 0.5s ease;">
            <text x="0" y="0" text-anchor="middle" font-weight="bold" fill="#16a34a" font-size="12">TAIL</text>
            <line x1="0" y1="5" x2="0" y2="25" stroke="#16a34a" stroke-width="2" marker-end="url(#arrow-ptr-dap)"/>
        </g>
      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0; text-align:center;">
         <div id="dap-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px;">Empty List.</div>
         <div style="display:flex; gap:10px; justify-content:center;">
             <button class="btn btn-secondary" onclick="dllAppend.reset()">Reset</button>
             <button class="btn btn-primary" onclick="dllAppend.add()">Append Node</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - DLL Append</div><div class="slide-no"></div></div>

  <script>
    const dllAppend = {
        count: 0,
        
        init: function() { this.reset(); },
        
        reset: function() {
            this.count = 0;
            document.getElementById('dap-list-grp').innerHTML = '';
            document.getElementById('dap-msg').textContent = "Empty List.";
            document.getElementById('dap-head-ptr').style.opacity = '0';
            document.getElementById('dap-tail-ptr').style.opacity = '0';
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
        },
        
        add: async function() {
            if(this.count > 3) { this.reset(); return; }
            
            const msg = document.getElementById('dap-msg');
            const val = String.fromCharCode(65 + this.count);
            const x = 50 + (this.count * 120);
            
            // 1. Create Node
            this.highlight('dap-line-1');
            msg.textContent = `Creating Node ${val}...`;
            this.createNode(val, x);
            
            await this.wait(500);
            
            if(this.count === 0) {
                // Empty Case
                this.highlight('dap-line-2');
                msg.textContent = "List is Empty...";
                await this.wait(500);
                
                this.highlight('dap-line-3');
                msg.textContent = "Head & Tail point to New Node.";
                
                const hp = document.getElementById('dap-head-ptr');
                hp.setAttribute('transform', `translate(${x+50}, 40)`);
                hp.style.opacity = '1';

                const tp = document.getElementById('dap-tail-ptr');
                tp.setAttribute('transform', `translate(${x+50}, 140)`); // Below
                tp.style.opacity = '1';
                
            } else {
                // Append Case
                this.highlight('dap-line-5');
                msg.textContent = "newNode.prev = tail (Red Link)";
                this.drawArrow(x, 105, x-20, 105, 'prev'); // Backwards
                
                await this.wait(800);
                
                this.highlight('dap-line-6');
                msg.textContent = "tail.next = newNode (Blue Link)";
                this.drawArrow(x-20, 85, x, 85, 'next'); // Forwards
                
                await this.wait(800);
                
                this.highlight('dap-line-7');
                msg.textContent = "tail = newNode (Update Pointer)";
                const tp = document.getElementById('dap-tail-ptr');
                tp.setAttribute('transform', `translate(${x+50}, 140)`);
            }
            
            this.count++;
            await this.wait(500);
            msg.textContent = "Ready.";
        },
        
        createNode: function(txt, x) {
            const grp = document.getElementById('dap-list-grp');
            const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
            g.setAttribute('transform', `translate(${x}, 70)`);
            g.style.animation = "fadeIn 0.5s ease";
            
            // Box
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute('width', 100); rect.setAttribute('height', 50);
            rect.setAttribute('rx', 4); rect.setAttribute('fill', '#fff');
            rect.setAttribute('stroke', '#0f172a'); rect.setAttribute('stroke-width', 2);
            
            // Dividers
            const l1 = document.createElementNS("http://www.w3.org/2000/svg", "line");
            l1.setAttribute('x1', 25); l1.setAttribute('x2', 25); l1.setAttribute('y2', 50); l1.setAttribute('stroke', '#cbd5e1');
            const l2 = document.createElementNS("http://www.w3.org/2000/svg", "line");
            l2.setAttribute('x1', 75); l2.setAttribute('x2', 75); l2.setAttribute('y2', 50); l2.setAttribute('stroke', '#cbd5e1');
            
            // Text
            const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
            t.setAttribute('x', 50); t.setAttribute('y', 30); t.textContent = txt;
            t.setAttribute('text-anchor', 'middle'); t.setAttribute('font-weight', 'bold');
            
            // Labels
            const tP = document.createElementNS("http://www.w3.org/2000/svg", "text");
            tP.setAttribute('x', 12); tP.setAttribute('y', 30); tP.textContent = "P"; tP.setAttribute('font-size', 10); tP.setAttribute('fill', '#dc2626');
            const tN = document.createElementNS("http://www.w3.org/2000/svg", "text");
            tN.setAttribute('x', 88); tN.setAttribute('y', 30); tN.textContent = "N"; tN.setAttribute('font-size', 10); tN.setAttribute('fill', '#2563eb');
            
            g.append(rect, l1, l2, t, tP, tN);
            grp.appendChild(g);
        },
        
        drawArrow: function(x1, y1, x2, y2, type) {
            const grp = document.getElementById('dap-list-grp');
            const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
            l.setAttribute('x1', x1); l.setAttribute('y1', y1);
            l.setAttribute('x2', x2); l.setAttribute('y2', y2);
            l.setAttribute('stroke-width', 2);
            
            if (type === 'next') {
                l.setAttribute('stroke', '#2563eb');
                l.setAttribute('marker-end', 'url(#arrow-n-dap)');
            } else {
                l.setAttribute('stroke', '#dc2626');
                l.setAttribute('marker-end', 'url(#arrow-p-dap)');
            }
            grp.appendChild(l);
        },
        
        highlight: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => dllAppend.init(), 200);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Doubly Linked</div>
      <div class="sub">Operations</div>
    </div>
    <span class="pill">Insert (Middle)</span>
  </div>

  <h2>Inserting Between Nodes</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #f59e0b;">
        <h3 style="margin:0 0 10px; color:#b45309;">The "Tricky" Part</h3>
        <p style="margin:0; font-size:16px;">
          You are inserting between <strong>Current</strong> and <strong>Next</strong>.
          <br>You must update <strong>4 pointers</strong> total:
          <br>1. Connect NewNode to neighbors.
          <br>2. Connect neighbors to NewNode.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div class="line" style="color:#94a3b8;">// Insert 'newNode' after 'current'</div>
        <div id="dins-line-1" class="line">Node nextNode = current.next;</div>
        <div class="line">&nbsp;</div>
        <div class="line" style="color:#94a3b8;">// 1. Link NewNode (Safe)</div>
        <div id="dins-line-2" class="line" style="color:#2563eb;">newNode.next = nextNode;</div>
        <div id="dins-line-3" class="line" style="color:#dc2626;">newNode.previous = current;</div>
        <div class="line">&nbsp;</div>
        <div class="line" style="color:#94a3b8;">// 2. Update Neighbors</div>
        <div id="dins-line-4" class="line" style="color:#dc2626;">nextNode.previous = newNode;</div>
        <div id="dins-line-5" class="line" style="color:#2563eb;">current.next = newNode;</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:450px;">
      
      <svg id="dll-ins-stage" width="100%" height="250" viewBox="0 0 550 250" style="overflow:visible;">
        <defs>
            <marker id="arrow-n-di" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><polygon points="0 0, 8 3, 0 6" fill="#2563eb" /></marker>
            <marker id="arrow-p-di" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><polygon points="0 3, 8 6, 8 0" fill="#dc2626" /></marker>
        </defs>
        
        <g id="di-grp-curr" transform="translate(50, 50)">
            <rect width="100" height="50" rx="4" fill="#fff" stroke="#0f172a" stroke-width="2"/>
            <text x="50" y="30" text-anchor="middle" font-weight="bold">Current</text>
        </g>
        
        <g id="di-grp-next" transform="translate(350, 50)">
            <rect width="100" height="50" rx="4" fill="#fff" stroke="#0f172a" stroke-width="2"/>
            <text x="50" y="30" text-anchor="middle" font-weight="bold">NextNode</text>
        </g>
        
        <g id="di-grp-new" transform="translate(200, 150)" style="opacity:0; transition: opacity 0.5s ease;">
            <rect width="100" height="50" rx="4" fill="#ecfccb" stroke="#65a30d" stroke-width="2"/>
            <text x="50" y="30" text-anchor="middle" font-weight="bold" fill="#365314">NewNode</text>
        </g>

        <g id="di-links-old">
            <line id="link-old-fwd" x1="150" y1="65" x2="350" y2="65" stroke="#2563eb" stroke-width="2" marker-end="url(#arrow-n-di)"/>
            <line id="link-old-back" x1="350" y1="85" x2="150" y2="85" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow-p-di)"/>
        </g>

        <g id="di-links-new"></g>

      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0; text-align:center;">
         <div id="di-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px;">Ready to Insert.</div>
         <div style="display:flex; gap:10px; justify-content:center;">
             <button class="btn btn-secondary" onclick="dllInsert.reset()">Reset</button>
             <button class="btn btn-primary" onclick="dllInsert.step()">â–¶ Step Through</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - DLL Insert</div><div class="slide-no"></div></div>

  <script>
    const dllInsert = {
        stepIdx: 0,
        
        init: function() { this.reset(); },
        
        reset: function() {
            this.stepIdx = 0;
            document.getElementById('di-grp-new').style.opacity = '0';
            document.getElementById('di-links-new').innerHTML = '';
            document.getElementById('link-old-fwd').style.opacity = '1';
            document.getElementById('link-old-back').style.opacity = '1';
            document.getElementById('link-old-fwd').setAttribute('stroke-dasharray', '');
            document.getElementById('link-old-back').setAttribute('stroke-dasharray', '');
            document.getElementById('di-msg').textContent = "Ready.";
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
        },
        
        step: function() {
            const msg = document.getElementById('di-msg');
            const newLinks = document.getElementById('di-links-new');
            
            if (this.stepIdx === 0) {
                // Show Node
                this.highlight('dins-line-1');
                document.getElementById('di-grp-new').style.opacity = '1';
                msg.textContent = "Identify Neighbors & Create Node.";
            } 
            else if (this.stepIdx === 1) {
                // Link 1: New -> Next
                this.highlight('dins-line-2');
                this.drawArrow(300, 165, 400, 100, 'next'); // New(right) to Next(bottom)
                msg.textContent = "newNode.next = nextNode";
            }
            else if (this.stepIdx === 2) {
                // Link 2: New -> Prev
                this.highlight('dins-line-3');
                this.drawArrow(200, 165, 100, 100, 'prev'); // New(left) to Curr(bottom)
                msg.textContent = "newNode.prev = current";
            }
            else if (this.stepIdx === 3) {
                // Link 3: Next -> New (Update Neighbor 1)
                this.highlight('dins-line-4');
                // Fade old red line
                const oldRed = document.getElementById('link-old-back');
                oldRed.style.opacity = '0.2';
                oldRed.setAttribute('stroke-dasharray', '5,5');
                
                this.drawArrow(350, 85, 290, 150, 'prev'); // Next(left) to New(top-right)
                msg.textContent = "nextNode.prev = newNode";
            }
            else if (this.stepIdx === 4) {
                // Link 4: Curr -> New (Update Neighbor 2)
                this.highlight('dins-line-5');
                // Fade old blue line
                const oldBlue = document.getElementById('link-old-fwd');
                oldBlue.style.opacity = '0.2';
                oldBlue.setAttribute('stroke-dasharray', '5,5');
                
                this.drawArrow(150, 65, 210, 150, 'next'); // Curr(right) to New(top-left)
                msg.textContent = "current.next = newNode";
            }
            else if (this.stepIdx === 5) {
                msg.textContent = "Insertion Complete!";
            }
            
            this.stepIdx++;
        },
        
        drawArrow: function(x1, y1, x2, y2, type) {
            const grp = document.getElementById('di-links-new');
            const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
            l.setAttribute('x1', x1); l.setAttribute('y1', y1);
            l.setAttribute('x2', x2); l.setAttribute('y2', y2);
            l.setAttribute('stroke-width', 2);
            l.style.animation = "fadeIn 0.5s ease";
            
            if (type === 'next') {
                l.setAttribute('stroke', '#2563eb');
                l.setAttribute('marker-end', 'url(#arrow-n-di)');
            } else {
                l.setAttribute('stroke', '#dc2626');
                l.setAttribute('marker-end', 'url(#arrow-p-di)');
            }
            grp.appendChild(l);
        },
        
        highlight: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        }
    };
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Doubly Linked</div>
      <div class="sub">Operations</div>
    </div>
    <span class="pill">Merge Lists</span>
  </div>

  <h2>Merging: Double the Links</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #8b5cf6;">
        <h3 style="margin:0 0 10px; color:#7c3aed;">Logically Unchanged, But...</h3>
        <p style="margin:0; font-size:16px;">
          Conceptually, it's the same as a Singly Linked List: "End of A points to Start of B".
          <br><br>
          <strong>The Catch:</strong> You can't just set <code>next</code>. You <em>must</em> also set <code>previous</code> going back, or the list will be broken during reverse traversal.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div class="line" style="color:#94a3b8;">// Merge List B onto List A</div>
        <div id="dmrg-line-1" class="line">Node tailA = listA.last;</div>
        <div id="dmrg-line-2" class="line">Node headB = listB.head;</div>
        <div class="line">&nbsp;</div>
        <div id="dmrg-line-3" class="line" style="color:#2563eb;">tailA.next = headB;      // Forward</div>
        <div id="dmrg-line-4" class="line" style="color:#dc2626;">headB.previous = tailA;  // Backward!</div>
        <div class="line">&nbsp;</div>
        <div id="dmrg-line-5" class="line">listA.last = listB.last; // Update Tail</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:450px;">
      
      <svg id="dll-merge-stage" width="100%" height="250" viewBox="0 0 550 250" style="overflow:visible;">
        <defs>
            <marker id="arrow-n-dm" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><polygon points="0 0, 8 3, 0 6" fill="#2563eb" /></marker>
            <marker id="arrow-p-dm" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><polygon points="0 3, 8 6, 8 0" fill="#dc2626" /></marker>
        </defs>
        
        <g id="dm-list-a" transform="translate(20, 100)">
            <rect x="0" y="0" width="80" height="40" rx="4" fill="#fff" stroke="#0f172a" stroke-width="2"/>
            <text x="40" y="25" text-anchor="middle" font-weight="bold">A1</text>
            <line x1="80" y1="15" x2="110" y2="15" stroke="#2563eb" marker-end="url(#arrow-n-dm)"/>
            <line x1="110" y1="25" x2="80" y2="25" stroke="#dc2626" marker-end="url(#arrow-p-dm)"/>
            <g transform="translate(110, 0)">
                <rect x="0" y="0" width="80" height="40" rx="4" fill="#eff6ff" stroke="#2563eb" stroke-width="2"/>
                <text x="40" y="25" text-anchor="middle" font-weight="bold" fill="#1e40af">Tail A</text>
                <text id="null-a-fwd" x="90" y="25" font-size="10" fill="#94a3b8">NULL</text>
            </g>
        </g>
        
        <g id="dm-list-b" transform="translate(280, 100)" style="transition: transform 0.8s ease;">
            <g>
                <rect x="0" y="0" width="80" height="40" rx="4" fill="#fef2f2" stroke="#dc2626" stroke-width="2"/>
                <text x="40" y="25" text-anchor="middle" font-weight="bold" fill="#991b1b">Head B</text>
                <text id="null-b-back" x="-30" y="25" font-size="10" fill="#94a3b8">NULL</text>
            </g>
            <line x1="80" y1="15" x2="110" y2="15" stroke="#2563eb" marker-end="url(#arrow-n-dm)"/>
            <line x1="110" y1="25" x2="80" y2="25" stroke="#dc2626" marker-end="url(#arrow-p-dm)"/>
            <g transform="translate(110, 0)">
                <rect x="0" y="0" width="80" height="40" rx="4" fill="#fff" stroke="#0f172a" stroke-width="2"/>
                <text x="40" y="25" text-anchor="middle" font-weight="bold">B2</text>
            </g>
        </g>
        
        <g id="dm-links-new"></g>

      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0; text-align:center;">
         <div id="dm-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px;">Two separate lists.</div>
         <div style="display:flex; gap:10px; justify-content:center;">
             <button class="btn btn-secondary" onclick="dllMerge.reset()">Reset</button>
             <button class="btn btn-primary" style="background:#8b5cf6;" onclick="dllMerge.merge()">Merge A + B</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - DLL Merge</div><div class="slide-no"></div></div>

  <script>
    const dllMerge = {
        init: function() { this.reset(); },
        
        reset: function() {
            document.getElementById('dm-list-b').setAttribute('transform', 'translate(280, 100)');
            document.getElementById('dm-links-new').innerHTML = '';
            document.getElementById('null-a-fwd').style.opacity = '1';
            document.getElementById('null-b-back').style.opacity = '1';
            document.getElementById('dm-msg').textContent = "Two separate lists.";
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
        },
        
        merge: async function() {
            const msg = document.getElementById('dm-msg');
            
            // 1. Move Closer
            this.highlight('dmrg-line-1');
            msg.textContent = "Aligning lists...";
            document.getElementById('dm-list-b').setAttribute('transform', 'translate(240, 100)');
            
            await this.wait(800);
            
            // 2. Forward Link
            this.highlight('dmrg-line-3');
            msg.textContent = "tailA.next = headB (Blue)";
            document.getElementById('null-a-fwd').style.opacity = '0'; // Hide NULL
            this.drawArrow(210, 115, 240, 115, 'next');
            
            await this.wait(800);
            
            // 3. Backward Link
            this.highlight('dmrg-line-4');
            msg.textContent = "headB.prev = tailA (Red) - Don't forget this!";
            document.getElementById('null-b-back').style.opacity = '0'; // Hide NULL
            this.drawArrow(240, 125, 210, 125, 'prev');
            
            await this.wait(800);
            
            this.highlight('dmrg-line-5');
            msg.textContent = "Merge Complete. A & B are one.";
        },
        
        drawArrow: function(x1, y1, x2, y2, type) {
            const grp = document.getElementById('dm-links-new');
            const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
            l.setAttribute('x1', x1); l.setAttribute('y1', y1);
            l.setAttribute('x2', x2); l.setAttribute('y2', y2);
            l.setAttribute('stroke-width', 2);
            l.style.animation = "fadeIn 0.5s ease";
            
            if (type === 'next') {
                l.setAttribute('stroke', '#2563eb');
                l.setAttribute('marker-end', 'url(#arrow-n-dm)');
            } else {
                l.setAttribute('stroke', '#dc2626');
                l.setAttribute('marker-end', 'url(#arrow-p-dm)');
            }
            grp.appendChild(l);
        },
        
        highlight: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>
<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Doubly Linked</div>
      <div class="sub">Operations</div>
    </div>
    <span class="pill">Delete Head</span>
  </div>

  <h2>Deleting a Node (The Safety Check)</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #ef4444;">
        <h3 style="margin:0 0 10px; color:#b91c1c;">The Critical Step</h3>
        <p style="margin:0; font-size:16px;">
          When removing the first node, the <em>new</em> head still points back to the old one.
          <br>You <strong>must</strong> set <code>head.previous = null</code> to fully detach the old node and avoid memory leaks or traversal bugs.
        </p>
      </div>

      <div class="code-block" style="font-size:14px; padding:15px;">
        <div class="line" style="color:#94a3b8;">// Removing the Head Node</div>
        <div id="ddel-line-1" class="line">Node oldHead = head;</div>
        <div class="line">&nbsp;</div>
        <div class="line" style="color:#94a3b8;">// 1. Move Head Forward</div>
        <div id="ddel-line-2" class="line" style="color:#2563eb;">head = head.next;</div>
        <div class="line">&nbsp;</div>
        <div class="line" style="color:#94a3b8;">// 2. Clean Back-Link (Critical!)</div>
        <div id="ddel-line-3" class="line">if (head != null) {</div>
        <div id="ddel-line-4" class="line" style="color:#ef4444;">&nbsp;&nbsp;head.previous = null;</div>
        <div id="ddel-line-5" class="line">}</div>
        <div class="line">&nbsp;</div>
        <div class="line" style="color:#94a3b8;">// 3. Cleanup Forward-Link</div>
        <div id="ddel-line-6" class="line">oldHead.next = null;</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:450px;">
      
      <svg id="dll-del-stage" width="100%" height="250" viewBox="0 0 500 250" style="overflow:visible;">
        <defs>
            <marker id="arrow-n-dd" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><polygon points="0 0, 8 3, 0 6" fill="#2563eb" /></marker>
            <marker id="arrow-p-dd" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto"><polygon points="0 3, 8 6, 8 0" fill="#dc2626" /></marker>
            <marker id="arrow-ptr-dd" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/></marker>
        </defs>
        
        <g id="dd-node-1" transform="translate(50, 100)" style="transition: opacity 0.5s ease;">
            <rect width="80" height="40" rx="4" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
            <text x="40" y="25" text-anchor="middle" font-weight="bold" fill="#7f1d1d">OldHead</text>
        </g>
        
        <g id="dd-links">
            <line id="dd-link-fwd" x1="130" y1="115" x2="190" y2="115" stroke="#2563eb" stroke-width="2" marker-end="url(#arrow-n-dd)" style="transition: opacity 0.5s;"/>
            <line id="dd-link-back" x1="190" y1="125" x2="130" y2="125" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow-p-dd)" style="transition: opacity 0.5s;"/>
        </g>

        <g id="dd-node-2" transform="translate(190, 100)">
            <rect width="80" height="40" rx="4" fill="#fff" stroke="#0f172a" stroke-width="2"/>
            <text x="40" y="25" text-anchor="middle" font-weight="bold">Node 2</text>
        </g>
        
        <g transform="translate(140, 0)">
             <line x1="130" y1="115" x2="160" y2="115" stroke="#2563eb" marker-end="url(#arrow-n-dd)"/>
             <line x1="160" y1="125" x2="130" y2="125" stroke="#dc2626" marker-end="url(#arrow-p-dd)"/>
        </g>
        
        <g id="dd-node-3" transform="translate(300, 100)">
            <rect width="80" height="40" rx="4" fill="#fff" stroke="#0f172a" stroke-width="2"/>
            <text x="40" y="25" text-anchor="middle" font-weight="bold">Node 3</text>
        </g>

        <g id="dd-head-ptr" transform="translate(90, 60)" style="transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);">
            <text x="0" y="0" text-anchor="middle" font-weight="bold" fill="#ea580c" font-size="12">HEAD</text>
            <line x1="0" y1="5" x2="0" y2="25" stroke="#ea580c" stroke-width="2" marker-end="url(#arrow-ptr-dd)"/>
        </g>

      </svg>

      <div style="background:#f8fafc; padding:15px; border-radius:12px; border:1px solid #e2e8f0; text-align:center;">
         <div id="dd-msg" style="font-family:monospace; color:#0f172a; font-weight:bold; margin-bottom:10px;">Ready to Delete Head.</div>
         <div style="display:flex; gap:10px; justify-content:center;">
             <button class="btn btn-secondary" onclick="dllDel.reset()">Reset</button>
             <button class="btn btn-danger" onclick="dllDel.run()">Run Delete</button>
         </div>
      </div>
    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - DLL Delete</div><div class="slide-no"></div></div>

  <script>
    const dllDel = {
        init: function() { this.reset(); },
        
        reset: function() {
            document.getElementById('dd-head-ptr').setAttribute('transform', 'translate(90, 60)');
            document.getElementById('dd-link-fwd').style.opacity = '1';
            document.getElementById('dd-link-back').style.opacity = '1';
            document.getElementById('dd-node-1').style.opacity = '1';
            document.getElementById('dd-msg').textContent = "Ready.";
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
        },
        
        run: async function() {
            const msg = document.getElementById('dd-msg');
            
            // 1. Move Head
            this.highlight('ddel-line-2');
            msg.textContent = "head = head.next (Move Pointer)";
            document.getElementById('dd-head-ptr').setAttribute('transform', 'translate(230, 60)');
            
            await this.wait(800);
            
            // 2. Remove Back Link
            this.highlight('ddel-line-4');
            msg.textContent = "head.previous = null (Break Red Link)";
            document.getElementById('dd-link-back').style.opacity = '0.1'; // Fade Red
            
            await this.wait(800);
            
            // 3. Remove Forward Link (Cleanup)
            this.highlight('ddel-line-6');
            msg.textContent = "oldHead.next = null (Break Blue Link)";
            document.getElementById('dd-link-fwd').style.opacity = '0.1'; // Fade Blue
            document.getElementById('dd-node-1').style.opacity = '0.2';   // Fade Node
            
            await this.wait(800);
            msg.textContent = "Deletion Complete. Links Clean.";
        },
        
        highlight: function(id) {
            document.querySelectorAll('.line').forEach(l => l.classList.remove('active-line'));
            document.getElementById(id).classList.add('active-line');
        },
        wait: function(ms) { return new Promise(r => setTimeout(r, ms)); }
    };
    
    setTimeout(() => dllDel.init(), 200);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

<section class="slide">
  <div class="slide-top">
    <div class="meta">
      <div class="course">Application</div>
      <div class="sub">Real World</div>
    </div>
    <span class="pill">Lists in Practice</span>
  </div>

  <h2>From "Node" to "Song"</h2>
  
  <div class="grid-2">
    <div style="display:flex; flex-direction:column; gap:20px;">
      <div class="info-card" style="border-left-color: #ec4899;">
        <h3 style="margin:0 0 10px; color:#be185d;">The "Playlist" Analogy</h3>
        <p style="margin:0; font-size:16px;">
          The abstract concepts map directly to real features:
        </p>
        <ul style="margin:5px 0 0 20px; font-size:15px; color:#334155;">
            <li><strong>Node</strong> &rarr; Song</li>
            <li><strong>Traverse</strong> &rarr; Play All</li>
            <li><strong>Re-link</strong> &rarr; Shuffle / Reorder</li>
        </ul>
      </div>

      <div class="code-block" style="font-size:13px; padding:15px;">
        <div class="line" style="color:#64748b;">// 1. The Generic Way</div>
        <div class="line">public class Node {</div>
        <div class="line">&nbsp;&nbsp;public Node next;</div>
        <div class="line">&nbsp;&nbsp;public Object data;</div>
        <div class="line">}</div>
        <div class="line">&nbsp;</div>
        <div class="line" style="color:#ec4899;">// 2. The Specific Way (Playlist)</div>
        <div class="line">public class Song {</div>
        <div class="line">&nbsp;&nbsp;public Song next;</div>
        <div class="line">&nbsp;&nbsp;public SongData info; </div>
        <div class="line">}</div>
        <div class="line">public class Playlist {</div>
        <div class="line">&nbsp;&nbsp;private Song head;</div>
        <div class="line">&nbsp;&nbsp;public void Play() { ... }</div>
        <div class="line">}</div>
      </div>
    </div>

    <div class="card" style="display:flex; flex-direction:column; justify-content:space-between; height:450px; background:#fdf2f8; border-color:#fbcfe8;">
      
      <div style="flex-grow:1; display:flex; flex-direction:column; align-items:center; padding-top:10px;">
          <div style="font-weight:bold; color:#be185d; margin-bottom:15px; letter-spacing:1px;">MY COOL MIX</div>
          
          <svg id="playlist-stage" width="100%" height="280" viewBox="0 0 350 280" style="overflow:visible;">
             <defs>
                <marker id="arrow-song" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#be185d"/>
                </marker>
            </defs>
            <g id="song-list-grp"></g>
            
            <g id="play-head" style="opacity:0; transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);">
                <path d="M -10 -15 L 10 -15 L 0 0 Z" fill="#ec4899" />
                <text x="0" y="-20" text-anchor="middle" font-size="10" fill="#be185d" font-weight="bold">NOW PLAYING</text>
            </g>
          </svg>
      </div>

      <div style="background:#fff; padding:15px; border-radius:12px; border:1px solid #f9a8d4; display:flex; justify-content:space-between; align-items:center;">
         <div id="player-status" style="font-family:monospace; color:#831843; font-weight:bold; font-size:12px;">Status: Stopped</div>
         <div style="display:flex; gap:8px;">
             <button class="btn btn-sm" style="background:#fce7f3; color:#831843; border-color:#fbcfe8;" onclick="playlistDemo.shuffle()">ðŸ”€ Shuffle</button>
             <button class="btn btn-sm" style="background:#be185d; color:white; border-color:#9d174d;" onclick="playlistDemo.play()">â–¶ Play</button>
         </div>
      </div>

    </div>
  </div>

  <div class="slide-footer"><div class="muted">Lecture 4 - Lists in Practice</div><div class="slide-no"></div></div>

  <script>
    const playlistDemo = {
        songs: [
            { title: "Hello World", artist: "The Compilers" },
            { title: "Null Pointer", artist: "Crash Dummies" },
            { title: "Linked Up", artist: "The Chains" },
            { title: "Tail Spin", artist: "Last Resort" }
        ],
        isPlaying: false,
        
        init: function() { this.render(); },
        
        render: function() {
            const grp = document.getElementById('song-list-grp');
            grp.innerHTML = '';
            
            let y = 10;
            this.songs.forEach((song, i) => {
                const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                g.setAttribute('transform', `translate(50, ${y})`);
                g.setAttribute('id', `song-node-${i}`);
                g.style.transition = "transform 0.5s ease";
                
                // Card
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttribute('width', 250); rect.setAttribute('height', 50);
                rect.setAttribute('rx', 6); 
                rect.setAttribute('fill', '#fff');
                rect.setAttribute('stroke', '#be185d'); rect.setAttribute('stroke-width', 2);
                
                // Icon
                const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                circle.setAttribute('cx', 30); circle.setAttribute('cy', 25); circle.setAttribute('r', 15);
                circle.setAttribute('fill', '#fce7f3');
                const note = document.createElementNS("http://www.w3.org/2000/svg", "text");
                note.setAttribute('x', 30); note.setAttribute('y', 30); note.textContent = "â™«";
                note.setAttribute('text-anchor', 'middle'); note.setAttribute('fill', '#be185d');
                
                // Text
                const tTitle = document.createElementNS("http://www.w3.org/2000/svg", "text");
                tTitle.setAttribute('x', 60); tTitle.setAttribute('y', 20); 
                tTitle.textContent = song.title;
                tTitle.setAttribute('font-weight', 'bold'); tTitle.setAttribute('fill', '#0f172a');
                
                const tArtist = document.createElementNS("http://www.w3.org/2000/svg", "text");
                tArtist.setAttribute('x', 60); tArtist.setAttribute('y', 40); 
                tArtist.textContent = song.artist;
                tArtist.setAttribute('font-size', '12'); tArtist.setAttribute('fill', '#64748b');
                
                g.append(rect, circle, note, tTitle, tArtist);
                grp.appendChild(g);
                
                // Link Arrow (Vertical)
                if(i < this.songs.length - 1) {
                    const l = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    l.setAttribute('x1', 175); l.setAttribute('y1', 50);
                    l.setAttribute('x2', 175); l.setAttribute('y2', 70);
                    l.setAttribute('stroke', '#be185d'); l.setAttribute('marker-end', 'url(#arrow-song)');
                    g.appendChild(l);
                }
                
                y += 70;
            });
            
            // NULL at bottom
            const nullTxt = document.createElementNS("http://www.w3.org/2000/svg", "text");
            nullTxt.setAttribute('x', 175); nullTxt.setAttribute('y', y+15);
            nullTxt.textContent = "END";
            nullTxt.setAttribute('text-anchor', 'middle');
            nullTxt.setAttribute('fill', '#be185d');
            nullTxt.setAttribute('font-weight', 'bold');
            grp.appendChild(nullTxt);
        },
        
        play: async function() {
            if(this.isPlaying) return;
            this.isPlaying = true;
            const status = document.getElementById('player-status');
            const head = document.getElementById('play-head');
            
            status.textContent = "Starting Playlist...";
            head.style.opacity = '1';
            
            for(let i=0; i<this.songs.length; i++) {
                // Move Head
                const y = 10 + (i * 70) + 50; // Bottom of card
                head.setAttribute('transform', `translate(280, ${y-25}) rotate(-90)`); // Pointing left
                
                // Highlight Card
                const card = document.getElementById(`song-node-${i}`).querySelector('rect');
                card.setAttribute('fill', '#fdf2f8');
                card.setAttribute('stroke-width', '4');
                
                status.textContent = `â–¶ Playing: ${this.songs[i].title}`;
                
                await new Promise(r => setTimeout(r, 1500));
                
                // Un-highlight
                card.setAttribute('fill', '#fff');
                card.setAttribute('stroke-width', '2');
            }
            
            head.style.opacity = '0';
            status.textContent = "Status: Finished.";
            this.isPlaying = false;
        },
        
        shuffle: function() {
            if(this.isPlaying) return;
            // Simple Fisher-Yates for the data
            for (let i = this.songs.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [this.songs[i], this.songs[j]] = [this.songs[j], this.songs[i]];
            }
            this.render();
            document.getElementById('player-status').textContent = "Status: Shuffled!";
        }
    };
    
    setTimeout(() => playlistDemo.init(), 500);
  </script>
          <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

        <section class="slide">
            <div class="slide-top">
              <div class="meta"><div class="course">Wrap Up</div><div class="sub">Key Takeaways</div></div>
              <span class="pill">End</span>
            </div>
            
            <h2>Summary</h2>
            <ul>
                <li><strong>Linked Lists</strong> are nodes connected by pointers (references).</li>
                <li><strong>Dynamic:</strong> Easy to add/remove without resizing (unlike arrays).</li>
                <li><strong>Main Types:</strong>
                    <ul>
                        <li>Singly Linked (Forward only).</li>
                        <li>Doubly Linked (Forward and Backward).</li>
                        <li>Circular (Looping).</li>
                    </ul>
                </li>
                <li><strong>Caution:</strong> Always manage your pointers (next/previous) carefully to avoid breaking the chain.</li>
            </ul>
            
            <div style="margin-top:40px; text-align:center;">
                <h3>Questions?</h3>
            </div>
            
            <div class="slide-footer"><div class="muted"> </div><div class="slide-no" data-slide-no></div></div>
</section>

      </div>
    </div>
  </div>

  <div class="controls">
    <button class="iconbtn" id="prevBtn" onclick="go(-1)" aria-label="Previous slide" title="Previous (â†)">
      <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
    </button>
    <button class="iconbtn" id="nextBtn" onclick="go(1)" aria-label="Next slide" title="Next (â†’ / Space)">
      <svg viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg>
    </button>
    <button class="iconbtn" id="fsBtn" onclick="toggleFullScreen()" aria-label="Toggle fullscreen" title="Fullscreen (F)">
      <svg viewBox="0 0 24 24">
        <path d="M8 3H5a2 2 0 0 0-2 2v3"/>
        <path d="M16 3h3a2 2 0 0 1 2 2v3"/>
        <path d="M8 21H5a2 2 0 0 1-2-2v-3"/>
        <path d="M16 21h3a2 2 0 0 0 2-2v-3"/>
      </svg>
    </button>
  </div>

  <script>
    const slides = Array.from(document.querySelectorAll(".slide"));
    const progressBar = document.getElementById("progress-bar");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    let current = 0;

    function applyScale(){
      const pad = 24;
      const w = window.innerWidth - pad*2;
      const h = window.innerHeight - pad*2;
      const baseW = 1600;
      const baseH = 900;
      const s = Math.min(w/baseW, h/baseH);
      document.documentElement.style.setProperty('--scale', String(Math.max(0.3, Math.min(s, 1.5))));
    }

    function updateUI(){
      slides.forEach(s => s.classList.remove("active"));
      slides[current].classList.add("active");
      
      // Update Slide Numbers
      slides.forEach((s, i) => {
        const holder = s.querySelector("[data-slide-no]");
        if (holder) holder.textContent = `${i + 1} / ${slides.length}`;
      });

      progressBar.style.width = ((current + 1) / slides.length) * 100 + "%";
      prevBtn.disabled = current === 0;
      nextBtn.disabled = current === slides.length - 1;
      
      if(window.MathJax) MathJax.typesetPromise();
    }

    function go(dir){
      const nextIndex = current + dir;
      if(nextIndex < 0 || nextIndex >= slides.length) return;
      current = nextIndex;
      updateUI();
    }

    function toggleFullScreen(){
      if(!document.fullscreenElement){
        document.documentElement.requestFullscreen?.();
      }else{
        document.exitFullscreen?.();
      }
    }
    
    document.addEventListener("keydown", (e) => {
      if(e.key === "ArrowRight" || e.key === " " || e.key === "Enter"){
        if (e.key === " ") e.preventDefault();
        go(1);
      } else if(e.key === "ArrowLeft"){
        go(-1);
      } else if(e.key.toLowerCase() === "f"){
        toggleFullScreen();
      }
    });
    
    window.addEventListener("resize", applyScale);
    applyScale();
    updateUI();
  </script>
</body>
</html>